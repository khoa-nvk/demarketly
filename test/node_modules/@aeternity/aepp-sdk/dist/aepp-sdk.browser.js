/*! For license information please see aepp-sdk.browser.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("buffer"),require("bignumber.js"),require("rlp"),require("bs58"),require("tweetnacl"),require("varuint-bitcoin"),require("@aeternity/uuid"),require("@aeternity/argon2-browser/dist/argon2-bundled.min.js"),require("tweetnacl-auth"),require("bip32-path"),require("aes-js"),require("@aeternity/aepp-calldata"),require("@azure/core-client"),require("@azure/core-rest-pipeline"),require("json-bigint"),require("websocket"),require("events")):"function"==typeof define&&define.amd?define(["buffer","bignumber.js","rlp","bs58","tweetnacl","varuint-bitcoin","@aeternity/uuid","@aeternity/argon2-browser/dist/argon2-bundled.min.js","tweetnacl-auth","bip32-path","aes-js","@aeternity/aepp-calldata","@azure/core-client","@azure/core-rest-pipeline","json-bigint","websocket","events"],t):"object"==typeof exports?exports.Ae=t(require("buffer"),require("bignumber.js"),require("rlp"),require("bs58"),require("tweetnacl"),require("varuint-bitcoin"),require("@aeternity/uuid"),require("@aeternity/argon2-browser/dist/argon2-bundled.min.js"),require("tweetnacl-auth"),require("bip32-path"),require("aes-js"),require("@aeternity/aepp-calldata"),require("@azure/core-client"),require("@azure/core-rest-pipeline"),require("json-bigint"),require("websocket"),require("events")):e.Ae=t(e.buffer,e["bignumber.js"],e.rlp,e.bs58,e.tweetnacl,e["varuint-bitcoin"],e["@aeternity/uuid"],e["@aeternity/argon2-browser/dist/argon2-bundled.min.js"],e["tweetnacl-auth"],e["bip32-path"],e["aes-js"],e["@aeternity/aepp-calldata"],e["@azure/core-client"],e["@azure/core-rest-pipeline"],e["json-bigint"],e.websocket,e.events)}(self,(function(e,t,n,r,a,i,o,s,c,l,u,d,p,m,h,y,f){return function(){var g={8442:function(e,t,n){const r=n(9488);function a(e,t,n){const r=e[t]+e[n];let a=e[t+1]+e[n+1];r>=4294967296&&a++,e[t]=r,e[t+1]=a}function i(e,t,n,r){let a=e[t]+n;n<0&&(a+=4294967296);let i=e[t+1]+r;a>=4294967296&&i++,e[t]=a,e[t+1]=i}function o(e,t){return e[t]^e[t+1]<<8^e[t+2]<<16^e[t+3]<<24}function s(e,t,n,r,o,s){const c=d[o],l=d[o+1],p=d[s],m=d[s+1];a(u,e,t),i(u,e,c,l);let h=u[r]^u[e],y=u[r+1]^u[e+1];u[r]=y,u[r+1]=h,a(u,n,r),h=u[t]^u[n],y=u[t+1]^u[n+1],u[t]=h>>>24^y<<8,u[t+1]=y>>>24^h<<8,a(u,e,t),i(u,e,p,m),h=u[r]^u[e],y=u[r+1]^u[e+1],u[r]=h>>>16^y<<16,u[r+1]=y>>>16^h<<16,a(u,n,r),h=u[t]^u[n],y=u[t+1]^u[n+1],u[t]=y>>>31^h<<1,u[t+1]=h>>>31^y<<1}const c=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),l=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3].map((function(e){return 2*e}))),u=new Uint32Array(32),d=new Uint32Array(32);function p(e,t){let n=0;for(n=0;n<16;n++)u[n]=e.h[n],u[n+16]=c[n];for(u[24]=u[24]^e.t,u[25]=u[25]^e.t/4294967296,t&&(u[28]=~u[28],u[29]=~u[29]),n=0;n<32;n++)d[n]=o(e.b,4*n);for(n=0;n<12;n++)s(0,8,16,24,l[16*n+0],l[16*n+1]),s(2,10,18,26,l[16*n+2],l[16*n+3]),s(4,12,20,28,l[16*n+4],l[16*n+5]),s(6,14,22,30,l[16*n+6],l[16*n+7]),s(0,10,20,30,l[16*n+8],l[16*n+9]),s(2,12,22,24,l[16*n+10],l[16*n+11]),s(4,14,16,26,l[16*n+12],l[16*n+13]),s(6,8,18,28,l[16*n+14],l[16*n+15]);for(n=0;n<16;n++)e.h[n]=e.h[n]^u[n]^u[n+16]}const m=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function h(e,t,n,r){if(0===e||e>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(t&&t.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");if(n&&16!==n.length)throw new Error("Illegal salt, expected Uint8Array with length is 16");if(r&&16!==r.length)throw new Error("Illegal personal, expected Uint8Array with length is 16");const a={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:e};m.fill(0),m[0]=e,t&&(m[1]=t.length),m[2]=1,m[3]=1,n&&m.set(n,32),r&&m.set(r,48);for(let e=0;e<16;e++)a.h[e]=c[e]^o(m,4*e);return t&&(y(a,t),a.c=128),a}function y(e,t){for(let n=0;n<t.length;n++)128===e.c&&(e.t+=e.c,p(e,!1),e.c=0),e.b[e.c++]=t[n]}function f(e){for(e.t+=e.c;e.c<128;)e.b[e.c++]=0;p(e,!0);const t=new Uint8Array(e.outlen);for(let n=0;n<e.outlen;n++)t[n]=e.h[n>>2]>>8*(3&n);return t}function g(e,t,n,a,i){n=n||64,e=r.normalizeInput(e),a&&(a=r.normalizeInput(a)),i&&(i=r.normalizeInput(i));const o=h(n,t,a,i);return y(o,e),f(o)}e.exports={blake2b:g,blake2bHex:function(e,t,n,a,i){const o=g(e,t,n,a,i);return r.toHex(o)},blake2bInit:h,blake2bUpdate:y,blake2bFinal:f}},9488:function(e){function t(e){return(4294967296+e).toString(16).substring(1)}e.exports={normalizeInput:function(e){let t;if(e instanceof Uint8Array)t=e;else{if("string"!=typeof e)throw new Error("Input must be an string, Buffer or Uint8Array");t=(new TextEncoder).encode(e)}return t},toHex:function(e){return Array.prototype.map.call(e,(function(e){return(e<16?"0":"")+e.toString(16)})).join("")},debugPrint:function(e,n,r){let a="\n"+e+" = ";for(let i=0;i<n.length;i+=2){if(32===r)a+=t(n[i]).toUpperCase(),a+=" ",a+=t(n[i+1]).toUpperCase();else{if(64!==r)throw new Error("Invalid size "+r);a+=t(n[i+1]).toUpperCase(),a+=t(n[i]).toUpperCase()}i%6==4?a+="\n"+new Array(e.length+4).join(" "):i<n.length-2&&(a+=" ")}console.log(a)},testSpeed:function(e,t,n){let r=(new Date).getTime();const a=new Uint8Array(t);for(let e=0;e<t;e++)a[e]=e%256;const i=(new Date).getTime();console.log("Generated random input in "+(i-r)+"ms"),r=i;for(let i=0;i<n;i++){const n=e(a),i=(new Date).getTime(),o=i-r;r=i,console.log("Hashed in "+o+"ms: "+n.substring(0,20)+"..."),console.log(Math.round(t/(1<<20)/(o/1e3)*100)/100+" MB PER SECOND")}}}},3536:function(e,t,n){var r=n(1910);e.exports=r},991:function(e,t,n){n(7690);var r=n(5703);e.exports=r("Array").includes},8557:function(e,t,n){var r=n(7046),a=n(991),i=n(1631),o=Array.prototype,s=String.prototype;e.exports=function(e){var t=e.includes;return e===o||r(o,e)&&t===o.includes?a:"string"==typeof e||e===s||r(s,e)&&t===s.includes?i:t}},8171:function(e,t,n){n(6450);var r=n(4058).Object,a=e.exports=function(e,t,n){return r.defineProperty(e,t,n)};r.defineProperty.sham&&(a.sham=!0)},1631:function(e,t,n){n(1035);var r=n(5703);e.exports=r("String").includes},3685:function(e,t,n){e.exports=n(621)},621:function(e,t,n){var r=n(3536);e.exports=r},4883:function(e,t,n){var r=n(7475),a=n(9826),i=TypeError;e.exports=function(e){if(r(e))return e;throw i(a(e)+" is not a function")}},8479:function(e){e.exports=function(){}},6059:function(e,t,n){var r=n(941),a=String,i=TypeError;e.exports=function(e){if(r(e))return e;throw i(a(e)+" is not an object")}},1692:function(e,t,n){var r=n(4529),a=n(9413),i=n(623),o=function(e){return function(t,n,o){var s,c=r(t),l=i(c),u=a(o,l);if(e&&n!=n){for(;l>u;)if((s=c[u++])!=s)return!0}else for(;l>u;u++)if((e||u in c)&&c[u]===n)return e||u||0;return!e&&-1}};e.exports={includes:o(!0),indexOf:o(!1)}},2532:function(e,t,n){var r=n(5329),a=r({}.toString),i=r("".slice);e.exports=function(e){return i(a(e),8,-1)}},9697:function(e,t,n){var r=n(2885),a=n(7475),i=n(2532),o=n(9813)("toStringTag"),s=Object,c="Arguments"==i(function(){return arguments}());e.exports=r?i:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=s(e),o))?n:c?i(t):"Object"==(r=i(t))&&a(t.callee)?"Arguments":r}},7772:function(e,t,n){var r=n(9813)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,"/./"[e](t)}catch(e){}}return!1}},2029:function(e,t,n){var r=n(5746),a=n(5988),i=n(1887);e.exports=r?function(e,t,n){return a.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},1887:function(e){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},5609:function(e,t,n){var r=n(1899),a=Object.defineProperty;e.exports=function(e,t){try{a(r,e,{value:t,configurable:!0,writable:!0})}catch(n){r[e]=t}return t}},5746:function(e,t,n){var r=n(5981);e.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},1333:function(e,t,n){var r=n(1899),a=n(941),i=r.document,o=a(i)&&a(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},2861:function(e,t,n){var r=n(626);e.exports=r("navigator","userAgent")||""},3385:function(e,t,n){var r,a,i=n(1899),o=n(2861),s=i.process,c=i.Deno,l=s&&s.versions||c&&c.version,u=l&&l.v8;u&&(a=(r=u.split("."))[0]>0&&r[0]<4?1:+(r[0]+r[1])),!a&&o&&(!(r=o.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=o.match(/Chrome\/(\d+)/))&&(a=+r[1]),e.exports=a},5703:function(e,t,n){var r=n(4058);e.exports=function(e){return r[e+"Prototype"]}},6887:function(e,t,n){"use strict";var r=n(1899),a=n(9730),i=n(5329),o=n(7475),s=n(9677).f,c=n(7252),l=n(4058),u=n(6843),d=n(2029),p=n(953),m=function(e){var t=function(n,r,i){if(this instanceof t){switch(arguments.length){case 0:return new e;case 1:return new e(n);case 2:return new e(n,r)}return new e(n,r,i)}return a(e,this,arguments)};return t.prototype=e.prototype,t};e.exports=function(e,t){var n,a,h,y,f,g,N,C,w=e.target,b=e.global,v=e.stat,x=e.proto,S=b?r:v?r[w]:(r[w]||{}).prototype,T=b?l:l[w]||d(l,w,{})[w],_=T.prototype;for(h in t)n=!c(b?h:w+(v?".":"#")+h,e.forced)&&S&&p(S,h),f=T[h],n&&(g=e.dontCallGetSet?(C=s(S,h))&&C.value:S[h]),y=n&&g?g:t[h],n&&typeof f==typeof y||(N=e.bind&&n?u(y,r):e.wrap&&n?m(y):x&&o(y)?i(y):y,(e.sham||y&&y.sham||f&&f.sham)&&d(N,"sham",!0),d(T,h,N),x&&(p(l,a=w+"Prototype")||d(l,a,{}),d(l[a],h,y),e.real&&_&&!_[h]&&d(_,h,y)))}},5981:function(e){e.exports=function(e){try{return!!e()}catch(e){return!0}}},9730:function(e,t,n){var r=n(8285),a=Function.prototype,i=a.apply,o=a.call;e.exports="object"==typeof Reflect&&Reflect.apply||(r?o.bind(i):function(){return o.apply(i,arguments)})},6843:function(e,t,n){var r=n(5329),a=n(4883),i=n(8285),o=r(r.bind);e.exports=function(e,t){return a(e),void 0===t?e:i?o(e,t):function(){return e.apply(t,arguments)}}},8285:function(e,t,n){var r=n(5981);e.exports=!r((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},8834:function(e,t,n){var r=n(8285),a=Function.prototype.call;e.exports=r?a.bind(a):function(){return a.apply(a,arguments)}},5329:function(e,t,n){var r=n(8285),a=Function.prototype,i=a.bind,o=a.call,s=r&&i.bind(o,o);e.exports=r?function(e){return e&&s(e)}:function(e){return e&&function(){return o.apply(e,arguments)}}},626:function(e,t,n){var r=n(4058),a=n(1899),i=n(7475),o=function(e){return i(e)?e:void 0};e.exports=function(e,t){return arguments.length<2?o(r[e])||o(a[e]):r[e]&&r[e][t]||a[e]&&a[e][t]}},4229:function(e,t,n){var r=n(4883);e.exports=function(e,t){var n=e[t];return null==n?void 0:r(n)}},1899:function(e,t,n){var r=function(e){return e&&e.Math==Math&&e};e.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof n.g&&n.g)||function(){return this}()||Function("return this")()},953:function(e,t,n){var r=n(5329),a=n(9678),i=r({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return i(a(e),t)}},2840:function(e,t,n){var r=n(5746),a=n(5981),i=n(1333);e.exports=!r&&!a((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},7026:function(e,t,n){var r=n(5329),a=n(5981),i=n(2532),o=Object,s=r("".split);e.exports=a((function(){return!o("z").propertyIsEnumerable(0)}))?function(e){return"String"==i(e)?s(e,""):o(e)}:o},7475:function(e){e.exports=function(e){return"function"==typeof e}},7252:function(e,t,n){var r=n(5981),a=n(7475),i=/#|\.prototype\./,o=function(e,t){var n=c[s(e)];return n==u||n!=l&&(a(t)?r(t):!!t)},s=o.normalize=function(e){return String(e).replace(i,".").toLowerCase()},c=o.data={},l=o.NATIVE="N",u=o.POLYFILL="P";e.exports=o},941:function(e,t,n){var r=n(7475);e.exports=function(e){return"object"==typeof e?null!==e:r(e)}},2529:function(e){e.exports=!0},685:function(e,t,n){var r=n(941),a=n(2532),i=n(9813)("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[i])?!!t:"RegExp"==a(e))}},6664:function(e,t,n){var r=n(626),a=n(7475),i=n(7046),o=n(2302),s=Object;e.exports=o?function(e){return"symbol"==typeof e}:function(e){var t=r("Symbol");return a(t)&&i(t.prototype,s(e))}},623:function(e,t,n){var r=n(3057);e.exports=function(e){return r(e.length)}},5331:function(e){var t=Math.ceil,n=Math.floor;e.exports=Math.trunc||function(e){var r=+e;return(r>0?n:t)(r)}},2497:function(e,t,n){var r=n(3385),a=n(5981);e.exports=!!Object.getOwnPropertySymbols&&!a((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},344:function(e,t,n){var r=n(685),a=TypeError;e.exports=function(e){if(r(e))throw a("The method doesn't accept regular expressions");return e}},5988:function(e,t,n){var r=n(5746),a=n(2840),i=n(3937),o=n(6059),s=n(3894),c=TypeError,l=Object.defineProperty,u=Object.getOwnPropertyDescriptor;t.f=r?i?function(e,t,n){if(o(e),t=s(t),o(n),"function"==typeof e&&"prototype"===t&&"value"in n&&"writable"in n&&!n.writable){var r=u(e,t);r&&r.writable&&(e[t]=n.value,n={configurable:"configurable"in n?n.configurable:r.configurable,enumerable:"enumerable"in n?n.enumerable:r.enumerable,writable:!1})}return l(e,t,n)}:l:function(e,t,n){if(o(e),t=s(t),o(n),a)try{return l(e,t,n)}catch(e){}if("get"in n||"set"in n)throw c("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},9677:function(e,t,n){var r=n(5746),a=n(8834),i=n(6760),o=n(1887),s=n(4529),c=n(3894),l=n(953),u=n(2840),d=Object.getOwnPropertyDescriptor;t.f=r?d:function(e,t){if(e=s(e),t=c(t),u)try{return d(e,t)}catch(e){}if(l(e,t))return o(!a(i.f,e,t),e[t])}},7046:function(e,t,n){var r=n(5329);e.exports=r({}.isPrototypeOf)},6760:function(e,t){"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,a=r&&!n.call({1:2},1);t.f=a?function(e){var t=r(this,e);return!!t&&t.enumerable}:n},9811:function(e,t,n){var r=n(8834),a=n(7475),i=n(941),o=TypeError;e.exports=function(e,t){var n,s;if("string"===t&&a(n=e.toString)&&!i(s=r(n,e)))return s;if(a(n=e.valueOf)&&!i(s=r(n,e)))return s;if("string"!==t&&a(n=e.toString)&&!i(s=r(n,e)))return s;throw o("Can't convert object to primitive value")}},4058:function(e){e.exports={}},8219:function(e){var t=TypeError;e.exports=function(e){if(null==e)throw t("Can't call method on "+e);return e}},3030:function(e,t,n){var r=n(1899),a=n(5609),i="__core-js_shared__",o=r[i]||a(i,{});e.exports=o},8726:function(e,t,n){var r=n(2529),a=n(3030);(e.exports=function(e,t){return a[e]||(a[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.24.0",mode:r?"pure":"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.24.0/LICENSE",source:"https://github.com/zloirock/core-js"})},9413:function(e,t,n){var r=n(2435),a=Math.max,i=Math.min;e.exports=function(e,t){var n=r(e);return n<0?a(n+t,0):i(n,t)}},4529:function(e,t,n){var r=n(7026),a=n(8219);e.exports=function(e){return r(a(e))}},2435:function(e,t,n){var r=n(5331);e.exports=function(e){var t=+e;return t!=t||0===t?0:r(t)}},3057:function(e,t,n){var r=n(2435),a=Math.min;e.exports=function(e){return e>0?a(r(e),9007199254740991):0}},9678:function(e,t,n){var r=n(8219),a=Object;e.exports=function(e){return a(r(e))}},6935:function(e,t,n){var r=n(8834),a=n(941),i=n(6664),o=n(4229),s=n(9811),c=n(9813),l=TypeError,u=c("toPrimitive");e.exports=function(e,t){if(!a(e)||i(e))return e;var n,c=o(e,u);if(c){if(void 0===t&&(t="default"),n=r(c,e,t),!a(n)||i(n))return n;throw l("Can't convert object to primitive value")}return void 0===t&&(t="number"),s(e,t)}},3894:function(e,t,n){var r=n(6935),a=n(6664);e.exports=function(e){var t=r(e,"string");return a(t)?t:t+""}},2885:function(e,t,n){var r={};r[n(9813)("toStringTag")]="z",e.exports="[object z]"===String(r)},5803:function(e,t,n){var r=n(9697),a=String;e.exports=function(e){if("Symbol"===r(e))throw TypeError("Cannot convert a Symbol value to a string");return a(e)}},9826:function(e){var t=String;e.exports=function(e){try{return t(e)}catch(e){return"Object"}}},9418:function(e,t,n){var r=n(5329),a=0,i=Math.random(),o=r(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+o(++a+i,36)}},2302:function(e,t,n){var r=n(2497);e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3937:function(e,t,n){var r=n(5746),a=n(5981);e.exports=r&&a((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},9813:function(e,t,n){var r=n(1899),a=n(8726),i=n(953),o=n(9418),s=n(2497),c=n(2302),l=a("wks"),u=r.Symbol,d=u&&u.for,p=c?u:u&&u.withoutSetter||o;e.exports=function(e){if(!i(l,e)||!s&&"string"!=typeof l[e]){var t="Symbol."+e;s&&i(u,e)?l[e]=u[e]:l[e]=c&&d?d(t):p(t)}return l[e]}},7690:function(e,t,n){"use strict";var r=n(6887),a=n(1692).includes,i=n(5981),o=n(8479);r({target:"Array",proto:!0,forced:i((function(){return!Array(1).includes()}))},{includes:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),o("includes")},6450:function(e,t,n){var r=n(6887),a=n(5746),i=n(5988).f;r({target:"Object",stat:!0,forced:Object.defineProperty!==i,sham:!a},{defineProperty:i})},1035:function(e,t,n){"use strict";var r=n(6887),a=n(5329),i=n(344),o=n(8219),s=n(5803),c=n(7772),l=a("".indexOf);r({target:"String",proto:!0,forced:!c("includes")},{includes:function(e){return!!~l(s(o(this)),s(i(e)),arguments.length>1?arguments[1]:void 0)}})},3778:function(e,t,n){var r=n(8557);e.exports=r},1910:function(e,t,n){var r=n(8171);e.exports=r},5717:function(e){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},9509:function(e,t,n){var r=n(9408),a=r.Buffer;function i(e,t){for(var n in e)t[n]=e[n]}function o(e,t,n){return a(e,t,n)}a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?e.exports=r:(i(r,t),t.Buffer=o),o.prototype=Object.create(a.prototype),i(a,o),o.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return a(e,t,n)},o.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=a(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return a(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},4189:function(e,t,n){var r=n(9509).Buffer;function a(e,t){this._block=r.alloc(e),this._finalSize=t,this._blockSize=e,this._len=0}a.prototype.update=function(e,t){"string"==typeof e&&(t=t||"utf8",e=r.from(e,t));for(var n=this._block,a=this._blockSize,i=e.length,o=this._len,s=0;s<i;){for(var c=o%a,l=Math.min(i-s,a-c),u=0;u<l;u++)n[c+u]=e[s+u];s+=l,(o+=l)%a==0&&this._update(n)}return this._len+=i,this},a.prototype.digest=function(e){var t=this._len%this._blockSize;this._block[t]=128,this._block.fill(0,t+1),t>=this._finalSize&&(this._update(this._block),this._block.fill(0));var n=8*this._len;if(n<=4294967295)this._block.writeUInt32BE(n,this._blockSize-4);else{var r=(4294967295&n)>>>0,a=(n-r)/4294967296;this._block.writeUInt32BE(a,this._blockSize-8),this._block.writeUInt32BE(r,this._blockSize-4)}this._update(this._block);var i=this._hash();return e?i.toString(e):i},a.prototype._update=function(){throw new Error("_update must be implemented by subclass")},e.exports=a},7499:function(e,t,n){var r=n(5717),a=n(4189),i=n(9509).Buffer,o=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],s=new Array(64);function c(){this.init(),this._w=s,a.call(this,64,56)}function l(e,t,n){return n^e&(t^n)}function u(e,t,n){return e&t|n&(e|t)}function d(e){return(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10)}function p(e){return(e>>>6|e<<26)^(e>>>11|e<<21)^(e>>>25|e<<7)}function m(e){return(e>>>7|e<<25)^(e>>>18|e<<14)^e>>>3}r(c,a),c.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},c.prototype._update=function(e){for(var t,n=this._w,r=0|this._a,a=0|this._b,i=0|this._c,s=0|this._d,c=0|this._e,h=0|this._f,y=0|this._g,f=0|this._h,g=0;g<16;++g)n[g]=e.readInt32BE(4*g);for(;g<64;++g)n[g]=0|(((t=n[g-2])>>>17|t<<15)^(t>>>19|t<<13)^t>>>10)+n[g-7]+m(n[g-15])+n[g-16];for(var N=0;N<64;++N){var C=f+p(c)+l(c,h,y)+o[N]+n[N]|0,w=d(r)+u(r,a,i)|0;f=y,y=h,h=c,c=s+C|0,s=i,i=a,a=r,r=C+w|0}this._a=r+this._a|0,this._b=a+this._b|0,this._c=i+this._c|0,this._d=s+this._d|0,this._e=c+this._e|0,this._f=h+this._f|0,this._g=y+this._g|0,this._h=f+this._h|0},c.prototype._hash=function(){var e=i.allocUnsafe(32);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e.writeInt32BE(this._h,28),e},e.exports=c},7946:function(e){"use strict";e.exports=d},7289:function(e){"use strict";e.exports=s},3983:function(e){"use strict";e.exports=o},4711:function(e){"use strict";e.exports=p},5039:function(e){"use strict";e.exports=m},8236:function(e){"use strict";e.exports=u},5192:function(e){"use strict";e.exports=t},1986:function(e){"use strict";e.exports=l},3783:function(e){"use strict";e.exports=r},9408:function(t){"use strict";t.exports=e},3735:function(e){"use strict";e.exports=f},2716:function(e){"use strict";e.exports=h},3485:function(e){"use strict";e.exports=n},79:function(e){"use strict";e.exports=a},9882:function(e){"use strict";e.exports=c},7480:function(e){"use strict";e.exports=i},8079:function(e){"use strict";e.exports=y},8118:function(e,t,n){e.exports=n(3778)},7445:function(e,t,n){e.exports=n(3685)}},N={};function C(e){var t=N[e];if(void 0!==t)return t.exports;var n=N[e]={exports:{}};return g[e](n,n.exports,C),n.exports}C.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return C.d(t,{a:t}),t},C.d=function(e,t){for(var n in t)C.o(t,n)&&!C.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},C.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),C.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},C.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var w={};return function(){"use strict";C.r(w),C.d(w,{ABI_VERSIONS:function(){return rr},AE_AMOUNT_FORMATS:function(){return Ue},AMOUNT:function(){return Zn},AccountBase:function(){return ic},AccountError:function(){return f},AeSdk:function(){return hl},AeSdkAepp:function(){return Jl},AeSdkBase:function(){return ml},AeSdkWallet:function(){return ru},AensError:function(){return g},AensPointerContextError:function(){return G},AeppError:function(){return N},AlreadyConnectedError:function(){return je},AmbiguousEventDefinitionError:function(){return fe},ArgumentCountMismatchError:function(){return P},ArgumentError:function(){return q},BaseError:function(){return y},BrowserRuntimeConnection:function(){return Cd},BrowserWindowMessageConnection:function(){return gd},BytecodeMismatchError:function(){return ie},CLIENT_TTL:function(){return $t},Channel:function(){return ud},ChannelCallError:function(){return Z},ChannelConnectionError:function(){return ee},ChannelError:function(){return b},ChannelPingTimedOutError:function(){return te},Compiler:function(){return il},CompilerError:function(){return v},ContractError:function(){return x},CryptographyError:function(){return S},DRY_RUN_ACCOUNT:function(){return tr},DecodeError:function(){return Te},DerivationError:function(){return ha},DryRunError:function(){return ze},DuplicateContractError:function(){return oe},DuplicateNodeError:function(){return xe},Encoding:function(){return dt},FIELD_TYPES:function(){return or},GAS_MAX:function(){return si},ID_TAG:function(){return li},ID_TAG_PREFIX:function(){return di},IllegalArgumentError:function(){return A},IllegalBidFeeError:function(){return qe},InactiveContractError:function(){return se},InsufficientBalanceError:function(){return E},InsufficientNameFeeError:function(){return K},InternalError:function(){return U},InvalidAensNameError:function(){return L},InvalidAuthDataError:function(){return ae},InvalidChecksumError:function(){return ge},InvalidKeypairError:function(){return H},InvalidMethodInvocationError:function(){return ce},InvalidPasswordError:function(){return Ne},InvalidRpcMessageError:function(){return W},InvalidSignatureError:function(){return Ae},InvalidTxError:function(){return qr},InvalidTxParamsError:function(){return Pe},MAX_AUTH_FUN_GAS:function(){return er},MESSAGE_DIRECTION:function(){return yl},METHODS:function(){return Nl},MIN_GAS_PRICE:function(){return Gt},MemoryAccount:function(){return cc},MerkleTreeHashMismatchError:function(){return Ce},MissingCallbackError:function(){return Q},MissingContractAddressError:function(){return le},MissingContractDefError:function(){return ue},MissingEventDefinitionError:function(){return ye},MissingFunctionNameError:function(){return de},MissingNodeInTreeError:function(){return we},MissingParamError:function(){return I},NAME_BID_MAX_LENGTH:function(){return Yt},NAME_BID_RANGES:function(){return Xt},NAME_BID_TIMEOUT_BLOCKS:function(){return Wt},NAME_FEE_BID_INCREMENT:function(){return Lt},NAME_FEE_MULTIPLIER:function(){return Kt},NAME_MAX_CLIENT_TTL:function(){return Ht},NAME_MAX_LENGTH_FEE:function(){return Qt},NAME_MAX_TTL:function(){return Ft},NAME_TTL:function(){return Ut},NoSerializerFoundError:function(){return k},NoSuchContractFunctionError:function(){return me},NoWalletConnectedError:function(){return De},Node:function(){return rc},NodeError:function(){return T},NodeInvocationError:function(){return pe},NodeNotFoundError:function(){return Se},NotImplementedError:function(){return D},NotPayableFunctionError:function(){return he},ORACLE_TTL:function(){return Yn},ORACLE_TTL_TYPES:function(){return Ln},POINTER_KEY_BY_PREFIX:function(){return pi},PREFIX_ID_TAG:function(){return ui},PROTOCOL_VERSIONS:function(){return ar},PROTOCOL_VM_ABI:function(){return ir},PayloadLengthError:function(){return _e},PrefixNotFoundError:function(){return Ee},QUERY_FEE:function(){return Qn},QUERY_TTL:function(){return Xn},RESPONSE_TTL:function(){return Jn},RPC_STATUS:function(){return Cl},RequestTimedOutError:function(){return O},RpcBroadcastError:function(){return xl},RpcConnectionDenyError:function(){return _l},RpcConnectionError:function(){return Ve},RpcError:function(){return bl},RpcInternalError:function(){return Al},RpcInvalidTransactionError:function(){return vl},RpcMethodNotFoundError:function(){return Pl},RpcNotAuthorizeError:function(){return zl},RpcPermissionDenyError:function(){return ql},RpcRejectedByUserError:function(){return Sl},RpcUnsupportedProtocolError:function(){return Tl},SUBSCRIPTION_TYPES:function(){return gl},SchemaNotFoundError:function(){return Ie},TX_SCHEMA:function(){return cr},TX_TTL:function(){return Wn},TX_TYPE:function(){return ci},Tag:function(){return Jt},TagNotFoundError:function(){return ke},TransactionError:function(){return _},TxNotInChainError:function(){return Oe},TxTimedOutError:function(){return M},TypeError:function(){return R},UnAuthorizedAccountError:function(){return Y},UnavailableAccountError:function(){return $},UnexpectedChannelMessageError:function(){return ne},UnexpectedTsError:function(){return F},UnknownChannelStateError:function(){return re},UnknownNodeLengthError:function(){return be},UnknownPathNibbleError:function(){return ve},UnknownRpcClientError:function(){return X},UnknownTxError:function(){return Me},UnsubscribedAccountError:function(){return J},UnsupportedABIversionError:function(){return Re},UnsupportedPlatformError:function(){return B},UnsupportedProtocolError:function(){return j},UnsupportedVMversionError:function(){return Be},UnsupportedVersionError:function(){return V},VM_VERSIONS:function(){return nr},WALLET_TYPE:function(){return fl},WalletError:function(){return z},_buildTx:function(){return ia},_getPollInterval:function(){return zr},aensBid:function(){return Ra},aensClaim:function(){return Oa},aensPreclaim:function(){return Ma},aensQuery:function(){return ka},aensRevoke:function(){return Pa},aensTransfer:function(){return Ia},aensUpdate:function(){return Ea},awaitHeight:function(){return Er},bigNumberToByteArray:function(){return Je},buildAuthTxHash:function(){return ti},buildContractId:function(){return an},buildContractIdByContractTx:function(){return vr},buildPointers:function(){return pn},buildTx:function(){return Cr},buildTxHash:function(){return br},bytesToHex:function(){return tt},calculateMinFee:function(){return oi},commitmentHash:function(){return ln},computeAuctionEndBlock:function(){return wn},computeBidFee:function(){return Cn},connectionProxy:function(){return dd},createAensDelegationSignature:function(){return Ua},createGeneralizedAccount:function(){return Za},createMetaTx:function(){return ei},createOracleDelegationSignature:function(){return Fa},createSalt:function(){return ii},decode:function(){return St},decryptKey:function(){return ma},deriveChild:function(){return ga},derivePathFromKey:function(){return Na},derivePathFromSeed:function(){return wa},dump:function(){return na},encode:function(){return Tt},encodeContractAddress:function(){return It},encodeUnsigned:function(){return Pt},encryptKey:function(){return pa},extendOracleTtl:function(){return La},formatAmount:function(){return He},formatSalt:function(){return sn},genSalt:function(){return At},generateKeyPair:function(){return Ot},generateKeyPairFromSecret:function(){return kt},generateSaveHDWalletFromSeed:function(){return xa},getAccount:function(){return Or},getAddressFromPriv:function(){return zt},getBalance:function(){return Mr},getContract:function(){return Gr},getContractByteCode:function(){return $r},getContractInstance:function(){return ja},getCurrentGeneration:function(){return Rr},getDefaultPointerKey:function(){return gn},getGeneration:function(){return Br},getHdWalletAccountFromSeed:function(){return Ta},getHeight:function(){return Ar},getKeyBlock:function(){return Dr},getKeyPair:function(){return va},getMasterKeyFromSeed:function(){return Ca},getMicroBlockHeader:function(){return Vr},getMicroBlockTransactions:function(){return jr},getMinimumNameFee:function(){return Nn},getName:function(){return Kr},getOracleObject:function(){return Qa},getQueryObject:function(){return Ga},getSaveHDWalletAccounts:function(){return Sa},getVmVersion:function(){return ra},hash:function(){return Et},height:function(){return ri},hexToBytes:function(){return nt},isAddressValid:function(){return qt},isAuctionName:function(){return bn},isGA:function(){return Ja},isNameValid:function(){return yn},isValidKeypair:function(){return Vt},messageToHash:function(){return Bt},oracleQueryId:function(){return on},payForTransaction:function(){return Aa},poll:function(){return Pr},pollForQueries:function(){return Ha},pollForQueryResponse:function(){return $a},postQueryToOracle:function(){return Ka},prepareTxParams:function(){return aa},produceNameId:function(){return cn},readId:function(){return nn},readInt:function(){return dn},readPointers:function(){return mn},recover:function(){return ta},registerOracle:function(){return Ya},resolveName:function(){return Lr},respondToQuery:function(){return Wa},salt:function(){return ai},send:function(){return _a},sendTransaction:function(){return kr},sha256hash:function(){return mt},sign:function(){return Mt},signMessage:function(){return jt},signUsingGA:function(){return ni},spend:function(){return za},str2buf:function(){return et},toAe:function(){return $e},toAettos:function(){return Ge},toBytes:function(){return Ze},transferFunds:function(){return qa},txDryRun:function(){return Hr},unpackRawTx:function(){return Nr},unpackTx:function(){return wr},validateParams:function(){return gr},verify:function(){return Rt},verifyMessage:function(){return Dt},verifyTransaction:function(){return _r},waitForTxConfirm:function(){return Ir},walletDetector:function(){return Nd},writeId:function(){return tn},writeInt:function(){return un}});var e={};C.r(e),C.d(e,{InvalidTxError:function(){return qr},_getPollInterval:function(){return zr},awaitHeight:function(){return Er},getAccount:function(){return Or},getBalance:function(){return Mr},getContract:function(){return Gr},getContractByteCode:function(){return $r},getCurrentGeneration:function(){return Rr},getGeneration:function(){return Br},getHeight:function(){return Ar},getKeyBlock:function(){return Dr},getMicroBlockHeader:function(){return Vr},getMicroBlockTransactions:function(){return jr},getName:function(){return Kr},poll:function(){return Pr},resolveName:function(){return Lr},sendTransaction:function(){return kr},txDryRun:function(){return Hr},waitForTxConfirm:function(){return Ir}});var t={};C.r(t),C.d(t,{_buildTx:function(){return ia},getVmVersion:function(){return ra},prepareTxParams:function(){return aa}});var n={};C.r(n),C.d(n,{payForTransaction:function(){return Aa},send:function(){return _a},spend:function(){return za},transferFunds:function(){return qa}});var r={};C.r(r),C.d(r,{aensBid:function(){return Ra},aensClaim:function(){return Oa},aensPreclaim:function(){return Ma},aensQuery:function(){return ka},aensRevoke:function(){return Pa},aensTransfer:function(){return Ia},aensUpdate:function(){return Ea}});var a={};C.r(a),C.d(a,{createAensDelegationSignature:function(){return Ua},createOracleDelegationSignature:function(){return Fa},getContractInstance:function(){return ja}});var i={};C.r(i),C.d(i,{extendOracleTtl:function(){return La},getOracleObject:function(){return Qa},getQueryObject:function(){return Ga},pollForQueries:function(){return Ha},pollForQueryResponse:function(){return $a},postQueryToOracle:function(){return Ka},registerOracle:function(){return Ya},respondToQuery:function(){return Wa}});var o={};C.r(o),C.d(o,{buildAuthTxHash:function(){return ti},createGeneralizedAccount:function(){return Za},createMetaTx:function(){return ei},isGA:function(){return Ja}});var s={};C.r(s),C.d(s,{height:function(){return ri},signUsingGA:function(){return ni}});var c={};C.r(c),C.d(c,{Account:function(){return Bi},ByteCode:function(){return Zi},Channel:function(){return io},ChannelCloseMutualTx:function(){return zo},ChannelCloseSoloTx:function(){return qo},ChannelCreateTx:function(){return xo},ChannelDepositTx:function(){return So},ChannelForceProgressTx:function(){return _o},ChannelSetDelegatesTx:function(){return Io},ChannelSettleTx:function(){return Po},ChannelSlashTx:function(){return Ao},ChannelSnapshotSoloTx:function(){return Eo},ChannelWithdrawTx:function(){return To},CheckTxInPoolResponse:function(){return Ko},CommitmentId:function(){return bo},ContractCallObject:function(){return Ki},ContractCallTx:function(){return Vo},ContractCreateTx:function(){return Do},ContractObject:function(){return Ji},CountResponse:function(){return Mi},CreateContractUnsignedTx:function(){return Jo},Delegates:function(){return Pi},DryRunAccount:function(){return Vi},DryRunCallContext:function(){return Hi},DryRunCallReq:function(){return Fi},DryRunInput:function(){return Di},DryRunInputItem:function(){return Ui},DryRunResult:function(){return Gi},DryRunResults:function(){return $i},EncodedTx:function(){return Yi},ErrorModel:function(){return vi},Event:function(){return Li},GAAttachTx:function(){return Ho},GAMetaTx:function(){return $o},GAObject:function(){return Qi},Generation:function(){return Ri},HashResponse:function(){return Si},Header:function(){return bi},HeightResponse:function(){return Ti},KeyBlock:function(){return xi},MicroBlockHeader:function(){return _i},NameClaimTx:function(){return go},NameEntry:function(){return ao},NameHash:function(){return vo},NamePointer:function(){return Oi},NamePreclaimTx:function(){return fo},NameRevokeTx:function(){return wo},NameTransferTx:function(){return Co},NameUpdateTx:function(){return No},NextNonceResponse:function(){return ji},OffChainCallContract:function(){return Xo},OffChainDeposit:function(){return Qo},OffChainNewContract:function(){return Yo},OffChainTransfer:function(){return Lo},OffChainUpdate:function(){return Ei},OffChainWithdrawal:function(){return Wo},OracleExtendTx:function(){return mo},OracleQueries:function(){return no},OracleQuery:function(){return ro},OracleQueryTx:function(){return ho},OracleRegisterTx:function(){return po},OracleRespondTx:function(){return yo},PayingForTx:function(){return Go},PeerConnections:function(){return lo},PeerCount:function(){return Ro},PeerCountAvailable:function(){return jo},PeerCountConnected:function(){return Bo},PeerDetails:function(){return Oo},PeerPubKey:function(){return oo},Peers:function(){return Mo},PoI:function(){return eo},PostTxResponse:function(){return Xi},Protocol:function(){return co},PubKey:function(){return ko},RegisteredOracle:function(){return to},RelativeTTL:function(){return Ii},SignedTx:function(){return qi},SignedTxs:function(){return zi},SpendTx:function(){return uo},Status:function(){return so},TokenSupply:function(){return Fo},Ttl:function(){return ki},Tx:function(){return Ai},TxInfoObject:function(){return Wi},UnsignedTx:function(){return Uo},discriminators:function(){return Zo}});var l={};C.r(l),C.d(l,{APIVersion:function(){return yc},Aci:function(){return dc},ByteCode:function(){return fc},ByteCodeInput:function(){return gc},BytecodeCallResultInput:function(){return wc},Calldata:function(){return qc},CompileOpts:function(){return uc},CompilerError:function(){return pc},CompilerVersion:function(){return Nc},Contract:function(){return lc},DecodeCalldataBytecode:function(){return vc},DecodeCalldataSource:function(){return Sc},DecodedCalldata:function(){return xc},DecodedCallresult:function(){return bc},ErrorModel:function(){return hc},ErrorPos:function(){return mc},FateAssembler:function(){return Ac},FunctionCallInput:function(){return zc},SophiaBinaryData:function(){return Tc},SophiaCallResultInput:function(){return Cc},SophiaJsonData:function(){return _c},ValidateByteCodeInput:function(){return Pc}});var u=C(5192),d=C.n(u),p=C(8118),m=C.n(p);const h=e=>e.integerValue(d().ROUND_CEIL);class y extends Error{constructor(e){super(e),this.name="BaseError"}}class f extends y{constructor(e){super(e),this.name="AccountError"}}class g extends y{constructor(e){super(e),this.name="AensError"}}class N extends y{constructor(e){super(e),this.name="AeppError"}}class b extends y{constructor(e){super(e),this.name="ChannelError"}}class v extends y{constructor(e){super(e),this.name="CompilerError"}}class x extends y{constructor(e){super(e),this.name="ContractError"}}class S extends y{constructor(e){super(e),this.name="CryptographyError"}}class T extends y{constructor(e){super(e),this.name="NodeError"}}class _ extends y{constructor(e){super(e),this.name="TransactionError"}}class z extends y{constructor(e){super(e),this.name="WalletError"}}class q extends y{constructor(e,t,n){super(`${e} should be ${t}, got ${String(n)} instead`),this.name="ArgumentError"}}class A extends S{constructor(e){super(e),this.name="IllegalArgumentError"}}class P extends y{constructor(e,t,n){super(`${e} expects ${t} arguments, got ${n} instead`),this.name="ArgumentCountMismatchError"}}class E extends y{constructor(e){super(e),this.name="InsufficientBalanceError"}}class I extends y{constructor(e){super(e),this.name="MissingParamError"}}class k extends y{constructor(){super("Byte serialization not supported"),this.name="NoSerializerFoundError"}}class O extends y{constructor(e){super(`Giving up at height ${e}`),this.name="RequestTimedOutError"}}class M extends y{constructor(e,t){super([`Giving up after ${e} blocks mined`,`transaction hash: ${t}`].join(", ")),this.name="TxTimedOutError"}}class R extends y{constructor(e){super(e),this.name="TypeError"}}class B extends y{constructor(e){super(e),this.name="UnsupportedPlatformError"}}class j extends y{constructor(e){super(e),this.name="UnsupportedProtocolError"}}class D extends y{constructor(e){super(e),this.name="NotImplementedError"}}class V extends y{constructor(e,t,n,r){super(`Unsupported ${e} version ${t}. Supported: >= ${n} < ${r}`),this.name="UnsupportedVersionError"}}class U extends y{constructor(e){super(e),this.name="InternalError"}}class F extends U{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Expected to not happen, required for TS"),this.name="UnexpectedTsError"}}class H extends f{constructor(e){super(e),this.name="InvalidKeypairError"}}class $ extends f{constructor(e){super(`Account for ${e} not available`),this.name="UnavailableAccountError"}}class G extends g{constructor(e,t){super(`Name ${e} don't have pointers for ${t}`),this.name="AensPointerContextError"}}class K extends g{constructor(e,t){super(`the provided fee ${e.toString()} is not enough to execute the claim, required: ${t.toString()}`),this.name="InsufficientNameFeeError"}}class L extends g{constructor(e){super(e),this.name="InvalidAensNameError"}}class W extends N{constructor(e){super(`Received invalid message: ${e}`),this.name="InvalidRpcMessageError"}}class Q extends N{constructor(e){super(`Can't find callback for this messageId ${e}`),this.name="MissingCallbackError"}}class Y extends N{constructor(e){super(`You do not have access to account ${e}`),this.name="UnAuthorizedAccountError"}}class X extends N{constructor(e){super(`RpcClient with id ${e} do not exist`),this.name="UnknownRpcClientError"}}class J extends N{constructor(){super("You are not subscribed for an account."),this.name="UnsubscribedAccountError"}}class Z extends b{constructor(e){super(e),this.name="ChannelCallError"}}class ee extends b{constructor(e){super(e),this.name="ChannelConnectionError"}}class te extends b{constructor(){super("Server pong timed out"),this.name="ChannelPingTimedOutError"}}class ne extends b{constructor(e){super(e),this.name="UnexpectedChannelMessageError"}}class re extends b{constructor(){super("State Channels FSM entered unknown state"),this.name="UnknownChannelStateError"}}class ae extends v{constructor(e){super(e),this.name="InvalidAuthDataError"}}class ie extends x{constructor(e){super(`Contract ${e} do not correspond to the bytecode deployed on the chain`),this.name="BytecodeMismatchError"}}class oe extends x{constructor(){super("Contract already deployed"),this.name="DuplicateContractError"}}class se extends x{constructor(e){super(`Contract with address ${e} not active`),this.name="InactiveContractError"}}class ce extends x{constructor(e){super(e),this.name="InvalidMethodInvocationError"}}class le extends x{constructor(e){super(e),this.name="MissingContractAddressError"}}class ue extends x{constructor(){super("Either ACI or source code is required"),this.name="MissingContractDefError"}}class de extends x{constructor(){super("Function name is required"),this.name="MissingFunctionNameError"}}class pe extends x{constructor(e,t){super("Invocation failed"+(null==e?"":`: "${e}"`)),this.name="NodeInvocationError",this.transaction=t}}class me extends x{constructor(e){super(`Function ${e} doesn't exist in contract`),this.name="NoSuchContractFunctionError"}}class he extends x{constructor(e,t){super(`You try to pay "${e}" to function "${t}" which is not payable. Only payable function can accept coins`),this.name="NotPayableFunctionError"}}class ye extends x{constructor(e,t){super(`Can't find definition of ${e} event emitted by ${t} (use omitUnknown option to ignore events like this)`),this.name="MissingEventDefinitionError"}}class fe extends x{constructor(e,t){super(`Found multiple definitions of "${t[0][1]}" event emitted by ${e} in ${t.map((e=>{let[t]=e;return`"${t}"`})).join(", ")} contracts (use contractAddressToName option to specify contract name corresponding to address)`),this.name="AmbiguousEventDefinitionError"}}class ge extends S{constructor(){super("Invalid checksum"),this.name="InvalidChecksumError"}}class Ne extends S{constructor(){super("Invalid password or nonce"),this.name="InvalidPasswordError"}}class Ce extends S{constructor(){super("Node hash is not equal to provided one"),this.name="MerkleTreeHashMismatchError"}}class we extends S{constructor(e){super(e),this.name="MissingNodeInTreeError"}}class be extends S{constructor(e){super(`Unknown node length: ${e}`),this.name="UnknownNodeLengthError"}}class ve extends S{constructor(e){super(`Unknown path nibble: ${e}`),this.name="UnknownPathNibbleError"}}class xe extends T{constructor(e){super(`Node with name ${e} already exist`),this.name="DuplicateNodeError"}}class Se extends T{constructor(e){super(e),this.name="NodeNotFoundError"}}class Te extends _{constructor(e){super(e),this.name="DecodeError"}}class _e extends _{constructor(e){super(e),this.name="PayloadLengthError"}}class ze extends _{constructor(e){super(e),this.name="DryRunError"}}class qe extends _{constructor(e){super(e),this.name="IllegalBidFeeError"}}class Ae extends _{constructor(e){super(e),this.name="InvalidSignatureError"}}class Pe extends _{constructor(e){super(e),this.name="InvalidTxParamsError"}}class Ee extends _{constructor(e){super(`Prefix for id-tag ${e} not found.`),this.name="PrefixNotFoundError"}}class Ie extends _{constructor(e,t,n){super(`Transaction ${e} not implemented for ${t} version ${n}`),this.name="SchemaNotFoundError"}}class ke extends _{constructor(e){super(`Id tag for prefix ${e} not found.`),this.name="DecodeError"}}class Oe extends _{constructor(e){super(`Transaction ${e} is removed from chain`),this.name="TxNotInChainError"}}class Me extends _{constructor(e){super(e),this.name="UnknownTxError"}}class Re extends _{constructor(e){super(e),this.name="UnsupportedABIversionError"}}class Be extends _{constructor(e){super(e),this.name="UnsupportedVMversionError"}}class je extends z{constructor(e){super(e),this.name="AlreadyConnectedError"}}class De extends z{constructor(e){super(e),this.name="NoWalletConnectedError"}}class Ve extends z{constructor(e){super(e),this.name="RpcConnectionError"}}let Ue;!function(e){e.AE="ae",e.MILI_AE="miliAE",e.MICRO_AE="microAE",e.NANO_AE="nanoAE",e.PICO_AE="picoAE",e.FEMTO_AE="femtoAE",e.AETTOS="aettos"}(Ue||(Ue={}));const Fe={[Ue.AE]:0,[Ue.MILI_AE]:-3,[Ue.MICRO_AE]:-6,[Ue.NANO_AE]:-9,[Ue.PICO_AE]:-12,[Ue.FEMTO_AE]:-15,[Ue.AETTOS]:-18},He=(e,t)=>{let{denomination:n=Ue.AETTOS,targetDenomination:r=Ue.AETTOS}=t;if("bigint"!=typeof(a=e)&&(!m()(i=["number","object","string"]).call(i,typeof a)||isNaN(a)&&!Number.isInteger(a)&&!d().isBigNumber(a)))throw new q("value","a number",e);var a,i;return new(d())("bigint"==typeof e?e.toString():e).shiftedBy(Fe[n]-Fe[r]).toFixed()},$e=function(e){let{denomination:t=Ue.AETTOS}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return He(e,{denomination:t,targetDenomination:Ue.AE})},Ge=function(e){let{denomination:t=Ue.AE}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return He(e,{denomination:t})};var Ke=C(79),Le=C.n(Ke),We=C(8442),Qe=C(7480);function Ye(e){return e.length%2==0&&/^[0-9a-f]+$/i.test(e)}var Xe=C(9408).Buffer;function Je(e){if(!e.isInteger())throw new R(`Unexpected not integer value: ${e.toFixed()}`);let t=e.toString(16);return t.length%2==1&&(t=`0${t}`),Xe.from(t,"hex")}function Ze(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null==e)return Xe.from([]);if(Number.isInteger(e)||d().isBigNumber(e)||t)return d().isBigNumber(e)||(e=new(d())(e)),Je(e);if("string"==typeof e)return Xe.from(e);throw new k}function et(e,t){var n;return Xe.from(e,null!==(n=null!=t?t:Ye(e)?"hex":void 0)&&void 0!==n?n:function(e){if(e.length%4>0||/[^0-9a-z+/=]/i.test(e))return!1;const t=e.indexOf("=");return-1===t||/={1,2}/.test(e.slice(t))}(e)?"base64":void 0)}const tt=e=>Xe.from(e).toString("hex"),nt=e=>Xe.from(e,"hex");var rt=C(9408).Buffer;const at=async e=>new Promise((t=>{setTimeout(t,e)})),it=(e,t)=>Object.fromEntries(Object.entries(e).map(t)),ot=(()=>{try{return rt.concat([Uint8Array.from([])]),!1}catch(e){return!0}})()?(e,t)=>rt.concat(e.map((e=>rt.from(e))),t):rt.concat;function st(e,t){return e in t}var ct=C(3783),lt=C(7499),ut=C.n(lt);let dt;!function(e){e.KeyBlockHash="kh",e.MicroBlockHash="mh",e.BlockPofHash="bf",e.BlockTxHash="bx",e.BlockStateHash="bs",e.Channel="ch",e.ContractAddress="ct",e.ContractBytearray="cb",e.ContractStoreKey="ck",e.ContractStoreValue="cv",e.Transaction="tx",e.TxHash="th",e.OracleAddress="ok",e.OracleQuery="ov",e.OracleQueryId="oq",e.OracleResponse="or",e.AccountAddress="ak",e.Signature="sg",e.Commitment="cm",e.PeerPubkey="pp",e.Name="nm",e.State="st",e.Poi="pi",e.StateTrees="ss",e.CallStateTree="cs",e.Bytearray="ba"}(dt||(dt={}));var pt=C(9408).Buffer;function mt(e){return(new(ut())).update(e).digest()}const ht=[dt.ContractBytearray,dt.ContractStoreKey,dt.ContractStoreValue,dt.Transaction,dt.OracleQuery,dt.OracleResponse,dt.State,dt.Poi,dt.StateTrees,dt.CallStateTree,dt.Bytearray],yt=[dt.KeyBlockHash,dt.MicroBlockHash,dt.BlockPofHash,dt.BlockTxHash,dt.BlockStateHash,dt.Channel,dt.ContractAddress,dt.TxHash,dt.OracleAddress,dt.OracleQueryId,dt.AccountAddress,dt.Signature,dt.Commitment,dt.PeerPubkey,dt.Name],ft={[dt.KeyBlockHash]:32,[dt.MicroBlockHash]:32,[dt.BlockPofHash]:32,[dt.BlockTxHash]:32,[dt.BlockStateHash]:32,[dt.Channel]:32,[dt.ContractAddress]:32,[dt.TxHash]:32,[dt.OracleAddress]:32,[dt.OracleQueryId]:32,[dt.AccountAddress]:32,[dt.Signature]:64,[dt.Commitment]:32,[dt.PeerPubkey]:32,[dt.State]:32};function gt(e,t){if(!st(t,ft))return;const n=ft[t];if(null!=n&&e.length!==n)throw new _e(`Payload should be ${n} bytes, got ${e.length} instead`)}const Nt=e=>mt(mt(e)).slice(0,4),Ct=e=>ot([e,Nt(e)]);function wt(e){const t=e.slice(0,-4);if(!Nt(t).equals(e.slice(-4)))throw new ge;return t}const bt={encode:e=>Ct(e).toString("base64"),decode:e=>wt(pt.from(e,"base64"))},vt={encode:e=>(0,ct.encode)(Ct(e)),decode:e=>wt(pt.from((0,ct.decode)(e)))},xt=e=>{const t=ht.find((t=>t===e));if(null!=t)return[t,bt];const n=yt.find((t=>t===e));if(null!=n)return[n,vt];throw new q("prefix",`one of ${[...yt,...ht].join(", ")}`,e)};function St(e){const[t,n,r]=e.split("_");if(null==n)throw new Te(`Encoded string missing payload: ${e}`);if(null!=r)throw new Te(`Encoded string have extra parts: ${e}`);const[a,i]=xt(t),o=i.decode(n);return gt(o,a),o}function Tt(e,t){const[,n]=xt(t);return gt(e,t),`${t}_${n.encode(e)}`}var _t=C(9408).Buffer;function zt(e){const t="string"==typeof e?et(e):e;return Tt(Le().sign.keyPair.fromSecretKey(t).publicKey,dt.AccountAddress)}function qt(e){arguments.length>1&&void 0!==arguments[1]||dt.AccountAddress;try{return St(e),!0}catch(e){return!1}}function At(){return Math.floor(Math.random()*Math.floor(Number.MAX_SAFE_INTEGER))}function Pt(e){const t=_t.allocUnsafe(4);return t.writeUInt32BE(e),t.slice(t.findIndex((e=>0!==e)))}function Et(e){return _t.from((0,We.blake2b)(e,void 0,32))}function It(e,t){const n=St(e);return Tt(Et(ot([n,Pt(t)])),dt.ContractAddress)}function kt(e){return Le().sign.keyPair.fromSecretKey(e)}function Ot(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=Le().sign.keyPair(),n=_t.from(t.publicKey),r=_t.from(t.secretKey);return e?{publicKey:n,secretKey:r}:{publicKey:Tt(n,dt.AccountAddress),secretKey:r.toString("hex")}}function Mt(e,t){return Le().sign.detached(_t.from(e),_t.from(t))}function Rt(e,t,n){const r="string"==typeof n?et(n):n;return Le().sign.detached.verify(e,t,r)}function Bt(e){const t=_t.from("aeternity Signed Message:\n","utf8"),n=_t.from(e,"utf8");return Et(ot([(0,Qe.encode)(t.length),t,(0,Qe.encode)(n.length),n]))}function jt(e,t){return Mt(Bt(e),t)}function Dt(e,t,n){return Rt(Bt(e),t,n)}function Vt(e,t){const n=_t.from("TheMessage");return Rt(n,Mt(n,e),t)}const Ut=18e4,Ft=36e3,Ht=84600,$t=Ht,Gt=1e9,Kt=1e14,Lt=.05,Wt=480,Qt=31,Yt=12,Xt=it({31:3,30:5,29:8,28:13,27:21,26:34,25:55,24:89,23:144,22:233,21:377,20:610,19:987,18:1597,17:2584,16:4181,15:6765,14:10946,13:17711,12:28657,11:46368,10:75025,9:121393,8:196418,7:317811,6:514229,5:832040,4:1346269,3:2178309,2:3524578,1:5702887},(e=>{let[t,n]=e;return[t,new(d())(n).times(Kt)]}));let Jt;!function(e){e[e.Account=10]="Account",e[e.SignedTx=11]="SignedTx",e[e.SpendTx=12]="SpendTx",e[e.OracleRegisterTx=22]="OracleRegisterTx",e[e.OracleQueryTx=23]="OracleQueryTx",e[e.OracleResponseTx=24]="OracleResponseTx",e[e.OracleExtendTx=25]="OracleExtendTx",e[e.NameClaimTx=32]="NameClaimTx",e[e.NamePreclaimTx=33]="NamePreclaimTx",e[e.NameUpdateTx=34]="NameUpdateTx",e[e.NameRevokeTx=35]="NameRevokeTx",e[e.NameTransferTx=36]="NameTransferTx",e[e.Contract=40]="Contract",e[e.ContractCall=41]="ContractCall",e[e.ContractCreateTx=42]="ContractCreateTx",e[e.ContractCallTx=43]="ContractCallTx",e[e.ChannelCreateTx=50]="ChannelCreateTx",e[e.ChannelDepositTx=51]="ChannelDepositTx",e[e.ChannelWithdrawTx=52]="ChannelWithdrawTx",e[e.ChannelForceProgressTx=521]="ChannelForceProgressTx",e[e.ChannelCloseMutualTx=53]="ChannelCloseMutualTx",e[e.ChannelCloseSoloTx=54]="ChannelCloseSoloTx",e[e.ChannelSlashTx=55]="ChannelSlashTx",e[e.ChannelSettleTx=56]="ChannelSettleTx",e[e.ChannelOffChainTx=57]="ChannelOffChainTx",e[e.ChannelOffChainUpdateTransfer=570]="ChannelOffChainUpdateTransfer",e[e.ChannelOffChainUpdateDeposit=571]="ChannelOffChainUpdateDeposit",e[e.ChannelOffChainUpdateWithdraw=572]="ChannelOffChainUpdateWithdraw",e[e.ChannelOffChainUpdateCreateContract=573]="ChannelOffChainUpdateCreateContract",e[e.ChannelOffChainUpdateCallContract=574]="ChannelOffChainUpdateCallContract",e[e.ChannelClientReconnectTx=575]="ChannelClientReconnectTx",e[e.Channel=58]="Channel",e[e.ChannelSnapshotSoloTx=59]="ChannelSnapshotSoloTx",e[e.TreesPoi=60]="TreesPoi",e[e.StateTrees=62]="StateTrees",e[e.Mtree=63]="Mtree",e[e.MtreeValue=64]="MtreeValue",e[e.ContractsMtree=621]="ContractsMtree",e[e.CallsMtree=622]="CallsMtree",e[e.ChannelsMtree=623]="ChannelsMtree",e[e.NameserviceMtree=624]="NameserviceMtree",e[e.OraclesMtree=625]="OraclesMtree",e[e.AccountsMtree=626]="AccountsMtree",e[e.CompilerSophia=70]="CompilerSophia",e[e.GaAttachTx=80]="GaAttachTx",e[e.GaMetaTx=81]="GaMetaTx",e[e.PayingForTx=82]="PayingForTx"}(Jt||(Jt={}));var Zt=C(9408).Buffer;const en=[dt.AccountAddress,dt.Name,dt.Commitment,dt.OracleAddress,dt.ContractAddress,dt.Channel];function tn(e){if("string"!=typeof e)throw new q("hashId","a string",e);const t=e.slice(0,2);if(n=t,r=en,!m()(r).call(r,n))throw new ke(t);var n,r;const a=en.indexOf(t)+1;return Zt.from([...Ze(a),...St(e)])}function nn(e){const t=Zt.from(e).readUIntBE(0,1),n=en[t-1];if(null==n)throw new Ee(t);return Tt(e.slice(1,e.length),n)}var rn=C(9408).Buffer;function an(e,t){return Tt(Et(rn.from([...St(e),...Ze(t)])),dt.ContractAddress)}function on(e,t,n){return Tt(Et(rn.from([...St(e),...function(e){const t=Ze(e,!0);return ot([rn.alloc(32-t.length),t])}(t),...St(n)])),dt.OracleQueryId)}function sn(e){return rn.from(e.toString(16).padStart(64,"0"),"hex")}function cn(e){return Tt(Et(e.toLowerCase()),dt.Name)}function ln(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:At();return Tt(Et(ot([rn.from(e.toLowerCase()),sn(t)])),dt.Commitment)}function un(e){return Ze(e,!0)}function dn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rn.from([]);return new(d())(rn.from(e).toString("hex"),16).toString(10)}function pn(e){return e.map((e=>[Ze(e.key),tn(e.id)]))}function mn(e){return e.map((e=>{let[t,n]=e;return{key:t.toString(),id:nn(n)}}))}const hn=".chain";function yn(e){return e.endsWith(hn)}const fn=[[dt.AccountAddress,"account_pubkey"],[dt.OracleAddress,"oracle_pubkey"],[dt.ContractAddress,"contract_pubkey"],[dt.Channel,"channel"]];function gn(e){var t;St(e);const n=e.substring(0,2),r=null===(t=fn.find((e=>{let[t]=e;return t===n})))||void 0===t?void 0:t[1];if(null!=r)return r;throw new q("identifier",`prefixed with one of ${fn.map((e=>{let[t]=e;return`${t}_`})).join(", ")}`,e)}function Nn(e){const t=e.length-hn.length;return Xt[Math.min(t,Qt)]}function Cn(e){let{startFee:t,increment:n=Lt}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Number(n)!==n||n%1==0)throw new qe(`Increment must be float. Current increment ${n}`);if(n<Lt)throw new qe(`minimum increment percentage is ${Lt}`);return h(new(d())(null!=t?t:Nn(e)).times(new(d())(Lt).plus(1)))}function wn(e,t){const n=e.length-hn.length;return(n<=4&&62*Wt||n<=8&&31*Wt||n<=12&&Wt||0)+t}function bn(e){return e.length<13+hn.length}var vn={serialize(e){if(e<0)throw new q("value","greater or equal to 0",e);return un(e)},deserialize:e=>dn(e)},xn={serialize:e=>vn.serialize(e),deserialize:e=>+vn.deserialize(e)},Sn={...vn,serializeAettos(e){if(null==e)throw new q("value","provided",e);return e},serializeOptional(e,t){let{denomination:n,...r}=t;return vn.serialize(this.serializeAettos(null!=e?He(e,{denomination:n}):e,r))},serialize(e,t){return this.serializeOptional(e,t)}},Tn={...Sn,serialize(e,t){var n;if(null!==(n=e)&&void 0!==n||(e=0),0!=+e)throw new A(`Contract deposit is not refundable, so it should be equal 0, got ${e.toString()} instead`);return Sn.serialize(e,t)}};function _n(e,t){const n={[Jt.OracleRegisterTx]:"oracleTtlValue",[Jt.OracleExtendTx]:"oracleTtlValue",[Jt.OracleQueryTx]:"queryTtlValue",[Jt.OracleResponseTx]:"responseTtlValue"};return st(t,n)?e[n[t]]:1}function zn(e,t){var n;const{rlpEncoded:{length:r},txObject:a}=t;return(e=>{var t;const n=null!==(t={[Jt.ChannelForceProgressTx]:30,[Jt.ChannelOffChainTx]:0,[Jt.ChannelOffChainUpdateCallContract]:0,[Jt.ChannelOffChainUpdateCreateContract]:0,[Jt.ChannelOffChainUpdateDeposit]:0,[Jt.ChannelOffChainUpdateWithdraw]:0,[Jt.ChannelOffChainUpdateTransfer]:0,[Jt.ContractCreateTx]:5,[Jt.ContractCallTx]:12,[Jt.GaAttachTx]:5,[Jt.GaMetaTx]:5,[Jt.PayingForTx]:.2}[e])&&void 0!==t?t:1;return new(d())(15e3*n)})(e).plus(((e,t,n)=>{let{relativeTtl:r,innerTxSize:a}=n;switch(e){case Jt.OracleRegisterTx:case Jt.OracleExtendTx:case Jt.OracleQueryTx:case Jt.OracleResponseTx:return new(d())(t).times(20).plus(Math.ceil(32e3*r/Math.floor(175200)));case Jt.GaMetaTx:case Jt.PayingForTx:return new(d())(t).minus(a).times(20);default:return new(d())(t).times(20)}})(e,r,{relativeTtl:_n(a,e),innerTxSize:m()(n=[Jt.GaMetaTx,Jt.PayingForTx]).call(n,e)?a.tx.tx.encodedTx.rlpEncoded.length:0})).times(Gt)}function qn(e,t){let n,r=new(d())(0);do{n=r,r=zn(e,t(r))}while(!r.eq(n));return r}var An={...Sn,serializeAettos(e,t){let{txType:n,rebuildTx:r,_computingMinFee:a}=t;if(null!=a)return a;const i=qn(n,(e=>r({_computingMinFee:e}))),o=new(d())(null!=e?e:i);if(i.gt(o))throw new A(`Fee ${o.toString()} must be bigger then ${i}`);return o.toFixed()},serialize:Sn.serializeOptional},Pn={...xn,serialize(e,t){let{txType:n,rebuildTx:r,gasMax:a=6e6,_computingGasLimit:i}=t;if(null!=i)return xn.serialize(i);const o=function(e,t,n){return t-+zn(e,n(t)).dividedBy(Gt)}(n,a,(e=>r({_computingGasLimit:e}))),s=null!=e?e:o;if(s>o)throw new A(`Gas limit ${s} must be less or equal to ${o}`);return xn.serialize(s)}},En={...Sn,serializeAettos(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gt.toString();if(+e<Gt)throw new A(`Gas price ${e.toString()} must be bigger then ${Gt}`);return e},serialize:Sn.serializeOptional},In=C(9408).Buffer,kn=e=>In.from(e),On=e=>e.toString(),Mn={serialize:e=>kn(e),deserialize:e=>On(e)},Rn={...Sn,serializeAettos(e,t){const n=Nn(t.name),r=new(d())(null!=e?e:n);if(n.gt(r))throw new K(r,n);return r.toFixed()},serialize(e,t){return Sn.serializeOptional.call(this,e,t)}};const Bn=vn,jn=xn,Dn=Sn,Vn=Tn,Un=An,Fn=Pn,Hn=En,$n=Mn,Gn=Rn,Kn={serialize:e=>tn(yn(e)?cn(e):e),deserialize:e=>nn(e)};let Ln;!function(e){e[e.delta=0]="delta",e[e.block=1]="block"}(Ln||(Ln={}));const Wn=0,Qn=3e4,Yn={type:Ln.delta,value:500},Xn={type:Ln.delta,value:10},Jn={type:Ln.delta,value:10},Zn=0,er=5e4,tr={pub:"ak_11111111111111111111111111111111273Yts",amount:100000000000000000000000000000000000n};let nr,rr,ar;!function(e){e[e.NO_VM=0]="NO_VM",e[e.SOPHIA=1]="SOPHIA",e[e.SOPHIA_IMPROVEMENTS_MINERVA=3]="SOPHIA_IMPROVEMENTS_MINERVA",e[e.SOPHIA_IMPROVEMENTS_FORTUNA=4]="SOPHIA_IMPROVEMENTS_FORTUNA",e[e.FATE=5]="FATE",e[e.SOPHIA_IMPROVEMENTS_LIMA=6]="SOPHIA_IMPROVEMENTS_LIMA",e[e.FATE_2=7]="FATE_2"}(nr||(nr={})),function(e){e[e.NO_ABI=0]="NO_ABI",e[e.SOPHIA=1]="SOPHIA",e[e.FATE=3]="FATE"}(rr||(rr={})),function(e){e[e.IRIS=5]="IRIS"}(ar||(ar={}));const ir={[ar.IRIS]:{[Jt.ContractCreateTx]:{vmVersion:[nr.FATE_2],abiVersion:[rr.FATE]},[Jt.ContractCallTx]:{vmVersion:[],abiVersion:[rr.FATE,rr.SOPHIA]},[Jt.OracleRegisterTx]:{vmVersion:[],abiVersion:[rr.NO_ABI,rr.SOPHIA]}}};let or;!function(e){e[e.id=0]="id",e[e.ids=1]="ids",e[e.string=2]="string",e[e.binary=3]="binary",e[e.bool=4]="bool",e[e.hex=5]="hex",e[e.rlpBinary=6]="rlpBinary",e[e.rlpBinaries=7]="rlpBinaries",e[e.rawBinary=8]="rawBinary",e[e.signatures=9]="signatures",e[e.pointers=10]="pointers",e[e.offChainUpdates=11]="offChainUpdates",e[e.callStack=12]="callStack",e[e.proofOfInclusion=13]="proofOfInclusion",e[e.mptrees=14]="mptrees",e[e.callReturnType=15]="callReturnType",e[e.ctVersion=16]="ctVersion",e[e.abiVersion=17]="abiVersion",e[e.ttlType=18]="ttlType",e[e.sophiaCodeTypeInfo=19]="sophiaCodeTypeInfo",e[e.payload=20]="payload",e[e.stateTree=21]="stateTree"}(or||(or={}));const sr=[["tag",jn],["VSN",jn]],cr={[Jt.Account]:{1:[...sr,["nonce",jn],["balance",Bn]],2:[...sr,["flags",Bn],["nonce",jn],["balance",Bn],["gaContract",or.id,[dt.ContractAddress,dt.Name]],["gaAuthFun",or.binary,dt.ContractBytearray]]},[Jt.SignedTx]:{1:[...sr,["signatures",or.signatures],["encodedTx",or.rlpBinary]]},[Jt.SpendTx]:{1:[...sr,["senderId",or.id,dt.AccountAddress],["recipientId",or.id,[dt.AccountAddress,dt.Name]],["amount",Dn],["fee",Un],["ttl",jn],["nonce",jn],["payload",or.payload]]},[Jt.NamePreclaimTx]:{1:[...sr,["accountId",or.id,dt.AccountAddress],["nonce",jn],["commitmentId",or.id,dt.Commitment],["fee",Un],["ttl",jn]]},[Jt.NameClaimTx]:{2:[...sr,["accountId",or.id,dt.AccountAddress],["nonce",jn],["name",$n],["nameSalt",Bn],["nameFee",Gn],["fee",Un],["ttl",jn]]},[Jt.NameUpdateTx]:{1:[...sr,["accountId",or.id,dt.AccountAddress],["nonce",jn],["nameId",Kn],["nameTtl",Bn],["pointers",or.pointers],["clientTtl",jn],["fee",Un],["ttl",jn]]},[Jt.NameTransferTx]:{1:[...sr,["accountId",or.id,dt.AccountAddress],["nonce",jn],["nameId",Kn],["recipientId",or.id,[dt.AccountAddress,dt.Name]],["fee",Un],["ttl",jn]]},[Jt.NameRevokeTx]:{1:[...sr,["accountId",or.id,dt.AccountAddress],["nonce",jn],["nameId",Kn],["fee",Un],["ttl",jn]]},[Jt.Contract]:{1:[...sr,["owner",or.id,dt.AccountAddress],["ctVersion",or.ctVersion],["code",or.binary,dt.ContractBytearray],["log",or.binary,dt.ContractBytearray],["active",or.bool],["referers",or.ids,dt.AccountAddress],["deposit",Vn]]},[Jt.ContractCreateTx]:{1:[...sr,["ownerId",or.id,dt.AccountAddress],["nonce",jn],["code",or.binary,dt.ContractBytearray],["ctVersion",or.ctVersion],["fee",Un],["ttl",jn],["deposit",Vn],["amount",Dn],["gasLimit",Fn],["gasPrice",Hn],["callData",or.binary,dt.ContractBytearray]]},[Jt.ContractCallTx]:{1:[...sr,["callerId",or.id,dt.AccountAddress],["nonce",jn],["contractId",or.id,[dt.ContractAddress,dt.Name]],["abiVersion",or.abiVersion],["fee",Un],["ttl",jn],["amount",Dn],["gasLimit",Fn],["gasPrice",Hn],["callData",or.binary,dt.ContractBytearray]]},[Jt.ContractCall]:{1:[...sr,["callerId",or.id,dt.AccountAddress],["callerNonce",jn],["height",jn],["contractId",or.id,dt.ContractAddress],["gasPrice",Hn],["gasUsed",jn],["returnValue",or.binary,dt.ContractBytearray],["returnType",or.callReturnType],["log",or.rawBinary]]},[Jt.OracleRegisterTx]:{1:[...sr,["accountId",or.id,dt.AccountAddress],["nonce",jn],["queryFormat",or.string],["responseFormat",or.string],["queryFee",Dn],["oracleTtlType",or.ttlType],["oracleTtlValue",jn],["fee",Un],["ttl",jn],["abiVersion",or.abiVersion]]},[Jt.OracleExtendTx]:{1:[...sr,["oracleId",or.id,[dt.OracleAddress,dt.Name]],["nonce",jn],["oracleTtlType",or.ttlType],["oracleTtlValue",jn],["fee",Un],["ttl",jn]]},[Jt.OracleQueryTx]:{1:[...sr,["senderId",or.id,dt.AccountAddress],["nonce",jn],["oracleId",or.id,[dt.OracleAddress,dt.Name]],["query",or.string],["queryFee",Dn],["queryTtlType",or.ttlType],["queryTtlValue",jn],["responseTtlType",or.ttlType],["responseTtlValue",jn],["fee",Un],["ttl",jn]]},[Jt.OracleResponseTx]:{1:[...sr,["oracleId",or.id,dt.OracleAddress],["nonce",jn],["queryId",or.binary,dt.OracleQueryId],["response",or.string],["responseTtlType",or.ttlType],["responseTtlValue",jn],["fee",Un],["ttl",jn]]},[Jt.ChannelCreateTx]:{2:[...sr,["initiator",or.id,dt.AccountAddress],["initiatorAmount",Bn],["responder",or.id,dt.AccountAddress],["responderAmount",Bn],["channelReserve",Bn],["lockPeriod",Bn],["ttl",jn],["fee",Un],["initiatorDelegateIds",or.string],["responderDelegateIds",or.string],["stateHash",or.binary,"st"],["nonce",jn]]},[Jt.ChannelCloseMutualTx]:{1:[...sr,["channelId",or.id,dt.Channel],["fromId",or.id,dt.AccountAddress],["initiatorAmountFinal",Bn],["responderAmountFinal",Bn],["ttl",jn],["fee",Un],["nonce",jn]]},[Jt.ChannelCloseSoloTx]:{1:[...sr,["channelId",or.id,dt.Channel],["fromId",or.id,dt.AccountAddress],["payload",or.binary,"tx"],["poi",or.binary,"pi"],["ttl",jn],["fee",Un],["nonce",jn]]},[Jt.ChannelSlashTx]:{1:[...sr,["channelId",or.id,dt.Channel],["fromId",or.id,dt.AccountAddress],["payload",or.binary,"tx"],["poi",or.binary,"pi"],["ttl",jn],["fee",Un],["nonce",jn]]},[Jt.ChannelDepositTx]:{1:[...sr,["channelId",or.id,dt.Channel],["fromId",or.id,dt.AccountAddress],["amount",Bn],["ttl",jn],["fee",Un],["stateHash",or.binary,"st"],["round",jn],["nonce",jn]]},[Jt.ChannelWithdrawTx]:{1:[...sr,["channelId",or.id,dt.Channel],["toId",or.id,dt.AccountAddress],["amount",Bn],["ttl",jn],["fee",Un],["stateHash",or.binary,"st"],["round",jn],["nonce",jn]]},[Jt.ChannelSettleTx]:{1:[...sr,["channelId",or.id,dt.Channel],["fromId",or.id,dt.AccountAddress],["initiatorAmountFinal",Bn],["responderAmountFinal",Bn],["ttl",jn],["fee",Un],["nonce",jn]]},[Jt.ChannelForceProgressTx]:{1:[...sr,["channelId",or.id,dt.Channel],["fromId",or.id,dt.AccountAddress],["payload",or.binary,"tx"],["round",jn],["update",or.binary,dt.ContractBytearray],["stateHash",or.binary,"st"],["offChainTrees",or.stateTree],["ttl",jn],["fee",Un],["nonce",jn]]},[Jt.ChannelOffChainTx]:{2:[...sr,["channelId",or.id,dt.Channel],["round",jn],["stateHash",or.binary,"st"]]},[Jt.Channel]:{3:[...sr,["initiator",or.id,dt.AccountAddress],["responder",or.id,dt.AccountAddress],["channelAmount",Bn],["initiatorAmount",Bn],["responderAmount",Bn],["channelReserve",Bn],["initiatorDelegateIds",or.ids],["responderDelegateIds",or.ids],["stateHash",or.hex],["round",jn],["soloRound",Bn],["lockPeriod",Bn],["lockedUntil",Bn],["initiatorAuth",or.binary,dt.ContractBytearray],["responderAuth",or.binary,dt.ContractBytearray]]},[Jt.ChannelSnapshotSoloTx]:{1:[...sr,["channelId",or.id,dt.Channel],["fromId",or.id,dt.AccountAddress],["payload",or.binary,"tx"],["ttl",jn],["fee",Un],["nonce",jn]]},[Jt.ChannelOffChainUpdateTransfer]:{1:[...sr,["from",or.id,dt.AccountAddress],["to",or.id,dt.AccountAddress],["amount",Bn]]},[Jt.ChannelOffChainUpdateDeposit]:{1:[...sr,["from",or.id,dt.AccountAddress],["amount",Bn]]},[Jt.ChannelOffChainUpdateWithdraw]:{1:[...sr,["from",or.id,dt.AccountAddress],["amount",Bn]]},[Jt.ChannelOffChainUpdateCreateContract]:{1:[...sr,["owner",or.id,dt.AccountAddress],["ctVersion",or.ctVersion],["code",or.binary,dt.ContractBytearray],["deposit",Bn],["callData",or.binary,dt.ContractBytearray]]},[Jt.ChannelOffChainUpdateCallContract]:{1:[...sr,["caller",or.id,dt.AccountAddress],["contract",or.id,dt.ContractAddress],["abiVersion",or.abiVersion],["amount",Bn],["callData",or.binary,dt.ContractBytearray],["callStack",or.callStack],["gasPrice",Hn],["gasLimit",Fn]]},[Jt.ChannelClientReconnectTx]:{1:[...sr,["channelId",or.id,dt.Channel],["round",jn],["role",or.string],["pubkey",or.id,dt.AccountAddress]]},[Jt.TreesPoi]:{1:[...sr,["accounts",or.mptrees],["calls",or.mptrees],["channels",or.mptrees],["contracts",or.mptrees],["ns",or.mptrees],["oracles",or.mptrees]]},[Jt.StateTrees]:{1:[...sr,["contracts",or.rlpBinary],["calls",or.rlpBinary],["channels",or.rlpBinary],["ns",or.rlpBinary],["oracles",or.rlpBinary],["accounts",or.rlpBinary]]},[Jt.Mtree]:{1:[...sr,["values",or.rlpBinaries]]},[Jt.MtreeValue]:{1:[...sr,["key",or.hex],["value",or.rawBinary]]},[Jt.ContractsMtree]:{1:[...sr,["contracts",or.rlpBinary]]},[Jt.CallsMtree]:{1:[...sr,["calls",or.rlpBinary]]},[Jt.ChannelsMtree]:{1:[...sr,["channels",or.rlpBinary]]},[Jt.NameserviceMtree]:{1:[...sr,["mtree",or.rlpBinary]]},[Jt.OraclesMtree]:{1:[...sr,["otree",or.rlpBinary]]},[Jt.AccountsMtree]:{1:[...sr,["accounts",or.rlpBinary]]},[Jt.GaAttachTx]:{1:[...sr,["ownerId",or.id,dt.AccountAddress],["nonce",jn],["code",or.binary,dt.ContractBytearray],["authFun",or.rawBinary],["ctVersion",or.ctVersion],["fee",Un],["ttl",jn],["gasLimit",Fn],["gasPrice",Hn],["callData",or.binary,dt.ContractBytearray]]},[Jt.GaMetaTx]:{2:[...sr,["gaId",or.id,dt.AccountAddress],["authData",or.binary,dt.ContractBytearray],["abiVersion",or.abiVersion],["fee",Un],["gasLimit",Fn],["gasPrice",Hn],["tx",or.rlpBinary]]},[Jt.PayingForTx]:{1:[...sr,["payerId",or.id,dt.AccountAddress],["nonce",jn],["fee",Un],["tx",or.rlpBinary]]},[Jt.CompilerSophia]:{3:[...sr,["sourceCodeHash",or.rawBinary],["typeInfo",or.sophiaCodeTypeInfo],["byteCode",or.rawBinary],["compilerVersion",or.string],["payable",or.bool]]}};var lr,ur=C(3485),dr=C(9408).Buffer;!function(e){e[e.Branch=0]="Branch",e[e.Extension=1]="Extension",e[e.Leaf=2]="Leaf"}(lr||(lr={}));class pr{static nodeHash(e){return dr.from(Et((0,ur.encode)(e))).toString("hex")}constructor(e){if(this.rootHash=e[0].toString("hex"),this.nodes=Object.fromEntries(e[1].map((e=>[e[0].toString("hex"),e[1]]))),void 0===this.nodes[this.rootHash])throw new we("Can't find a node by root hash");Object.entries(this.nodes).forEach((e=>{let[t,n]=e;if(pr.nodeHash(n)!==t)throw new Ce;const{type:r,payload:a}=pr.parseNode(n);switch(r){case lr.Branch:a.slice(0,16).filter((e=>e.length)).forEach((e=>{if(void 0===this.nodes[e.toString("hex")])throw new we("Can't find a node by hash in branch node")}));break;case lr.Extension:if(void 0===this.nodes[a[0].toString("hex")])throw new we("Can't find a node by hash in extension node")}}))}isEqual(e){return this.rootHash===e.rootHash}static parseNode(e){switch(e.length){case 17:return{type:lr.Branch,payload:e,path:null};case 2:{var t;const n=e[0][0]>>4;if(n>3)throw new ve(n);const r=n<=1?lr.Extension:lr.Leaf,a=m()(t=[0,2]).call(t,n)?2:1;return{type:r,payload:[e[1]],path:e[0].toString("hex").slice(a)}}default:throw new be(e.length)}}serialize(){return[dr.from(this.rootHash,"hex"),Object.entries(this.nodes).map((e=>{let[t,n]=e;return[dr.from(t,"hex"),n]}))]}get(e){let t=this.rootHash,n=e;for(;;){const{type:e,payload:r,path:a}=pr.parseNode(this.nodes[t]);switch(e){case lr.Branch:if(0===n.length)return r[16];t=r[+`0x${n[0]}`].toString("hex"),n=n.substring(1);break;case lr.Extension:if(n.substring(0,null==a?void 0:a.length)!==a)return;t=r[0].toString("hex"),n=n.substring(a.length);break;case lr.Leaf:if(a!==n)return;return r[0]}}}}var mr=C(9408).Buffer;function hr(e,t,n){if(null==e)return"";switch(t){case or.ctVersion:{const[t,,n]=e;return{vmVersion:dn(mr.from([t])),abiVersion:dn(mr.from([n]))}}case or.abiVersion:case or.ttlType:return dn(e);case or.id:return nn(e);case or.ids:return e.map(nn);case or.bool:return 1===e[0];case or.binary:return Tt(e,n);case or.stateTree:return Tt(e,dt.StateTrees);case or.string:return e.toString();case or.payload:return Tt(e,dt.Bytearray);case or.pointers:return mn(e);case or.rlpBinary:return wr(Tt(e,dt.Transaction));case or.rlpBinaries:return e.map((e=>wr(Tt(e,dt.Transaction))));case or.rawBinary:return e;case or.hex:return e.toString("hex");case or.offChainUpdates:return e.map((e=>wr(Tt(e,dt.Transaction))));case or.callStack:return[dn(e)];case or.mptrees:return e.map((e=>new pr(e)));case or.callReturnType:switch(dn(e)){case"0":return"ok";case"1":return"error";case"2":return"revert";default:return e}case or.sophiaCodeTypeInfo:return e.reduce(((e,t)=>{let[n,r,a,i]=t;return{...e,[r.toString()]:{funHash:n,argType:a,outType:i}}}),{});default:return"number"==typeof t?e:t.deserialize(e)}}function yr(e,t,n){var r;switch(t){case or.abiVersion:case or.ttlType:return un(e);case or.id:return tn(e);case or.ids:return e.map(tn);case or.bool:return mr.from([!0===e?1:0]);case or.binary:case or.stateTree:return St(e);case or.hex:return mr.from(e,"hex");case or.signatures:return e.map(mr.from);case or.payload:return"string"==typeof e&&"ba"===e.split("_")[0]?St(e):Ze(e);case or.string:return Ze(e);case or.pointers:return pn(e);case or.rlpBinary:return null!==(r=e.rlpEncoded)&&void 0!==r?r:e;case or.mptrees:return e.map((e=>e.serialize()));case or.ctVersion:return mr.from([...Ze(e.vmVersion),0,...Ze(e.abiVersion)]);case or.callReturnType:switch(e){case"ok":return un(0);case"error":return un(1);case"revert":return un(2);default:return e}default:return"number"==typeof t?e:t.serialize(e,n)}}function fr(e,t,n){if(null==e)return"Field is required";switch(t){case or.id:{const t=Array.isArray(n)?n:[n];return m()(t).call(t,e.split("_")[0])?void 0:null==n?`'${String(e)}' prefix doesn't exist'`:`'${String(e)}' prefix doesn't match expected prefix '${n.toString()}'`}case or.ctVersion:return Boolean(e.abiVersion)&&Boolean(e.vmVersion)?void 0:'Value must be an object with "vmVersion" and "abiVersion" fields';case or.pointers:return Array.isArray(e)?e.some((e=>!(Boolean(e.key)&&Boolean(e.id))))?'Value must contains only object\'s like \'{key: "account_pubkey", id: "ak_lkamsflkalsdalksdlasdlasdlamd"}\'':e.length>32?`Expected 32 pointers or less, got ${e.length} instead`:void 0:"Value must be of type Array";default:return}}function gr(e,t,n){let{excludeKeys:r=[]}=n;return Object.fromEntries(t.filter((e=>{var t;let[n]=e;return!m()(r).call(r,n)&&!m()(t=["payload","nameFee","deposit","gasPrice","fee","gasLimit"]).call(t,n)})).map((t=>{let[n,r,a]=t;return[n,fr(e[n],r,a)]})).filter((e=>{let[,t]=e;return t})))}function Nr(e,t){return t.reduce(((t,n,r)=>{let[a,i,o]=n;return Object.assign(t,{[a]:hr(e[r],i,o)})}),{})}function Cr(e,t){var n;let{excludeKeys:r=[],prefix:a=dt.Transaction,vsn:i,denomination:o=Ue.AETTOS}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=cr[t];if(null!==(n=i)&&void 0!==n||(i=Math.max(...Object.keys(s).map((e=>+e)))),!st(i,s))throw new Ie("serialization",Jt[t],i);const c=s[i],l=e;l.VSN=i,l.tag=t,l.denomination=o;const u=c.filter((e=>{let[t]=e;return!m()(r).call(r,t)})),d=gr(l,c,{excludeKeys:r});if(Object.keys(d).length>0)throw new Pe(`Transaction build error. ${JSON.stringify(d)}`);const p=u.map((e=>{let[n,a]=e;return yr(l[n],a,{...l,txType:t,rebuildTx:e=>Cr({...l,...e},t,{excludeKeys:r,prefix:dt.Transaction,vsn:i,denomination:o})})})).filter((e=>void 0!==e)),h=(0,ur.encode)(p),y=Tt(h,a);return{tx:y,rlpEncoded:h,binary:p,txObject:Nr(p,c)}}function wr(e,t){const n=St(e),r=(0,ur.decode)(n),a=+dn(r[0]);if(!st(a,cr))throw new Te(`Unknown transaction tag: ${a}`);if(null!=t&&t!==a)throw new Te(`Expected transaction to have ${Jt[t]} tag, got ${Jt[a]} instead`);const i=+dn(r[1]);if(!st(i,cr[a]))throw new Ie("deserialization",`tag ${a}`,i);return{txType:a,tx:Nr(r,cr[a][i]),rlpEncoded:n}}function br(e){return Tt(Et("string"==typeof e&&e.startsWith("tx_")?St(e):e),dt.TxHash)}function vr(e){var t;const{txType:n,tx:r}=wr(e);if(!m()(t=[Jt.ContractCreateTx,Jt.GaAttachTx]).call(t,n))throw new q("contractCreateTx","a contractCreateTx or gaAttach",n);return an(r.ownerId,+r.nonce)}var xr=C(9408).Buffer;const Sr=[],Tr=e=>["senderId","accountId","ownerId","callerId","oracleId","fromId","initiator","gaId","payerId"].map((t=>e[t])).filter((e=>e)).map((e=>null==e?void 0:e.toString().replace(/^ok_/,"ak_")))[0];async function _r(e,t){var n;let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const{tx:a,txType:i}=wr(e),o=null!==(n=Tr(a))&&void 0!==n?n:i===Jt.SignedTx?Tr(a.encodedTx.tx):void 0,[s,{height:c},{consensusProtocolVersion:l,nodeNetworkId:u}]=await Promise.all([null==o?void 0:t.getAccountByPubkey(o).catch((()=>({id:o,balance:0n,nonce:0}))).then((e=>({...e,id:e.id}))),t.getCurrentKeyBlockHeight(),t.getNodeInfo()]);return(await Promise.all(Sr.map((e=>e(a,{txType:i,node:t,account:s,height:c,consensusProtocolVersion:l,nodeNetworkId:u,parentTxTypes:r}))))).flat()}function zr(e,t){let{_expectedMineRate:n=18e4,_microBlockCycle:r=3e3,_maxPollInterval:a=5e3}=t;const i={block:n,microblock:r}[e];return Math.min(i/3,a)}Sr.push(((e,t)=>{let{encodedTx:n,signatures:r}=e,{account:a,nodeNetworkId:i,parentTxTypes:o}=t;if(void 0===(null!=n?n:r))return[];if(null==a)return[];if(1!==r.length)return[];const s=xr.from([i,...m()(o).call(o,Jt.PayingForTx)?["inner_tx"]:[]].join("-")),c=ot([s,n.rlpEncoded]),l=ot([s,Et(n.rlpEncoded)]),u=St(a.id);return Rt(c,r[0],u)||Rt(l,r[0],u)?[]:[{message:"Signature cannot be verified, please ensure that you transaction have the correct prefix and the correct private key for the sender address",key:"InvalidSignature",checkedKeys:["encodedTx","signatures"]}]}),(async(e,t)=>{let{encodedTx:n,tx:r}=e,{node:a,parentTxTypes:i,txType:o}=t;return void 0===(null!=n?n:r)?[]:_r(Tt((null!=n?n:r).rlpEncoded,dt.Transaction),a,[...i,o])}),((e,t)=>{let{ttl:n}=e,{height:r}=t;return void 0===n?[]:(n=+n,0===n||n>=r?[]:[{message:`TTL ${n} is already expired, current height is ${r}`,key:"ExpiredTTL",checkedKeys:["ttl"]}])}),((e,t)=>{var n,r;let{amount:a,fee:i,nameFee:o,tx:s}=e,{account:c,parentTxTypes:l,txType:u}=t;if(null==c)return[];if(void 0===(null!==(n=null!=a?a:i)&&void 0!==n?n:o))return[];null!==(r=i)&&void 0!==r||(i=0);const p=new(d())(i).plus(null!=o?o:0).plus(null!=a?a:0).plus(u===Jt.PayingForTx?s.tx.encodedTx.tx.fee:0).minus(m()(l).call(l,Jt.PayingForTx)?i:0);return p.lte(c.balance.toString())?[]:[{message:`Account balance ${c.balance.toString()} is not enough to execute the transaction that costs ${p.toFixed()}`,key:"InsufficientBalance",checkedKeys:["amount","fee","nameFee"]}]}),((e,t)=>{let{nonce:n}=e,{account:r,parentTxTypes:a}=t;if(null==n||null==r||m()(a).call(a,Jt.GaMetaTx))return[];n=+n;const i=r.nonce+1;return n===i?[]:[{...n<i?{message:`Nonce ${n} is already used, valid nonce is ${i}`,key:"NonceAlreadyUsed"}:{message:`Nonce ${n} is too high, valid nonce is ${i}`,key:"NonceHigh"},checkedKeys:["nonce"]}]}),((e,t)=>{let{ctVersion:n,abiVersion:r}=e,{txType:a,consensusProtocolVersion:i}=t;if(!st(i,ir))throw new j(`Unsupported protocol: ${i}`);null==n&&(n={abiVersion:r});const o=ir[i][a];return null==o?[]:Object.entries(n).some((e=>{var t;let[n,r]=e;return!m()(t=o[n]).call(t,+r)}))?[{message:`ABI/VM version ${JSON.stringify(n)} is wrong, supported is: ${JSON.stringify(o)}`,key:"VmAndAbiVersionMismatch",checkedKeys:["ctVersion","abiVersion"]}]:[]}),(async(e,t)=>{let{contractId:n}=e,{txType:r,node:a}=t;if(Jt.ContractCallTx!==r)return[];try{const{active:e}=await a.getContract(n);return e?[]:[{message:`Contract ${n} is not active`,key:"ContractNotActive",checkedKeys:["contractId"]}]}catch(e){var i,o;if(null==(null===(i=e.response)||void 0===i||null===(o=i.parsedBody)||void 0===o?void 0:o.reason))throw e;return[{message:e.response.parsedBody.reason,key:"ContractNotFound",checkedKeys:["contractId"]}]}}));class qr extends _{constructor(e,t,n){super(e),this.name="InvalidTxError",this.validation=t,this.transaction=n}}async function Ar(e){let{onNode:t}=e;return(await t.getCurrentKeyBlockHeight()).height}async function Pr(e,t){var n;let{blocks:r=10,interval:a,onNode:i,...o}=t;null!==(n=a)&&void 0!==n||(a=zr("microblock",o));const s=await Ar({onNode:i})+r;do{const t=await i.getTransactionByHash(e);if(-1!==t.blockHeight)return t;await at(a)}while(await Ar({onNode:i})<s);throw new M(r,e)}async function Er(e,t){var n;let r,{interval:a,onNode:i,...o}=t;null!==(n=a)&&void 0!==n||(a=zr("block",o));do{null!=r&&await at(a),r=(await i.getCurrentKeyBlockHeight()).height}while(r<e);return r}async function Ir(e,t){let{confirm:n=3,onNode:r,...a}=t;const{blockHeight:i}=await r.getTransactionByHash(e),o=await Er(i+n,{onNode:r,...a}),{blockHeight:s}=await r.getTransactionByHash(e);switch(s){case-1:throw new Oe(e);case i:return o;default:return Ir(e,{onNode:r,confirm:n,...a})}}async function kr(e,t){let{onNode:n,onAccount:r,verify:a=!0,waitMined:i=!0,confirm:o,...s}=t;if(a){const t=await _r(e,n);if(t.length>0){const n=`Transaction verification errors: ${t.map((e=>e.message)).join(", ")}`;throw new qr(n,t,e)}}try{let t;try{t=null!=r?`tx-${await r.address(s)}`:null}catch(e){t=null}const{txHash:a}=await n.postTransaction({tx:e},null!=t?{requestOptions:{customHeaders:{__queue:t}}}:{});if(i){const t=await Pr(a,{onNode:n,...s}),r={...t,hash:t.hash,rawTx:e};if(null!=o&&(!0===o||o>0)){const e="boolean"==typeof o?void 0:o;return{...r,confirmationHeight:await Ir(a,{onNode:n,confirm:e,...s})}}return r}return{hash:a,rawTx:e}}catch(t){throw Object.assign(t,{rawTx:e,verifyTx:async()=>_r(e,n)})}}async function Or(e,t){let{height:n,hash:r,onNode:a}=t;return null!=n?a.getAccountByPubkeyAndHeight(e,n):null!=r?a.getAccountByPubkeyAndHash(e,r):a.getAccountByPubkey(e)}async function Mr(e,t){let{format:n=Ue.AETTOS,...r}=t;const{balance:a}=await Or(e,r).catch((()=>({balance:0n})));return He(a,{targetDenomination:n})}async function Rr(e){let{onNode:t}=e;return t.getCurrentGeneration()}async function Br(e,t){let{onNode:n}=t;return"number"==typeof e?n.getGenerationByHeight(e):n.getGenerationByHash(e)}async function jr(e,t){let{onNode:n}=t;return(await n.getMicroBlockTransactionsByHash(e)).transactions}async function Dr(e,t){let{onNode:n}=t;return"number"==typeof e?n.getKeyBlockByHeight(e):n.getKeyBlockByHash(e)}async function Vr(e,t){let{onNode:n}=t;return n.getMicroBlockHeaderByHash(e)}const Ur=new Map;async function Fr(e,t){const n=Ur.get(e);if(Ur.delete(e),null==n)throw new U("Can't get dry-run request");let r;try{r=await t.protectedDryRunTxs({top:n[0].top,txEvents:n[0].txEvents,txs:n.map((e=>({tx:e.tx}))),accounts:Array.from(new Set(n.map((e=>e.accountAddress)))).map((e=>({pubKey:e,amount:tr.amount})))})}catch(e){return void n.forEach((t=>{let{reject:n}=t;return n(e)}))}const{results:a,txEvents:i}=r;a.forEach(((e,t)=>{let{result:r,reason:a,...o}=e;const{resolve:s,reject:c,tx:l,accountAddress:u}=n[t];"ok"===r?s({...o,txEvents:i}):c(Object.assign(new ze(a),{tx:l,accountAddress:u}))}))}async function Hr(e,t,n){var r;let{top:a,txEvents:i,combine:o,onNode:s}=n;const c=!0===o?[a,i].join():"immediate",l=null!==(r=Ur.get(c))&&void 0!==r?r:[];return Ur.set(c,l),new Promise(((n,r)=>{var u;l.push({tx:e,accountAddress:t,top:a,txEvents:i,resolve:n,reject:r}),!0===o?null!==(u=l.timeout)&&void 0!==u||(l.timeout=setTimeout((()=>{Fr(c,s)}))):Fr(c,s)}))}async function $r(e,t){let{onNode:n}=t;return n.getContractCode(e)}async function Gr(e,t){let{onNode:n}=t;return n.getContract(e)}async function Kr(e,t){let{onNode:n}=t;return n.getNameEntryByName(e)}async function Lr(e,t,n){let{verify:r=!0,resolveByNode:a=!1,onNode:i}=n;if(yn(e)){if(r||a){const n=(await i.getNameEntryByName(e)).pointers.find((e=>e.key===t));if(null==n)throw new G(e,t);if(a)return n.id}return cn(e)}try{return St(e),e}catch(t){throw new L(`Invalid name or address: ${e}`)}}var Wr=C(3983),Qr=C(7289);const Yr={async argon2id(e,t,n){const{memlimit_kib:r,opslimit:a}=n;return(await(0,Qr.hash)({hashLen:32,pass:e,salt:t,time:a,mem:r,type:Qr.ArgonType.Argon2id})).hash}},Xr={"xsalsa20-poly1305":{encrypt:Le().secretbox,decrypt(){const e=Le().secretbox.open(...arguments);if(null==e)throw new Ne;return e}}},Jr={secret_type:"ed25519",symmetric_alg:"xsalsa20-poly1305",kdf:"argon2id",kdf_params:{memlimit_kib:65536,opslimit:3,parallelism:1}};function Zr(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Jr.symmetric_alg;return Xr[r].encrypt(e,n,t)}async function ea(e,t,n,r){return Yr[n](e,t,r)}async function ta(e,t){let{crypto:n}=t;const r=nt(n.kdf_params.salt);return tt(function(e,t,n){return Xr[arguments.length>3&&void 0!==arguments[3]?arguments[3]:Jr.symmetric_alg].decrypt(e,n,t)}(nt(n.ciphertext),await ea(e,r,n.kdf,n.kdf_params),nt(n.cipher_params.nonce),n.symmetric_alg))}async function na(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Le().randomBytes(24),a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Le().randomBytes(16),i=arguments.length>5?arguments[5]:void 0;const o={...Jr,...i},s=await ea(t,a,o.kdf,o.kdf_params),c="string"==typeof n?nt(n):n;return{name:e,version:1,public_key:zt(c),id:(0,Wr.v4)(),crypto:{secret_type:o.secret_type,symmetric_alg:o.symmetric_alg,ciphertext:tt(Zr(c,s,r,o.symmetric_alg)),cipher_params:{nonce:tt(r)},kdf:o.kdf,kdf_params:{...o.kdf_params,salt:tt(a)}}}}async function ra(e,t){var n,r;let{vmVersion:a,abiVersion:i,onNode:o}=t;const{consensusProtocolVersion:s}=await o.getNodeInfo();if(!st(s,ir))throw new j("Not supported consensus protocol version");const c=ir[s];if(!st(e,c))throw new Me("Not supported tx type");const l=c[e];return null!==(n=i)&&void 0!==n||(i=l.abiVersion[0]),null!==(r=a)&&void 0!==r||(a=l.vmVersion[0]),{vmVersion:a,abiVersion:i}}async function aa(e,t){var n;let{senderId:r,nonce:a,ttl:i=Wn,absoluteTtl:o,strategy:s,onNode:c}=t;if(null!==(n=a)&&void 0!==n||(a=(await c.getAccountNextNonce(r,{strategy:s}).catch((()=>({nextNonce:1})))).nextNonce),0!==i){if(i<0)throw new q("ttl","greater or equal to 0",i);i+=!0===o?0:(await c.getCurrentKeyBlock()).height}return{ttl:i,nonce:a}}async function ia(e,t){var n;let{denomination:r,absoluteTtl:a,...i}=t;const o=i;let s;switch(e){case Jt.SpendTx:case Jt.OracleQueryTx:s="senderId";break;case Jt.NameClaimTx:case Jt.NameUpdateTx:case Jt.NameRevokeTx:case Jt.NameTransferTx:case Jt.NamePreclaimTx:case Jt.OracleRegisterTx:s="accountId";break;case Jt.ContractCreateTx:case Jt.GaAttachTx:s="ownerId";break;case Jt.ContractCallTx:case Jt.OracleExtendTx:case Jt.OracleResponseTx:s="callerId";break;case Jt.ChannelCloseSoloTx:case Jt.ChannelSlashTx:case Jt.ChannelSettleTx:case Jt.ChannelSnapshotSoloTx:s="fromId";break;case Jt.PayingForTx:s="payerId";break;default:throw new q("txType","valid transaction type",e)}var c;m()(n=[Jt.ContractCreateTx,Jt.GaAttachTx]).call(n,e)&&(o.ctVersion=await ra(Jt.ContractCreateTx,{...o,...o.ctVersion})),e===Jt.ContractCallTx&&(o.abiVersion=(await ra(Jt.ContractCallTx,o)).abiVersion),e===Jt.OracleRegisterTx&&(null!==(c=o.abiVersion)&&void 0!==c||(o.abiVersion=rr.NO_ABI)),e===Jt.PayingForTx&&(o.tx=wr(o.tx));const l=o[s];if(null==l)throw new Pe(`Transaction field ${s} is missed`);const u=await aa(0,{...o,senderId:l,absoluteTtl:a});return Cr({...o,...u},e,{denomination:r}).tx}var oa=C(9882),sa=C(1986),ca=C(8236),la=C.n(ca),ua=C(9408).Buffer;const da=la().ModeOfOperation.ecb;function pa(e,t){const n=mt(e);return new da(n).encrypt(t)}function ma(e,t){const n=ua.from(t),r=mt(e);return new da(r).decrypt(n)}class ha extends S{constructor(e){super(e),this.name="DerivationError"}}const ya=ua.from("ed25519 seed"),fa=2147483648;function ga(e,t){let{secretKey:n,chainCode:r}=e;if(t<fa)throw new ha(`Segment ${t} is not hardened`);const a=ua.allocUnsafe(4);a.writeUInt32BE(t,0);const i=ot([ua.alloc(1,0),n,a]),o=(0,oa.full)(i,r);return{secretKey:o.slice(0,32),chainCode:o.slice(32)}}function Na(e,t){const n=""===e?[]:(0,sa.fromString)(e).toPathArray();return n.forEach(((e,t)=>{if(e<fa)throw new ha(`Segment #${t+1} is not hardened`)})),n.reduce(((e,t)=>ga(e,t)),t)}function Ca(e){const t=(0,oa.full)(e,ya);return{secretKey:t.slice(0,32),chainCode:t.slice(32)}}function wa(e,t){var n;if(!m()(n=["m","m/"]).call(n,e.slice(0,2)))throw new ha("Root element is required");const r=Ca(t);return Na(e.slice(2),r)}function ba(e){const{secretKey:t,publicKey:n}=e;return{secretKey:tt(t),publicKey:Tt(n,dt.AccountAddress)}}function va(e){return Le().sign.keyPair.fromSeed(e)}function xa(e,t){const n=wa("m/44h/457h",e);return{secretKey:tt(pa(t,n.secretKey)),chainCode:tt(pa(t,n.chainCode))}}function Sa(e,t,n){const r={secretKey:ma(t,ua.from(e.secretKey,"hex")),chainCode:ma(t,ua.from(e.chainCode,"hex"))};return new Array(n).fill(void 0).map(((e,t)=>ba(va(Na(`${t}h/0h/0h`,r).secretKey))))}const Ta=(e,t)=>({...ba(va(Na(`${t}h/0h/0h`,wa("m/44h/457h",e)).secretKey)),idx:t});async function _a(e,t){const n=!0===t.innerTx?void 0:(await Or(await t.onAccount.address(t),t)).authFun,r=await t.onAccount.signTransaction(e,{...t,authFun:n,networkId:(await t.onNode.getStatus()).networkId});return!0===t.innerTx?{hash:br(r),rawTx:r}:kr(r,t)}async function za(e,t,n){return _a(await ia(Jt.SpendTx,{...n,senderId:await n.onAccount.address(n),recipientId:await Lr(t,"account_pubkey",n),amount:e}),n)}async function qa(e,t,n){if(e<0||e>1)throw new q("fraction","a number between 0 and 1",e);const r=await Lr(t,"account_pubkey",n),a=await n.onAccount.address(n),i=new(d())(await Mr.bind(n.onAccount)(a,n)),o=i.times(e).integerValue(d().ROUND_HALF_UP),{tx:{fee:s}}=wr(await ia(Jt.SpendTx,{...n,senderId:a,recipientId:r,amount:o}),Jt.SpendTx),c=o.plus(s).gt(i)?i.minus(s):o;return _a(await ia(Jt.SpendTx,{...n,senderId:a,recipientId:r,amount:c}),n)}async function Aa(e,t){return _a(await ia(Jt.PayingForTx,{...t,payerId:await t.onAccount.address(t),tx:e}),t)}async function Pa(e,t){return _a(await ia(Jt.NameRevokeTx,{...t,nameId:e,accountId:await t.onAccount.address(t)}),t)}async function Ea(e,t,n){let{extendPointers:r,...a}=n;const i={...!0===r&&Object.fromEntries((await Kr(e,a)).pointers.map((e=>{let{key:t,id:n}=e;return[t,n]}))),...t};return _a(await ia(Jt.NameUpdateTx,{clientTtl:$t,nameTtl:Ut,...a,nameId:e,accountId:await a.onAccount.address(a),pointers:Object.entries(i).map((e=>{let[t,n]=e;return{key:t,id:n.toString()}}))}),a)}async function Ia(e,t,n){return _a(await ia(Jt.NameTransferTx,{...n,nameId:e,accountId:await n.onAccount.address(n),recipientId:t}),n)}async function ka(e,t){const n=await Kr(e,t);return Object.freeze({...n,id:n.id,owner:n.owner,update:async(n,r)=>({...await Ea(e,n,{...t,...r}),...await ka(e,{...t,...r})}),transfer:async(n,r)=>({...await Ia(e,n,{...t,...r}),...await ka(e,{...t,...r})}),revoke:async n=>Pa(e,{...t,...n}),async extendTtl(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ut,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n>Ut||n<=0)throw new q("nameTtl",`a number between 1 and ${Ut} blocks`,n);return{...await Ea(e,{},{...t,...r,nameTtl:n,extendPointers:!0}),...await ka(e,{...t,...r})}}})}async function Oa(e,t,n){const r=await ia(Jt.NameClaimTx,{...n,accountId:await n.onAccount.address(n),nameSalt:t,name:e}),a=await _a(r,n);if(!bn(e)){const t=null!=a.blockHeight&&a.blockHeight>0?await ka(e,n):{};return Object.assign(a,t)}return a}async function Ma(e,t){const n=At(),r=await Ar(t),a=ln(e,n),i=await ia(Jt.NamePreclaimTx,{...t,accountId:await t.onAccount.address(t),commitmentId:a});return Object.freeze({...await _a(i,t),height:r,salt:n,commitmentId:a,claim:async r=>Oa(e,n,{...t,...r})})}async function Ra(e,t,n){return Oa(e,0,{...n,nameFee:t})}var Ba=C(7946);async function ja(e){let{onAccount:t,onCompiler:n,onNode:r,source:a,bytecode:i,aci:o,contractAddress:s,fileSystem:c={},validateBytecode:l,...u}=e;if(null==o&&null!=a&&(o=await n.generateACI({code:a,options:{fileSystem:c}})),null==o)throw new ue;if(null!=s&&(s=await Lr(s,"contract_pubkey",{resolveByNode:!0,onNode:r})),null==s&&null==a&&null==i)throw new le("Can't create instance by ACI without address");if(null!=s&&null==(await Gr(s,{onNode:r})).active)throw new se(s);const d={_aci:o,_name:o.encodedAci.contract.name,calldata:new Ba.Encoder([o.encodedAci,...o.externalEncodedAci]),source:a,bytecode:i,deployInfo:{address:s},options:{onAccount:t,onCompiler:n,onNode:r,amount:Zn,callStatic:!1,fileSystem:c,...u},async compile(e){},async _estimateGas(e,t,n){},async deploy(e,t){},async call(e,t,n){},decodeEvents(e,t){},methods:void 0};if(null!=l){if(null==s)throw new le("Can't validate bytecode without contract address");const e=(await $r(s,{onNode:r})).bytecode;if(!(null!=a?await n.validateByteCode({bytecode:e,source:a,options:d.options}).then((()=>!0),(()=>!1)):i===e))throw new ie(null!=a?"source":"bytecode")}d.compile=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(null!=d.bytecode)throw new A("Contract already compiled");if(null==d.source)throw new A("Can't compile without source code");return d.bytecode=(await n.compileContract({code:d.source,options:{...d.options,...e}})).bytecode,d.bytecode};const p=(e,t)=>{let n,{returnType:r,returnValue:a}=e;switch(r){case"ok":return;case"revert":n=d.calldata.decodeFateString(a);break;case"error":n=St(a).toString();break;default:throw new U(`Unknown return type: ${r}`)}throw new pe(n,t)},m=async(e,t)=>{t={...d.options,...t};const n=await _a(e,t),a={hash:n.hash,tx:wr(n.rawTx),txData:n,rawTx:n.rawTx};if(null==n.blockHeight)return a;const{callInfo:i}=await r.getTransactionInfoByHash(n.hash);return Object.assign(a.txData,i),p(i,e),{...a,result:i}};function h(e){const t=d._aci.encodedAci.contract.functions.find((t=>t.name===e));if(null!=t)return t;if("init"===e)return{payable:!1};throw new me(`Function ${e} doesn't exist in contract`)}function y(e,t,n){let{contractAddressToName:r}=n;const a={...d.options.contractAddressToName,...r};if(null!=a[e])return a[e];const i=[d._aci.encodedAci,...d._aci.externalEncodedAci].filter((e=>{let{contract:t}=e;return null==t?void 0:t.event})).map((e=>{let{contract:t}=e;return[t.name,t.event.variant]})).map((e=>{let[t,n]=e;return n.map((e=>[t,Object.keys(e)[0]]))})).flat().filter((e=>{let[,n]=e;return BigInt(`0x${Et(n).toString("hex")}`)===t}));switch(i.length){case 0:throw new ye(t.toString(),e);case 1:return i[0][0];default:throw new fe(e,i)}}return d._estimateGas=async(e,t,n)=>{const{result:{gasUsed:r}}=await d.call(e,t,{...n,callStatic:!0});return Math.floor(1.25*r)},d.deploy=async function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;const a={...d.options,...n};if(null==d.bytecode&&await d.compile(a),!0===a.callStatic)return d.call("init",t,a);if(null!=d.deployInfo.address)throw new oe;const i=await a.onAccount.address(n),o=await ia(Jt.ContractCreateTx,{...a,gasLimit:null!==(e=a.gasLimit)&&void 0!==e?e:await d._estimateGas("init",t,a),callData:d.calldata.encode(d._name,"init",t),code:d.bytecode,ownerId:i,onNode:r}),s=vr(o),{hash:c,rawTx:l,result:u,txData:p}=await m(o,a);return d.deployInfo=Object.freeze({result:u,owner:i,transaction:c,rawTx:l,txData:p,address:s}),d.deployInfo},d.call=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a={...d.options,...n},i=h(e),o=d.deployInfo.address;if(null==e)throw new de;if("init"===e&&!1===a.callStatic)throw new ce('"init" can be called only via dryRun');if(null==o&&"init"!==e)throw new ce("You need to deploy contract before calling!");if("init"!==e&&a.amount>0&&!1===i.payable)throw new he(a.amount,e);const s=await Promise.resolve().then((()=>a.onAccount.address(a))).catch((e=>{if(!0===a.callStatic)return tr.pub;throw e})),c=d.calldata.encode(d._name,e,t);let l;if(!0===a.callStatic){"number"==typeof a.top&&(a.top=(await Dr(a.top,{onNode:r})).hash);const t={...a,onNode:r,callData:c};null==a.nonce&&null!=a.top&&(a.nonce=(await Or(s,{hash:a.top,onNode:r})).nonce+1);const n=await("init"===e?ia(Jt.ContractCreateTx,{...t,code:d.bytecode,ownerId:s}):ia(Jt.ContractCallTx,{...t,callerId:s,contractId:o})),{callObj:i,...u}=await Hr(n,s,{onNode:r,...a});if(null==i)throw new F;p({returnType:i.returnType,returnValue:i.returnValue},n),l={...u,tx:wr(n),result:i}}else{var u;const n=await ia(Jt.ContractCallTx,{...a,onNode:r,gasLimit:null!==(u=a.gasLimit)&&void 0!==u?u:await d._estimateGas(e,t,a),callerId:s,contractId:o,callData:c});l=await m(n,a)}return!0!==a.callStatic&&null==l.txData.blockHeight||(l.decodedResult=null!=i.returns&&"unit"!==i.returns&&"init"!==e&&d.calldata.decode(d._name,e,l.result.returnValue),l.decodedEvents=d.decodeEvents(l.result.log,a)),l},d.decodeEvents=function(e){let{omitUnknown:t,...n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.map((e=>{const r=e.topics.map((e=>BigInt(e)));let a;try{a=y(e.address,r[0],n)}catch(e){if(null!=t&&t&&e instanceof ye)return null;throw e}const i=d.calldata.decodeEvent(a,e.data,r),[o,s]=Object.entries(i)[0];return{name:o,args:s,contract:{name:a,address:e.address}}})).filter((e=>null!=e))},d.methods=Object.fromEntries(d._aci.encodedAci.contract.functions.map((e=>{let{name:t,arguments:n,stateful:r}=e;const a=e=>async function(){for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];const o=a.length===n.length+1?a.pop():{};if("object"!=typeof o)throw new R(`Options should be an object: ${o}`);return"init"===t?d.deploy(a,{callStatic:e,...o}):d.call(t,a,{callStatic:e,...o})};return[t,Object.assign(a("init"!==t&&!r),{get:a(!0),send:a(!1)})]}))),d}var Da=C(9408).Buffer;async function Va(e,t){let{onAccount:n,onNode:r,...a}=t;const i=await n.sign(ot([Da.from((await r.getStatus()).networkId),...e.map((e=>St(e)))]),a);return Da.from(i).toString("hex")}async function Ua(e,t){return Va([await t.onAccount.address(t),...null!=t.name?[cn(t.name)]:[],e],t)}async function Fa(e,t){var n;return Va([null!==(n=t.queryId)&&void 0!==n?n:await t.onAccount.address(t),e],t)}function Ha(e,t,n){var r;let{interval:a,onNode:i,...o}=n;null!==(r=a)&&void 0!==r||(a=zr("microblock",o));const s=new Set,c=async()=>{var n;const r=(null!==(n=(await i.getOracleQueriesByPubkey(e)).oracleQueries)&&void 0!==n?n:[]).filter((e=>{let{id:t}=e;return!s.has(t)}));r.forEach((e=>{let{id:t}=e;return s.add(t)})),r.length>0&&t(r)};let l=!1;return(async()=>{for(;!l;)await c().catch(console.error),await at(a)})(),()=>{l=!0}}async function $a(e,t,n){var r;let a,i,o,{interval:s,onNode:c,...l}=n;null!==(r=s)&&void 0!==r||(s=zr("microblock",l));do{null!=a&&await at(s),({response:o,ttl:i}=await c.getOracleQueryByPubkeyAndQueryId(e,t));const n=St(o);if(n.length>0)return n.toString();a=await this.getHeight()}while(i>=a);throw new O(a)}async function Ga(e,t,n){const r=await n.onNode.getOracleQueryByPubkeyAndQueryId(e,t);return{...r,decodedQuery:St(r.query).toString(),decodedResponse:St(r.response).toString(),respond:async(r,a)=>Wa(e,t,r,{...n,...a}),pollForResponse:async r=>$a(e,t,{...n,...r})}}async function Ka(e,t,n){var r;null!==(r=n.queryFee)&&void 0!==r||(n.queryFee=(await n.onNode.getOracleByPubkey(e)).queryFee.toString());const a=await n.onAccount.address(n),i=await ia(Jt.OracleQueryTx,{queryTtlType:Xn.type,queryTtlValue:Xn.value,responseTtlType:Jn.type,responseTtlValue:Jn.value,...n,oracleId:e,senderId:a,query:t}),{nonce:o}=wr(i,Jt.OracleQueryTx).tx,s=on(a,o,e);return{...await _a(i,n),...await Ga(e,s,n)}}async function La(e,t){const n=await ia(Jt.OracleExtendTx,{oracleTtlType:Yn.type,oracleTtlValue:Yn.value,...t,callerId:await t.onAccount.address(t),oracleId:e});return{...await _a(n,t),...await Qa(e,t)}}async function Wa(e,t,n,r){const a=await ia(Jt.OracleResponseTx,{responseTtlType:Jn.type,responseTtlValue:Jn.value,...r,callerId:await r.onAccount.address(r),oracleId:e,queryId:t,response:n});return{...await _a(a,r),...await Qa(e,r)}}async function Qa(e,t){return{...await t.onNode.getOracleByPubkey(e),queries:(await t.onNode.getOracleQueriesByPubkey(e)).oracleQueries,...it({pollQueries:Ha,postQuery:Ka,respondToQuery:Wa,extendOracle:La,getQuery:Ga},(n=>{let[r,a]=n;return[r,function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];const o=r[r.length-1];return null!=o&&"object"==typeof o&&o.constructor===Object?Object.assign(o,{...t,...o}):r.push(t),a(e,...r)}]}))}}async function Ya(e,t,n){const r=await n.onAccount.address(n),a=await ia(Jt.OracleRegisterTx,{queryFee:Qn,oracleTtlValue:Yn.value,oracleTtlType:Yn.type,...n,accountId:r,queryFormat:e,responseFormat:t});return{...await _a(a,n),...await Qa(Tt(St(r),dt.OracleAddress),n)}}var Xa=C(9408).Buffer;async function Ja(e,t){const{contractId:n}=await Or(e,t);return null!=n}async function Za(e,t,n,r){var a;let{onAccount:i,onCompiler:o,onNode:s,...c}=r;const l=await i.address(c);if(await Ja(l,{onNode:s}))throw new A(`Account ${l} is already GA`);const u=await ja({onAccount:i,onCompiler:o,onNode:s,source:t}),d=await ia(Jt.GaAttachTx,{...c,onNode:s,code:await u.compile(),gasLimit:null!==(a=c.gasLimit)&&void 0!==a?a:await u._estimateGas("init",n,c),ownerId:l,callData:u.calldata.encode(u._name,"init",n),authFun:Et(e)}),p=vr(d),{hash:m,rawTx:h}=await _a(d,{onNode:s,onAccount:i,onCompiler:o,...c});return Object.freeze({owner:l,transaction:m,rawTx:h,gaContractId:p})}async function ei(e,t,n,r){var a,i;let{onAccount:o,onCompiler:s,onNode:c,...l}=r;const u=e=>Cr({encodedTx:e,signatures:[]},Jt.SignedTx);if(Object.keys(t).length<=0)throw new I("authData is required");const d=null!==(a=t.gasLimit)&&void 0!==a?a:er;if(d>er)throw new ae(`the maximum gasLimit value for ga authFun is ${er}, got ${d}`);const p=null!==(i=t.callData)&&void 0!==i?i:await(async()=>{if(null==t.source||null==t.args)throw new ae("Auth data must contain source code and arguments.");const e=await ja({onCompiler:s,onNode:c,source:t.source});return e.calldata.encode(e._name,n,t.args)})(),{abiVersion:m}=await ra(Jt.ContractCallTx,{onNode:c}),h=u(wr(e)),y={...l,tx:{...h,tx:h.txObject},gaId:await o.address(l),abiVersion:m,authData:p,gasLimit:d,vsn:2},{fee:f}=await aa(Jt.GaMetaTx,{...y,onNode:c}),{rlpEncoded:g}=Cr({...y,fee:f},Jt.GaMetaTx);return u(g).tx}async function ti(e,t){let{onNode:n}=t;const{networkId:r}=await n.getStatus();return new Uint8Array(Et(ot([Xa.from(r),St(e)])))}async function ni(e,t){let{authData:n,authFun:r,...a}=t;return ei(e,n,r,a)}async function ri(e){let{onNode:t}=e;return(await t.getCurrentKeyBlockHeight()).height}function ai(){return Math.floor(Math.random()*Math.floor(Number.MAX_SAFE_INTEGER))}const ii=ai;function oi(e,t){let{params:n,vsn:r,denomination:a}=t;return qn(e,(t=>Cr({...n,_computingMinFee:t},e,{vsn:r,denomination:a})))}const si=1579e3;let ci;!function(e){e[e.account=10]="account",e[e.signed=11]="signed",e[e.spend=12]="spend",e[e.oracleRegister=22]="oracleRegister",e[e.oracleQuery=23]="oracleQuery",e[e.oracleResponse=24]="oracleResponse",e[e.oracleExtend=25]="oracleExtend",e[e.nameClaim=32]="nameClaim",e[e.namePreClaim=33]="namePreClaim",e[e.nameUpdate=34]="nameUpdate",e[e.nameRevoke=35]="nameRevoke",e[e.nameTransfer=36]="nameTransfer",e[e.contract=40]="contract",e[e.contractCallResult=41]="contractCallResult",e[e.contractCreate=42]="contractCreate",e[e.contractCall=43]="contractCall",e[e.channelCreate=50]="channelCreate",e[e.channelDeposit=51]="channelDeposit",e[e.channelWithdraw=52]="channelWithdraw",e[e.channelCloseMutual=53]="channelCloseMutual",e[e.channelCloseSolo=54]="channelCloseSolo",e[e.channelSlash=55]="channelSlash",e[e.channelSettle=56]="channelSettle",e[e.channelOffChain=57]="channelOffChain",e[e.channel=58]="channel",e[e.channelSnapshotSolo=59]="channelSnapshotSolo",e[e.proofOfInclusion=60]="proofOfInclusion",e[e.stateTrees=62]="stateTrees",e[e.merklePatriciaTree=63]="merklePatriciaTree",e[e.merklePatriciaTreeValue=64]="merklePatriciaTreeValue",e[e.sophiaByteCode=70]="sophiaByteCode",e[e.gaAttach=80]="gaAttach",e[e.gaMeta=81]="gaMeta",e[e.payingFor=82]="payingFor",e[e.channelForceProgress=521]="channelForceProgress",e[e.channelOffChainUpdateTransfer=570]="channelOffChainUpdateTransfer",e[e.channelOffChainUpdateDeposit=571]="channelOffChainUpdateDeposit",e[e.channelOffChainUpdateWithdrawal=572]="channelOffChainUpdateWithdrawal",e[e.channelOffChainCreateContract=573]="channelOffChainCreateContract",e[e.channelOffChainCallContract=574]="channelOffChainCallContract",e[e.channelReconnect=575]="channelReconnect",e[e.contractsTree=621]="contractsTree",e[e.contractCallsTree=622]="contractCallsTree",e[e.channelsTree=623]="channelsTree",e[e.nameserviceTree=624]="nameserviceTree",e[e.oraclesTree=625]="oraclesTree",e[e.accountsTree=626]="accountsTree"}(ci||(ci={}));const li={account:1,name:2,commitment:3,oracle:4,contract:5,channel:6},ui={ak:li.account,nm:li.name,cm:li.commitment,ok:li.oracle,ct:li.contract,ch:li.channel},di=it(ui,(e=>{let[t,n]=e;return[n,t]}));let pi;!function(e){e.ak="account_pubkey",e.ok="oracle_pubkey",e.ct="contract_pubkey",e.ch="channel"}(pi||(pi={}));var mi=C(7445);function hi(e,t,n){return t in e?mi(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var yi=C(5039);const fi=()=>{const e=new Map;return{policy:{name:"request-queues",async sendRequest(t,n){var r;const a=t.headers.get("__queue");t.headers.delete("__queue");const i=async()=>n(t);if(null==a)return i();const o=(null!==(r=e.get(a))&&void 0!==r?r:Promise.resolve()).then(i,i);return e.set(a,o.then((async()=>at(750)))),o}},position:"perCall"}},gi=()=>{const e=new Map;return{policy:{name:"combine-requests",async sendRequest(t,n){var r;if("GET"!==t.method)return n(t);const a=JSON.stringify([t.url,t.body]),i=null!==(r=e.get(a))&&void 0!==r?r:n(t);e.set(a,i);try{return await i}finally{e.delete(a)}}},position:"perCall"}},Ni=e=>({policy:{name:"error-formatter",async sendRequest(t,n){try{return await n(t)}catch(t){var r;if(!(t instanceof yi.RestError)||null==t.request)throw t;if(null==(null===(r=t.response)||void 0===r?void 0:r.bodyAsText))throw t;let n;try{n=JSON.parse(t.response.bodyAsText)}catch(e){throw t}t.message=`${new URL(t.request.url).pathname.slice(1)} error`;const a=e(n);throw""!==a&&(t.message+=`:${a}`),t}}},position:"perCall"}),Ci=(e,t,n,r,a)=>({name:"version-check",async sendRequest(i,o){if(new URL(i.url).pathname===t)return o(i);const s=[await n,r,a];if(!function(e,t,n){const r=e=>e.split(/[-+]/)[0].split(".").map((e=>+e)),a=r(e),i=r(t),o=r(n),s=Math.max(...a,...i,...o)+1,c=e=>e.reverse().reduce(((e,t,n)=>e+t*s**n),0),l=c(a),u=c(i),d=c(o);return l>=u&&l<d}(...s))throw new V(e,...s);return o(i)}});var wi=C(4711);const bi={type:{name:"Composite",className:"Header",modelProperties:{hash:{serializedName:"hash",required:!0,type:{name:"String"}},height:{serializedName:"height",required:!0,type:{name:"String"}},prevHash:{serializedName:"prev_hash",required:!0,type:{name:"String"}},prevKeyHash:{serializedName:"prev_key_hash",required:!0,type:{name:"String"}},stateHash:{serializedName:"state_hash",required:!0,type:{name:"String"}},miner:{serializedName:"miner",type:{name:"String"}},beneficiary:{serializedName:"beneficiary",type:{name:"String"}},target:{serializedName:"target",type:{name:"String"}},pow:{constraints:{MinItems:42,MaxItems:42},serializedName:"pow",type:{name:"Sequence",element:{type:{name:"String"}}}},nonce:{serializedName:"nonce",type:{name:"String"}},time:{serializedName:"time",required:!0,type:{name:"String"}},version:{serializedName:"version",required:!0,type:{name:"String"}},info:{serializedName:"info",type:{name:"String"}},pofHash:{serializedName:"pof_hash",type:{name:"String"}},txsHash:{serializedName:"txs_hash",type:{name:"String"}},signature:{serializedName:"signature",type:{name:"String"}}}}},vi={type:{name:"Composite",className:"ErrorModel",modelProperties:{reason:{serializedName:"reason",required:!0,type:{name:"String"}}}}},xi={type:{name:"Composite",className:"KeyBlock",modelProperties:{hash:{serializedName:"hash",required:!0,type:{name:"String"}},height:{serializedName:"height",required:!0,type:{name:"String"}},prevHash:{serializedName:"prev_hash",required:!0,type:{name:"String"}},prevKeyHash:{serializedName:"prev_key_hash",required:!0,type:{name:"String"}},stateHash:{serializedName:"state_hash",required:!0,type:{name:"String"}},miner:{serializedName:"miner",required:!0,type:{name:"String"}},beneficiary:{serializedName:"beneficiary",required:!0,type:{name:"String"}},target:{serializedName:"target",required:!0,type:{name:"String"}},pow:{constraints:{MinItems:42,MaxItems:42},serializedName:"pow",type:{name:"Sequence",element:{type:{name:"String"}}}},nonce:{serializedName:"nonce",type:{name:"String"}},time:{serializedName:"time",required:!0,type:{name:"String"}},version:{serializedName:"version",required:!0,type:{name:"String"}},info:{serializedName:"info",required:!0,type:{name:"String"}}}}},Si={type:{name:"Composite",className:"HashResponse",modelProperties:{hash:{serializedName:"hash",required:!0,type:{name:"String"}}}}},Ti={type:{name:"Composite",className:"HeightResponse",modelProperties:{height:{serializedName:"height",required:!0,type:{name:"String"}}}}},_i={type:{name:"Composite",className:"MicroBlockHeader",modelProperties:{hash:{serializedName:"hash",required:!0,type:{name:"String"}},height:{serializedName:"height",required:!0,type:{name:"String"}},pofHash:{serializedName:"pof_hash",required:!0,type:{name:"String"}},prevHash:{serializedName:"prev_hash",required:!0,type:{name:"String"}},prevKeyHash:{serializedName:"prev_key_hash",required:!0,type:{name:"String"}},stateHash:{serializedName:"state_hash",required:!0,type:{name:"String"}},txsHash:{serializedName:"txs_hash",required:!0,type:{name:"String"}},signature:{serializedName:"signature",required:!0,type:{name:"String"}},time:{serializedName:"time",required:!0,type:{name:"String"}},version:{serializedName:"version",required:!0,type:{name:"String"}}}}},zi={type:{name:"Composite",className:"SignedTxs",modelProperties:{transactions:{serializedName:"transactions",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"SignedTx"}}}}}}},qi={type:{name:"Composite",className:"SignedTx",modelProperties:{tx:{serializedName:"tx",type:{name:"Composite",className:"Tx"}},blockHeight:{serializedName:"block_height",required:!0,type:{name:"String"}},blockHash:{serializedName:"block_hash",required:!0,type:{name:"String"}},hash:{serializedName:"hash",required:!0,type:{name:"String"}},signatures:{serializedName:"signatures",required:!0,type:{name:"Sequence",element:{type:{name:"String"}}}}}}},Ai={type:{name:"Composite",className:"Tx",uberParent:"Tx",polymorphicDiscriminator:{serializedName:"type",clientName:"type"},modelProperties:{recipientId:{serializedName:"recipient_id",type:{name:"String"}},amount:{serializedName:"amount",type:{name:"String"}},fee:{serializedName:"fee",required:!0,type:{name:"String"}},ttl:{serializedName:"ttl",type:{name:"String"}},senderId:{serializedName:"sender_id",type:{name:"String"}},nonce:{serializedName:"nonce",type:{name:"String"}},payload:{serializedName:"payload",type:{name:"String"}},initiatorId:{serializedName:"initiator_id",type:{name:"String"}},initiatorAmount:{serializedName:"initiator_amount",type:{name:"String"}},responderId:{serializedName:"responder_id",type:{name:"String"}},responderAmount:{serializedName:"responder_amount",type:{name:"String"}},channelReserve:{serializedName:"channel_reserve",type:{name:"String"}},lockPeriod:{serializedName:"lock_period",type:{name:"String"}},stateHash:{serializedName:"state_hash",type:{name:"String"}},delegateIds:{serializedName:"delegate_ids",type:{name:"Composite",className:"Delegates"}},channelId:{serializedName:"channel_id",type:{name:"String"}},fromId:{serializedName:"from_id",type:{name:"String"}},round:{serializedName:"round",type:{name:"String"}},toId:{serializedName:"to_id",type:{name:"String"}},update:{serializedName:"update",type:{name:"Composite",className:"OffChainUpdate"}},offchainTrees:{serializedName:"offchain_trees",type:{name:"String"}},initiatorAmountFinal:{serializedName:"initiator_amount_final",type:{name:"String"}},responderAmountFinal:{serializedName:"responder_amount_final",type:{name:"String"}},poi:{serializedName:"poi",type:{name:"String"}},initiatorDelegateIds:{serializedName:"initiator_delegate_ids",type:{name:"Sequence",element:{type:{name:"String"}}}},responderDelegateIds:{serializedName:"responder_delegate_ids",type:{name:"Sequence",element:{type:{name:"String"}}}},queryFormat:{serializedName:"query_format",type:{name:"String"}},responseFormat:{serializedName:"response_format",type:{name:"String"}},queryFee:{serializedName:"query_fee",type:{name:"String"}},oracleTtl:{serializedName:"oracle_ttl",type:{name:"Composite",className:"RelativeTTL"}},accountId:{serializedName:"account_id",type:{name:"String"}},abiVersion:{serializedName:"abi_version",type:{name:"String"}},oracleId:{serializedName:"oracle_id",type:{name:"String"}},query:{serializedName:"query",type:{name:"String"}},queryTtl:{serializedName:"query_ttl",type:{name:"Composite",className:"Ttl"}},responseTtl:{serializedName:"response_ttl",type:{name:"Composite",className:"RelativeTTL"}},queryId:{serializedName:"query_id",type:{name:"String"}},response:{serializedName:"response",type:{name:"String"}},commitmentId:{serializedName:"commitment_id",type:{name:"String"}},name:{serializedName:"name",type:{name:"String"}},nameSalt:{serializedName:"name_salt",type:{name:"String"}},nameFee:{serializedName:"name_fee",type:{name:"String"}},nameId:{serializedName:"name_id",type:{name:"String"}},nameTtl:{serializedName:"name_ttl",type:{name:"String"}},pointers:{serializedName:"pointers",type:{name:"Sequence",element:{type:{name:"Composite",className:"NamePointer"}}}},clientTtl:{serializedName:"client_ttl",type:{name:"String"}},ownerId:{serializedName:"owner_id",type:{name:"String"}},code:{serializedName:"code",type:{name:"String"}},vmVersion:{serializedName:"vm_version",type:{name:"String"}},deposit:{serializedName:"deposit",type:{name:"String"}},gas:{serializedName:"gas",type:{name:"String"}},gasPrice:{serializedName:"gas_price",type:{name:"String"}},callData:{serializedName:"call_data",type:{name:"String"}},callerId:{serializedName:"caller_id",type:{name:"String"}},contractId:{serializedName:"contract_id",type:{name:"String"}},authFun:{constraints:{Pattern:new RegExp("^(0x|0X)?[a-fA-F0-9]+$")},serializedName:"auth_fun",type:{name:"String"}},gaId:{serializedName:"ga_id",type:{name:"String"}},authData:{serializedName:"auth_data",type:{name:"String"}},tx:{serializedName:"tx",type:{name:"Composite",className:"SignedTx"}},payerId:{serializedName:"payer_id",type:{name:"String"}},version:{serializedName:"version",required:!0,type:{name:"String"}},type:{serializedName:"type",required:!0,type:{name:"Enum",allowedValues:["SpendTx","ChannelCreateTx","ChannelDepositTx","ChannelWithdrawTx","ChannelForceProgressTx","ChannelCloseMutualTx","ChannelCloseSoloTx","ChannelSlashTx","ChannelSettleTx","ChannelSnapshotSoloTx","ChannelSetDelegatesTx","OracleRegisterTx","OracleExtendTx","OracleQueryTx","OracleRespondTx","NamePreclaimTx","NameClaimTx","NameUpdateTx","NameTransferTx","NameRevokeTx","ContractCreateTx","ContractCallTx","GAAttachTx","GAMetaTx","PayingForTx"]}}}}},Pi={type:{name:"Composite",className:"Delegates",modelProperties:{initiator:{serializedName:"initiator",type:{name:"Sequence",element:{type:{name:"String"}}}},responder:{serializedName:"responder",type:{name:"Sequence",element:{type:{name:"String"}}}}}}},Ei={type:{name:"Composite",className:"OffChainUpdate",uberParent:"OffChainUpdate",polymorphicDiscriminator:{serializedName:"op",clientName:"op"},modelProperties:{op:{serializedName:"op",required:!0,type:{name:"String"}}}}},Ii={type:{name:"Composite",className:"RelativeTTL",modelProperties:{type:{defaultValue:"delta",isConstant:!0,serializedName:"type",type:{name:"String"}},value:{serializedName:"value",required:!0,type:{name:"String"}}}}},ki={type:{name:"Composite",className:"Ttl",modelProperties:{type:{serializedName:"type",required:!0,type:{name:"Enum",allowedValues:["delta","block"]}},value:{serializedName:"value",required:!0,type:{name:"String"}}}}},Oi={type:{name:"Composite",className:"NamePointer",modelProperties:{key:{serializedName:"key",required:!0,type:{name:"String"}},id:{serializedName:"id",required:!0,type:{name:"String"}}}}},Mi={type:{name:"Composite",className:"CountResponse",modelProperties:{count:{serializedName:"count",required:!0,type:{name:"String"}}}}},Ri={type:{name:"Composite",className:"Generation",modelProperties:{keyBlock:{serializedName:"key_block",type:{name:"Composite",className:"KeyBlock"}},microBlocks:{serializedName:"micro_blocks",required:!0,type:{name:"Sequence",element:{type:{name:"String"}}}}}}},Bi={type:{name:"Composite",className:"Account",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}},balance:{serializedName:"balance",required:!0,type:{name:"String"}},nonce:{serializedName:"nonce",required:!0,type:{name:"String"}},payable:{serializedName:"payable",type:{name:"Boolean"}},kind:{serializedName:"kind",type:{name:"Enum",allowedValues:["basic","generalized"]}},contractId:{serializedName:"contract_id",type:{name:"String"}},authFun:{serializedName:"auth_fun",type:{name:"String"}}}}},ji={type:{name:"Composite",className:"NextNonceResponse",modelProperties:{nextNonce:{serializedName:"next_nonce",required:!0,type:{name:"String"}}}}},Di={type:{name:"Composite",className:"DryRunInput",modelProperties:{top:{serializedName:"top",type:{name:"String"}},accounts:{serializedName:"accounts",type:{name:"Sequence",element:{type:{name:"Composite",className:"DryRunAccount"}}}},txs:{serializedName:"txs",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"DryRunInputItem"}}}},txEvents:{defaultValue:!1,serializedName:"tx_events",type:{name:"Boolean"}}}}},Vi={type:{name:"Composite",className:"DryRunAccount",modelProperties:{pubKey:{serializedName:"pub_key",required:!0,type:{name:"String"}},amount:{serializedName:"amount",required:!0,type:{name:"String"}}}}},Ui={type:{name:"Composite",className:"DryRunInputItem",modelProperties:{tx:{serializedName:"tx",type:{name:"String"}},callReq:{serializedName:"call_req",type:{name:"Composite",className:"DryRunCallReq"}}}}},Fi={type:{name:"Composite",className:"DryRunCallReq",modelProperties:{calldata:{serializedName:"calldata",required:!0,type:{name:"String"}},contract:{serializedName:"contract",required:!0,type:{name:"String"}},amount:{serializedName:"amount",type:{name:"String"}},gas:{serializedName:"gas",type:{name:"String"}},caller:{serializedName:"caller",type:{name:"String"}},nonce:{serializedName:"nonce",type:{name:"String"}},abiVersion:{serializedName:"abi_version",type:{name:"String"}},context:{serializedName:"context",type:{name:"Composite",className:"DryRunCallContext"}}}}},Hi={type:{name:"Composite",className:"DryRunCallContext",modelProperties:{tx:{serializedName:"tx",type:{name:"String"}},txHash:{serializedName:"tx_hash",type:{name:"String"}},stateful:{serializedName:"stateful",type:{name:"Boolean"}}}}},$i={type:{name:"Composite",className:"DryRunResults",modelProperties:{results:{serializedName:"results",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"DryRunResult"}}}},txEvents:{serializedName:"tx_events",type:{name:"Sequence",element:{type:{name:"Dictionary",value:{type:{name:"any"}}}}}}}}},Gi={type:{name:"Composite",className:"DryRunResult",modelProperties:{type:{serializedName:"type",required:!0,type:{name:"String"}},result:{serializedName:"result",required:!0,type:{name:"String"}},reason:{serializedName:"reason",type:{name:"String"}},callObj:{serializedName:"call_obj",type:{name:"Composite",className:"ContractCallObject"}}}}},Ki={type:{name:"Composite",className:"ContractCallObject",modelProperties:{callerId:{serializedName:"caller_id",required:!0,type:{name:"String"}},callerNonce:{serializedName:"caller_nonce",required:!0,type:{name:"String"}},height:{serializedName:"height",required:!0,type:{name:"String"}},contractId:{serializedName:"contract_id",required:!0,type:{name:"String"}},gasPrice:{serializedName:"gas_price",required:!0,type:{name:"String"}},gasUsed:{serializedName:"gas_used",required:!0,type:{name:"String"}},log:{serializedName:"log",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"Event"}}}},returnValue:{serializedName:"return_value",required:!0,type:{name:"String"}},returnType:{serializedName:"return_type",required:!0,type:{name:"Enum",allowedValues:["ok","error","revert"]}}}}},Li={type:{name:"Composite",className:"Event",modelProperties:{address:{serializedName:"address",required:!0,type:{name:"String"}},topics:{serializedName:"topics",required:!0,type:{name:"Sequence",element:{type:{name:"String"}}}},data:{serializedName:"data",required:!0,type:{name:"String"}}}}},Wi={type:{name:"Composite",className:"TxInfoObject",modelProperties:{callInfo:{serializedName:"call_info",type:{name:"Composite",className:"ContractCallObject"}},gaInfo:{serializedName:"ga_info",type:{name:"Composite",className:"GAObject"}},txInfo:{serializedName:"tx_info",type:{name:"String"}}}}},Qi={type:{name:"Composite",className:"GAObject",modelProperties:{callerId:{serializedName:"caller_id",required:!0,type:{name:"String"}},height:{serializedName:"height",required:!0,type:{name:"String"}},gasPrice:{serializedName:"gas_price",required:!0,type:{name:"String"}},gasUsed:{serializedName:"gas_used",required:!0,type:{name:"String"}},returnValue:{serializedName:"return_value",required:!0,type:{name:"String"}},returnType:{serializedName:"return_type",required:!0,type:{name:"Enum",allowedValues:["ok","error"]}},innerObject:{serializedName:"inner_object",type:{name:"Composite",className:"TxInfoObject"}}}}},Yi={type:{name:"Composite",className:"EncodedTx",modelProperties:{tx:{serializedName:"tx",required:!0,type:{name:"String"}}}}},Xi={type:{name:"Composite",className:"PostTxResponse",modelProperties:{txHash:{serializedName:"tx_hash",required:!0,type:{name:"String"}}}}},Ji={type:{name:"Composite",className:"ContractObject",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}},ownerId:{serializedName:"owner_id",required:!0,type:{name:"String"}},vmVersion:{serializedName:"vm_version",required:!0,type:{name:"String"}},abiVersion:{serializedName:"abi_version",required:!0,type:{name:"String"}},active:{serializedName:"active",required:!0,type:{name:"Boolean"}},referrerIds:{serializedName:"referrer_ids",required:!0,type:{name:"Sequence",element:{type:{name:"String"}}}},deposit:{serializedName:"deposit",required:!0,type:{name:"String"}}}}},Zi={type:{name:"Composite",className:"ByteCode",modelProperties:{bytecode:{serializedName:"bytecode",required:!0,type:{name:"String"}}}}},eo={type:{name:"Composite",className:"PoI",modelProperties:{poi:{serializedName:"poi",required:!0,type:{name:"String"}}}}},to={type:{name:"Composite",className:"RegisteredOracle",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}},queryFormat:{serializedName:"query_format",required:!0,type:{name:"String"}},responseFormat:{serializedName:"response_format",required:!0,type:{name:"String"}},queryFee:{serializedName:"query_fee",required:!0,type:{name:"String"}},ttl:{serializedName:"ttl",required:!0,type:{name:"String"}},abiVersion:{serializedName:"abi_version",required:!0,type:{name:"String"}}}}},no={type:{name:"Composite",className:"OracleQueries",modelProperties:{oracleQueries:{serializedName:"oracle_queries",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"OracleQuery"}}}}}}},ro={type:{name:"Composite",className:"OracleQuery",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}},senderId:{serializedName:"sender_id",required:!0,type:{name:"String"}},senderNonce:{serializedName:"sender_nonce",required:!0,type:{name:"String"}},oracleId:{serializedName:"oracle_id",required:!0,type:{name:"String"}},query:{serializedName:"query",required:!0,type:{name:"String"}},response:{serializedName:"response",required:!0,type:{name:"String"}},ttl:{serializedName:"ttl",required:!0,type:{name:"String"}},responseTtl:{serializedName:"response_ttl",type:{name:"Composite",className:"Ttl"}},fee:{serializedName:"fee",required:!0,type:{name:"String"}}}}},ao={type:{name:"Composite",className:"NameEntry",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}},owner:{serializedName:"owner",type:{name:"String"}},ttl:{serializedName:"ttl",required:!0,type:{name:"String"}},pointers:{serializedName:"pointers",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"NamePointer"}}}}}}},io={type:{name:"Composite",className:"Channel",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}},initiatorId:{serializedName:"initiator_id",required:!0,type:{name:"String"}},responderId:{serializedName:"responder_id",required:!0,type:{name:"String"}},channelAmount:{serializedName:"channel_amount",required:!0,type:{name:"String"}},initiatorAmount:{serializedName:"initiator_amount",required:!0,type:{name:"String"}},responderAmount:{serializedName:"responder_amount",required:!0,type:{name:"String"}},channelReserve:{serializedName:"channel_reserve",required:!0,type:{name:"String"}},delegateIds:{serializedName:"delegate_ids",type:{name:"Composite",className:"Delegates"}},stateHash:{serializedName:"state_hash",required:!0,type:{name:"String"}},round:{serializedName:"round",required:!0,type:{name:"String"}},soloRound:{serializedName:"solo_round",required:!0,type:{name:"String"}},lockPeriod:{serializedName:"lock_period",required:!0,type:{name:"String"}},lockedUntil:{serializedName:"locked_until",required:!0,type:{name:"String"}}}}},oo={type:{name:"Composite",className:"PeerPubKey",modelProperties:{pubkey:{serializedName:"pubkey",required:!0,type:{name:"String"}}}}},so={type:{name:"Composite",className:"Status",modelProperties:{genesisKeyBlockHash:{serializedName:"genesis_key_block_hash",required:!0,type:{name:"String"}},solutions:{serializedName:"solutions",required:!0,type:{name:"String"}},difficulty:{serializedName:"difficulty",required:!0,type:{name:"String"}},syncing:{serializedName:"syncing",required:!0,type:{name:"Boolean"}},syncProgress:{constraints:{InclusiveMaximum:100,InclusiveMinimum:0},serializedName:"sync_progress",type:{name:"Number"}},listening:{serializedName:"listening",required:!0,type:{name:"Boolean"}},protocols:{serializedName:"protocols",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"Protocol"}}}},nodeVersion:{serializedName:"node_version",required:!0,type:{name:"String"}},nodeRevision:{serializedName:"node_revision",required:!0,type:{name:"String"}},peerCount:{serializedName:"peer_count",required:!0,type:{name:"String"}},peerConnections:{serializedName:"peer_connections",type:{name:"Composite",className:"PeerConnections"}},pendingTransactionsCount:{serializedName:"pending_transactions_count",required:!0,type:{name:"String"}},networkId:{serializedName:"network_id",required:!0,type:{name:"String"}},peerPubkey:{serializedName:"peer_pubkey",required:!0,type:{name:"String"}},topKeyBlockHash:{serializedName:"top_key_block_hash",required:!0,type:{name:"String"}},topBlockHeight:{serializedName:"top_block_height",required:!0,type:{name:"String"}}}}},co={type:{name:"Composite",className:"Protocol",modelProperties:{version:{serializedName:"version",required:!0,type:{name:"String"}},effectiveAtHeight:{serializedName:"effective_at_height",required:!0,type:{name:"String"}}}}},lo={type:{name:"Composite",className:"PeerConnections",modelProperties:{inbound:{serializedName:"inbound",required:!0,type:{name:"String"}},outbound:{serializedName:"outbound",required:!0,type:{name:"String"}}}}},uo={type:{name:"Composite",className:"SpendTx",modelProperties:{recipientId:{serializedName:"recipient_id",required:!0,type:{name:"String"}},amount:{serializedName:"amount",required:!0,type:{name:"String"}},fee:{serializedName:"fee",required:!0,type:{name:"String"}},ttl:{serializedName:"ttl",type:{name:"String"}},senderId:{serializedName:"sender_id",required:!0,type:{name:"String"}},nonce:{serializedName:"nonce",type:{name:"String"}},payload:{serializedName:"payload",required:!0,type:{name:"String"}}}}},po={type:{name:"Composite",className:"OracleRegisterTx",modelProperties:{queryFormat:{serializedName:"query_format",required:!0,type:{name:"String"}},responseFormat:{serializedName:"response_format",required:!0,type:{name:"String"}},queryFee:{serializedName:"query_fee",required:!0,type:{name:"String"}},oracleTtl:{serializedName:"oracle_ttl",type:{name:"Composite",className:"Ttl"}},accountId:{serializedName:"account_id",required:!0,type:{name:"String"}},nonce:{serializedName:"nonce",type:{name:"String"}},fee:{serializedName:"fee",required:!0,type:{name:"String"}},ttl:{serializedName:"ttl",type:{name:"String"}},abiVersion:{serializedName:"abi_version",type:{name:"String"}}}}},mo={type:{name:"Composite",className:"OracleExtendTx",modelProperties:{fee:{serializedName:"fee",required:!0,type:{name:"String"}},oracleTtl:{serializedName:"oracle_ttl",type:{name:"Composite",className:"RelativeTTL"}},oracleId:{serializedName:"oracle_id",required:!0,type:{name:"String"}},nonce:{serializedName:"nonce",type:{name:"String"}},ttl:{serializedName:"ttl",type:{name:"String"}}}}},ho={type:{name:"Composite",className:"OracleQueryTx",modelProperties:{oracleId:{serializedName:"oracle_id",required:!0,type:{name:"String"}},query:{serializedName:"query",required:!0,type:{name:"String"}},queryFee:{serializedName:"query_fee",required:!0,type:{name:"String"}},queryTtl:{serializedName:"query_ttl",type:{name:"Composite",className:"Ttl"}},responseTtl:{serializedName:"response_ttl",type:{name:"Composite",className:"RelativeTTL"}},fee:{serializedName:"fee",required:!0,type:{name:"String"}},ttl:{serializedName:"ttl",type:{name:"String"}},senderId:{serializedName:"sender_id",required:!0,type:{name:"String"}},nonce:{serializedName:"nonce",type:{name:"String"}}}}},yo={type:{name:"Composite",className:"OracleRespondTx",modelProperties:{queryId:{serializedName:"query_id",required:!0,type:{name:"String"}},response:{serializedName:"response",required:!0,type:{name:"String"}},responseTtl:{serializedName:"response_ttl",type:{name:"Composite",className:"RelativeTTL"}},fee:{serializedName:"fee",required:!0,type:{name:"String"}},ttl:{serializedName:"ttl",type:{name:"String"}},oracleId:{serializedName:"oracle_id",required:!0,type:{name:"String"}},nonce:{serializedName:"nonce",type:{name:"String"}}}}},fo={type:{name:"Composite",className:"NamePreclaimTx",modelProperties:{commitmentId:{serializedName:"commitment_id",required:!0,type:{name:"String"}},fee:{serializedName:"fee",required:!0,type:{name:"String"}},ttl:{serializedName:"ttl",type:{name:"String"}},accountId:{serializedName:"account_id",required:!0,type:{name:"String"}},nonce:{serializedName:"nonce",type:{name:"String"}}}}},go={type:{name:"Composite",className:"NameClaimTx",modelProperties:{name:{serializedName:"name",required:!0,type:{name:"String"}},nameSalt:{serializedName:"name_salt",required:!0,type:{name:"String"}},nameFee:{serializedName:"name_fee",type:{name:"String"}},fee:{serializedName:"fee",required:!0,type:{name:"String"}},ttl:{serializedName:"ttl",type:{name:"String"}},accountId:{serializedName:"account_id",required:!0,type:{name:"String"}},nonce:{serializedName:"nonce",type:{name:"String"}}}}},No={type:{name:"Composite",className:"NameUpdateTx",modelProperties:{nameId:{serializedName:"name_id",required:!0,type:{name:"String"}},nameTtl:{serializedName:"name_ttl",required:!0,type:{name:"String"}},pointers:{serializedName:"pointers",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"NamePointer"}}}},clientTtl:{serializedName:"client_ttl",required:!0,type:{name:"String"}},fee:{serializedName:"fee",required:!0,type:{name:"String"}},ttl:{serializedName:"ttl",type:{name:"String"}},accountId:{serializedName:"account_id",required:!0,type:{name:"String"}},nonce:{serializedName:"nonce",type:{name:"String"}}}}},Co={type:{name:"Composite",className:"NameTransferTx",modelProperties:{nameId:{serializedName:"name_id",required:!0,type:{name:"String"}},recipientId:{serializedName:"recipient_id",required:!0,type:{name:"String"}},fee:{serializedName:"fee",required:!0,type:{name:"String"}},ttl:{serializedName:"ttl",type:{name:"String"}},accountId:{serializedName:"account_id",required:!0,type:{name:"String"}},nonce:{serializedName:"nonce",type:{name:"String"}}}}},wo={type:{name:"Composite",className:"NameRevokeTx",modelProperties:{nameId:{serializedName:"name_id",required:!0,type:{name:"String"}},fee:{serializedName:"fee",required:!0,type:{name:"String"}},ttl:{serializedName:"ttl",type:{name:"String"}},accountId:{serializedName:"account_id",required:!0,type:{name:"String"}},nonce:{serializedName:"nonce",type:{name:"String"}}}}},bo={type:{name:"Composite",className:"CommitmentId",modelProperties:{commitmentId:{serializedName:"commitment_id",required:!0,type:{name:"String"}}}}},vo={type:{name:"Composite",className:"NameHash",modelProperties:{nameId:{serializedName:"name_id",required:!0,type:{name:"String"}}}}},xo={type:{name:"Composite",className:"ChannelCreateTx",modelProperties:{initiatorId:{serializedName:"initiator_id",required:!0,type:{name:"String"}},initiatorAmount:{serializedName:"initiator_amount",required:!0,type:{name:"String"}},responderId:{serializedName:"responder_id",required:!0,type:{name:"String"}},responderAmount:{serializedName:"responder_amount",required:!0,type:{name:"String"}},channelReserve:{serializedName:"channel_reserve",required:!0,type:{name:"String"}},lockPeriod:{serializedName:"lock_period",required:!0,type:{name:"String"}},ttl:{serializedName:"ttl",type:{name:"String"}},fee:{serializedName:"fee",required:!0,type:{name:"String"}},nonce:{serializedName:"nonce",type:{name:"String"}},stateHash:{serializedName:"state_hash",required:!0,type:{name:"String"}},delegateIds:{serializedName:"delegate_ids",type:{name:"Composite",className:"Delegates"}}}}},So={type:{name:"Composite",className:"ChannelDepositTx",modelProperties:{channelId:{serializedName:"channel_id",required:!0,type:{name:"String"}},fromId:{serializedName:"from_id",required:!0,type:{name:"String"}},amount:{serializedName:"amount",required:!0,type:{name:"String"}},ttl:{serializedName:"ttl",type:{name:"String"}},fee:{serializedName:"fee",required:!0,type:{name:"String"}},nonce:{serializedName:"nonce",required:!0,type:{name:"String"}},stateHash:{serializedName:"state_hash",required:!0,type:{name:"String"}},round:{serializedName:"round",required:!0,type:{name:"String"}}}}},To={type:{name:"Composite",className:"ChannelWithdrawTx",modelProperties:{channelId:{serializedName:"channel_id",required:!0,type:{name:"String"}},toId:{serializedName:"to_id",required:!0,type:{name:"String"}},amount:{serializedName:"amount",required:!0,type:{name:"String"}},ttl:{serializedName:"ttl",type:{name:"String"}},fee:{serializedName:"fee",required:!0,type:{name:"String"}},nonce:{serializedName:"nonce",required:!0,type:{name:"String"}},stateHash:{serializedName:"state_hash",required:!0,type:{name:"String"}},round:{serializedName:"round",required:!0,type:{name:"String"}}}}},_o={type:{name:"Composite",className:"ChannelForceProgressTx",modelProperties:{channelId:{serializedName:"channel_id",required:!0,type:{name:"String"}},fromId:{serializedName:"from_id",required:!0,type:{name:"String"}},payload:{serializedName:"payload",required:!0,type:{name:"String"}},round:{serializedName:"round",required:!0,type:{name:"String"}},update:{serializedName:"update",type:{name:"Composite",className:"OffChainUpdate"}},stateHash:{serializedName:"state_hash",required:!0,type:{name:"String"}},ttl:{serializedName:"ttl",type:{name:"String"}},fee:{serializedName:"fee",required:!0,type:{name:"String"}},nonce:{serializedName:"nonce",type:{name:"String"}},offchainTrees:{serializedName:"offchain_trees",type:{name:"String"}}}}},zo={type:{name:"Composite",className:"ChannelCloseMutualTx",modelProperties:{channelId:{serializedName:"channel_id",required:!0,type:{name:"String"}},fromId:{serializedName:"from_id",required:!0,type:{name:"String"}},initiatorAmountFinal:{serializedName:"initiator_amount_final",required:!0,type:{name:"String"}},responderAmountFinal:{serializedName:"responder_amount_final",required:!0,type:{name:"String"}},ttl:{serializedName:"ttl",type:{name:"String"}},fee:{serializedName:"fee",required:!0,type:{name:"String"}},nonce:{serializedName:"nonce",required:!0,type:{name:"String"}}}}},qo={type:{name:"Composite",className:"ChannelCloseSoloTx",modelProperties:{channelId:{serializedName:"channel_id",required:!0,type:{name:"String"}},fromId:{serializedName:"from_id",required:!0,type:{name:"String"}},payload:{serializedName:"payload",required:!0,type:{name:"String"}},ttl:{serializedName:"ttl",type:{name:"String"}},fee:{serializedName:"fee",required:!0,type:{name:"String"}},nonce:{serializedName:"nonce",type:{name:"String"}},poi:{serializedName:"poi",required:!0,type:{name:"String"}}}}},Ao={type:{name:"Composite",className:"ChannelSlashTx",modelProperties:{channelId:{serializedName:"channel_id",required:!0,type:{name:"String"}},fromId:{serializedName:"from_id",required:!0,type:{name:"String"}},payload:{serializedName:"payload",required:!0,type:{name:"String"}},ttl:{serializedName:"ttl",type:{name:"String"}},fee:{serializedName:"fee",required:!0,type:{name:"String"}},nonce:{serializedName:"nonce",type:{name:"String"}},poi:{serializedName:"poi",required:!0,type:{name:"String"}}}}},Po={type:{name:"Composite",className:"ChannelSettleTx",modelProperties:{channelId:{serializedName:"channel_id",required:!0,type:{name:"String"}},fromId:{serializedName:"from_id",required:!0,type:{name:"String"}},initiatorAmountFinal:{serializedName:"initiator_amount_final",required:!0,type:{name:"String"}},responderAmountFinal:{serializedName:"responder_amount_final",required:!0,type:{name:"String"}},ttl:{serializedName:"ttl",type:{name:"String"}},fee:{serializedName:"fee",required:!0,type:{name:"String"}},nonce:{serializedName:"nonce",required:!0,type:{name:"String"}}}}},Eo={type:{name:"Composite",className:"ChannelSnapshotSoloTx",modelProperties:{channelId:{serializedName:"channel_id",required:!0,type:{name:"String"}},fromId:{serializedName:"from_id",required:!0,type:{name:"String"}},payload:{serializedName:"payload",required:!0,type:{name:"String"}},ttl:{serializedName:"ttl",type:{name:"String"}},fee:{serializedName:"fee",required:!0,type:{name:"String"}},nonce:{serializedName:"nonce",type:{name:"String"}}}}},Io={type:{name:"Composite",className:"ChannelSetDelegatesTx",modelProperties:{channelId:{serializedName:"channel_id",required:!0,type:{name:"String"}},fromId:{serializedName:"from_id",required:!0,type:{name:"String"}},initiatorDelegateIds:{serializedName:"initiator_delegate_ids",required:!0,type:{name:"Sequence",element:{type:{name:"String"}}}},responderDelegateIds:{serializedName:"responder_delegate_ids",required:!0,type:{name:"Sequence",element:{type:{name:"String"}}}},stateHash:{serializedName:"state_hash",required:!0,type:{name:"String"}},round:{serializedName:"round",required:!0,type:{name:"String"}},payload:{serializedName:"payload",required:!0,type:{name:"String"}},ttl:{serializedName:"ttl",type:{name:"String"}},fee:{serializedName:"fee",required:!0,type:{name:"String"}},nonce:{serializedName:"nonce",type:{name:"String"}}}}},ko={type:{name:"Composite",className:"PubKey",modelProperties:{pubKey:{serializedName:"pub_key",required:!0,type:{name:"String"}}}}},Oo={type:{name:"Composite",className:"PeerDetails",modelProperties:{host:{serializedName:"host",required:!0,type:{name:"String"}},port:{serializedName:"port",required:!0,type:{name:"String"}},firstSeen:{serializedName:"first_seen",required:!0,type:{name:"String"}},lastSeen:{serializedName:"last_seen",required:!0,type:{name:"String"}},genesisHash:{serializedName:"genesis_hash",required:!0,type:{name:"String"}},topHash:{serializedName:"top_hash",required:!0,type:{name:"String"}},topDifficulty:{serializedName:"top_difficulty",required:!0,type:{name:"String"}},networkId:{serializedName:"network_id",type:{name:"String"}},nodeVersion:{serializedName:"node_version",type:{name:"String"}},nodeRevision:{serializedName:"node_revision",type:{name:"String"}},nodeVendor:{serializedName:"node_vendor",type:{name:"String"}},nodeOs:{serializedName:"node_os",type:{name:"String"}}}}},Mo={type:{name:"Composite",className:"Peers",modelProperties:{peers:{serializedName:"peers",required:!0,type:{name:"Sequence",element:{type:{name:"String"}}}},blocked:{serializedName:"blocked",required:!0,type:{name:"Sequence",element:{type:{name:"String"}}}}}}},Ro={type:{name:"Composite",className:"PeerCount",modelProperties:{connected:{serializedName:"connected",type:{name:"Composite",className:"PeerCountConnected"}},available:{serializedName:"available",type:{name:"Composite",className:"PeerCountAvailable"}},blocked:{serializedName:"blocked",required:!0,type:{name:"String"}}}}},Bo={type:{name:"Composite",className:"PeerCountConnected",modelProperties:{inbound:{serializedName:"inbound",type:{name:"String"}},outbound:{serializedName:"outbound",type:{name:"String"}}}}},jo={type:{name:"Composite",className:"PeerCountAvailable",modelProperties:{verified:{serializedName:"verified",type:{name:"String"}},unverified:{serializedName:"unverified",type:{name:"String"}}}}},Do={type:{name:"Composite",className:"ContractCreateTx",modelProperties:{ownerId:{serializedName:"owner_id",required:!0,type:{name:"String"}},nonce:{serializedName:"nonce",type:{name:"String"}},code:{serializedName:"code",required:!0,type:{name:"String"}},vmVersion:{serializedName:"vm_version",required:!0,type:{name:"String"}},abiVersion:{serializedName:"abi_version",required:!0,type:{name:"String"}},deposit:{serializedName:"deposit",required:!0,type:{name:"String"}},amount:{serializedName:"amount",required:!0,type:{name:"String"}},gas:{serializedName:"gas",required:!0,type:{name:"String"}},gasPrice:{serializedName:"gas_price",required:!0,type:{name:"String"}},fee:{serializedName:"fee",required:!0,type:{name:"String"}},ttl:{serializedName:"ttl",type:{name:"String"}},callData:{serializedName:"call_data",required:!0,type:{name:"String"}}}}},Vo={type:{name:"Composite",className:"ContractCallTx",modelProperties:{callerId:{serializedName:"caller_id",required:!0,type:{name:"String"}},nonce:{serializedName:"nonce",type:{name:"String"}},contractId:{serializedName:"contract_id",required:!0,type:{name:"String"}},abiVersion:{serializedName:"abi_version",required:!0,type:{name:"String"}},fee:{serializedName:"fee",required:!0,type:{name:"String"}},ttl:{serializedName:"ttl",type:{name:"String"}},amount:{serializedName:"amount",required:!0,type:{name:"String"}},gas:{serializedName:"gas",required:!0,type:{name:"String"}},gasPrice:{serializedName:"gas_price",required:!0,type:{name:"String"}},callData:{serializedName:"call_data",required:!0,type:{name:"String"}}}}},Uo={type:{name:"Composite",className:"UnsignedTx",modelProperties:{tx:{serializedName:"tx",required:!0,type:{name:"String"}}}}},Fo={type:{name:"Composite",className:"TokenSupply",modelProperties:{accounts:{serializedName:"accounts",type:{name:"String"}},contracts:{serializedName:"contracts",type:{name:"String"}},contractOracles:{serializedName:"contract_oracles",type:{name:"String"}},locked:{serializedName:"locked",type:{name:"String"}},oracles:{serializedName:"oracles",type:{name:"String"}},oracleQueries:{serializedName:"oracle_queries",type:{name:"String"}},pendingRewards:{serializedName:"pending_rewards",type:{name:"String"}},total:{serializedName:"total",type:{name:"String"}}}}},Ho={type:{name:"Composite",className:"GAAttachTx",modelProperties:{ownerId:{serializedName:"owner_id",required:!0,type:{name:"String"}},nonce:{serializedName:"nonce",type:{name:"String"}},code:{serializedName:"code",required:!0,type:{name:"String"}},vmVersion:{serializedName:"vm_version",required:!0,type:{name:"String"}},abiVersion:{serializedName:"abi_version",required:!0,type:{name:"String"}},gas:{serializedName:"gas",required:!0,type:{name:"String"}},gasPrice:{serializedName:"gas_price",required:!0,type:{name:"String"}},fee:{serializedName:"fee",required:!0,type:{name:"String"}},ttl:{serializedName:"ttl",type:{name:"String"}},callData:{serializedName:"call_data",required:!0,type:{name:"String"}},authFun:{constraints:{Pattern:new RegExp("^(0x|0X)?[a-fA-F0-9]+$")},serializedName:"auth_fun",required:!0,type:{name:"String"}}}}},$o={type:{name:"Composite",className:"GAMetaTx",modelProperties:{gaId:{serializedName:"ga_id",required:!0,type:{name:"String"}},abiVersion:{serializedName:"abi_version",required:!0,type:{name:"String"}},gas:{serializedName:"gas",required:!0,type:{name:"String"}},gasPrice:{serializedName:"gas_price",required:!0,type:{name:"String"}},fee:{serializedName:"fee",required:!0,type:{name:"String"}},ttl:{serializedName:"ttl",type:{name:"String"}},authData:{serializedName:"auth_data",required:!0,type:{name:"String"}},tx:{serializedName:"tx",type:{name:"Composite",className:"SignedTx"}}}}},Go={type:{name:"Composite",className:"PayingForTx",modelProperties:{payerId:{serializedName:"payer_id",required:!0,type:{name:"String"}},fee:{serializedName:"fee",required:!0,type:{name:"String"}},nonce:{serializedName:"nonce",type:{name:"String"}},tx:{serializedName:"tx",type:{name:"Composite",className:"SignedTx"}}}}},Ko={type:{name:"Composite",className:"CheckTxInPoolResponse",modelProperties:{status:{serializedName:"status",required:!0,type:{name:"String"}}}}},Lo={serializedName:"OffChainTransfer",type:{name:"Composite",className:"OffChainTransfer",uberParent:"OffChainUpdate",polymorphicDiscriminator:Ei.type.polymorphicDiscriminator,modelProperties:{...Ei.type.modelProperties,from:{serializedName:"from",required:!0,type:{name:"String"}},to:{serializedName:"to",required:!0,type:{name:"String"}},amount:{serializedName:"amount",required:!0,type:{name:"String"}}}}},Wo={serializedName:"OffChainWithdrawal",type:{name:"Composite",className:"OffChainWithdrawal",uberParent:"OffChainUpdate",polymorphicDiscriminator:Ei.type.polymorphicDiscriminator,modelProperties:{...Ei.type.modelProperties,to:{serializedName:"to",required:!0,type:{name:"String"}},amount:{serializedName:"amount",required:!0,type:{name:"String"}}}}},Qo={serializedName:"OffChainDeposit",type:{name:"Composite",className:"OffChainDeposit",uberParent:"OffChainUpdate",polymorphicDiscriminator:Ei.type.polymorphicDiscriminator,modelProperties:{...Ei.type.modelProperties,from:{serializedName:"from",required:!0,type:{name:"String"}},amount:{serializedName:"amount",required:!0,type:{name:"String"}}}}},Yo={serializedName:"OffChainNewContract",type:{name:"Composite",className:"OffChainNewContract",uberParent:"OffChainUpdate",polymorphicDiscriminator:Ei.type.polymorphicDiscriminator,modelProperties:{...Ei.type.modelProperties,owner:{serializedName:"owner",required:!0,type:{name:"String"}},vmVersion:{serializedName:"vm_version",required:!0,type:{name:"String"}},abiVersion:{serializedName:"abi_version",required:!0,type:{name:"String"}},code:{serializedName:"code",type:{name:"Composite",className:"ByteCode"}},deposit:{serializedName:"deposit",required:!0,type:{name:"String"}},callData:{serializedName:"call_data",required:!0,type:{name:"String"}}}}},Xo={serializedName:"OffChainCallContract",type:{name:"Composite",className:"OffChainCallContract",uberParent:"OffChainUpdate",polymorphicDiscriminator:Ei.type.polymorphicDiscriminator,modelProperties:{...Ei.type.modelProperties,caller:{serializedName:"caller",required:!0,type:{name:"String"}},contract:{serializedName:"contract",required:!0,type:{name:"String"}},abiVersion:{serializedName:"abi_version",required:!0,type:{name:"String"}},amount:{serializedName:"amount",required:!0,type:{name:"String"}},gas:{serializedName:"gas",required:!0,type:{name:"String"}},gasPrice:{serializedName:"gas_price",required:!0,type:{name:"String"}},callData:{serializedName:"call_data",required:!0,type:{name:"String"}}}}},Jo={type:{name:"Composite",className:"CreateContractUnsignedTx",modelProperties:{...Uo.type.modelProperties,contractId:{serializedName:"contract_id",required:!0,type:{name:"String"}}}}};let Zo={"Tx.undefined":Ai,OffChainUpdate:Ei,"OffChainUpdate.OffChainTransfer":Lo,"OffChainUpdate.OffChainWithdrawal":Wo,"OffChainUpdate.OffChainDeposit":Qo,"OffChainUpdate.OffChainNewContract":Yo,"OffChainUpdate.OffChainCallContract":Xo};const es={parameterPath:"accept",mapper:{defaultValue:"application/json",isConstant:!0,serializedName:"Accept",type:{name:"String"}}},ts={parameterPath:"$host",mapper:{serializedName:"$host",required:!0,type:{name:"String"}},skipEncoding:!0},ns={parameterPath:"intAsString",mapper:{defaultValue:!1,serializedName:"int-as-string",type:{name:"Boolean"}}},rs={parameterPath:"hash",mapper:{serializedName:"hash",required:!0,type:{name:"String"}}},as={parameterPath:"height",mapper:{constraints:{InclusiveMaximum:0x10000000000000000,InclusiveMinimum:0},serializedName:"height",required:!0,type:{name:"Number"}}},is={parameterPath:"pubkey",mapper:{serializedName:"pubkey",required:!0,type:{name:"String"}}},os={parameterPath:["options","contentType"],mapper:{defaultValue:"application/json",isConstant:!0,serializedName:"Content-Type",type:{name:"String"}}},ss={parameterPath:"body",mapper:Di},cs={parameterPath:"body",mapper:Yi};class ls extends wi.ServiceClient{constructor(e,t){var n,r,a;if(void 0===e)throw new Error("'$host' cannot be null");t||(t={});const i="azsdk-js-node/1.0.0-beta.1",o=t.userAgentOptions&&t.userAgentOptions.userAgentPrefix?`${t.userAgentOptions.userAgentPrefix} ${i}`:`${i}`,s={requestContentType:"application/json; charset=utf-8",...t,userAgentOptions:{userAgentPrefix:o},baseUri:null!==(n=null!==(r=t.endpoint)&&void 0!==r?r:t.baseUri)&&void 0!==n?n:"{$host}"};super(s),null!==(a=t)&&void 0!==a&&a.pipeline&&t.pipeline.getOrderedPolicies().length>0&&(t.pipeline.getOrderedPolicies().some((e=>e.name===yi.bearerTokenAuthenticationPolicyName))||(this.pipeline.removePolicy({name:yi.bearerTokenAuthenticationPolicyName}),this.pipeline.addPolicy(yi.bearerTokenAuthenticationPolicy({scopes:`${s.baseUri}/.default`,challengeCallbacks:{authorizeRequestOnChallenge:wi.authorizeRequestOnClaimChallenge}})))),this.$host=e}getTopHeader(e){return this.sendOperationRequest({options:e},ds)}getCurrentKeyBlock(e){return this.sendOperationRequest({options:e},ps)}getCurrentKeyBlockHash(e){return this.sendOperationRequest({options:e},ms)}getCurrentKeyBlockHeight(e){return this.sendOperationRequest({options:e},hs)}getPendingKeyBlock(e){return this.sendOperationRequest({options:e},ys)}getKeyBlockByHash(e,t){return this.sendOperationRequest({hash:e,options:t},fs)}getKeyBlockByHeight(e,t){return this.sendOperationRequest({height:e,options:t},gs)}getMicroBlockHeaderByHash(e,t){return this.sendOperationRequest({hash:e,options:t},Ns)}getMicroBlockTransactionsByHash(e,t){return this.sendOperationRequest({hash:e,options:t},Cs)}getMicroBlockTransactionByHashAndIndex(e,t,n){return this.sendOperationRequest({hash:e,index:t,options:n},ws)}getMicroBlockTransactionsCountByHash(e,t){return this.sendOperationRequest({hash:e,options:t},bs)}getCurrentGeneration(e){return this.sendOperationRequest({options:e},vs)}getGenerationByHash(e,t){return this.sendOperationRequest({hash:e,options:t},xs)}getGenerationByHeight(e,t){return this.sendOperationRequest({height:e,options:t},Ss)}getAccountByPubkey(e,t){return this.sendOperationRequest({pubkey:e,options:t},Ts)}getAccountByPubkeyAndHeight(e,t,n){return this.sendOperationRequest({pubkey:e,height:t,options:n},_s)}getAccountByPubkeyAndHash(e,t,n){return this.sendOperationRequest({pubkey:e,hash:t,options:n},zs)}getPendingAccountTransactionsByPubkey(e,t){return this.sendOperationRequest({pubkey:e,options:t},qs)}getAccountNextNonce(e,t){return this.sendOperationRequest({pubkey:e,options:t},As)}protectedDryRunTxs(e,t){return this.sendOperationRequest({body:e,options:t},Ps)}getTransactionByHash(e,t){return this.sendOperationRequest({hash:e,options:t},Es)}getTransactionInfoByHash(e,t){return this.sendOperationRequest({hash:e,options:t},Is)}postTransaction(e,t){return this.sendOperationRequest({body:e,options:t},ks)}getContract(e,t){return this.sendOperationRequest({pubkey:e,options:t},Os)}getContractCode(e,t){return this.sendOperationRequest({pubkey:e,options:t},Ms)}getContractPoI(e,t){return this.sendOperationRequest({pubkey:e,options:t},Rs)}getOracleByPubkey(e,t){return this.sendOperationRequest({pubkey:e,options:t},Bs)}getOracleQueriesByPubkey(e,t){return this.sendOperationRequest({pubkey:e,options:t},js)}getOracleQueryByPubkeyAndQueryId(e,t,n){return this.sendOperationRequest({pubkey:e,queryId:t,options:n},Ds)}getNameEntryByName(e,t){return this.sendOperationRequest({name:e,options:t},Vs)}getChannelByPubkey(e,t){return this.sendOperationRequest({pubkey:e,options:t},Us)}getPeerPubkey(e){return this.sendOperationRequest({options:e},Fs)}getStatus(e){return this.sendOperationRequest({options:e},Hs)}getChainEnds(e){return this.sendOperationRequest({options:e},$s)}}const us=wi.createSerializer(c,!1),ds={path:"/v3/headers/top",httpMethod:"GET",responses:{200:{bodyMapper:bi},404:{bodyMapper:vi,isError:!0}},queryParameters:[ns],urlParameters:[ts],headerParameters:[es],serializer:us},ps={path:"/v3/key-blocks/current",httpMethod:"GET",responses:{200:{bodyMapper:xi},404:{bodyMapper:vi,isError:!0}},queryParameters:[ns],urlParameters:[ts],headerParameters:[es],serializer:us},ms={path:"/v3/key-blocks/current/hash",httpMethod:"GET",responses:{200:{bodyMapper:Si},404:{bodyMapper:vi,isError:!0}},queryParameters:[ns],urlParameters:[ts],headerParameters:[es],serializer:us},hs={path:"/v3/key-blocks/current/height",httpMethod:"GET",responses:{200:{bodyMapper:Ti},404:{bodyMapper:vi,isError:!0}},queryParameters:[ns],urlParameters:[ts],headerParameters:[es],serializer:us},ys={path:"/v3/key-blocks/pending",httpMethod:"GET",responses:{200:{bodyMapper:xi},400:{bodyMapper:vi,isError:!0},404:{bodyMapper:vi,isError:!0}},queryParameters:[ns],urlParameters:[ts],headerParameters:[es],serializer:us},fs={path:"/v3/key-blocks/hash/{hash}",httpMethod:"GET",responses:{200:{bodyMapper:xi},400:{bodyMapper:vi,isError:!0},404:{bodyMapper:vi,isError:!0}},queryParameters:[ns],urlParameters:[ts,rs],headerParameters:[es],serializer:us},gs={path:"/v3/key-blocks/height/{height}",httpMethod:"GET",responses:{200:{bodyMapper:xi},404:{bodyMapper:vi,isError:!0}},queryParameters:[ns],urlParameters:[ts,as],headerParameters:[es],serializer:us},Ns={path:"/v3/micro-blocks/hash/{hash}/header",httpMethod:"GET",responses:{200:{bodyMapper:_i},400:{bodyMapper:vi,isError:!0},404:{bodyMapper:vi,isError:!0}},queryParameters:[ns],urlParameters:[ts,rs],headerParameters:[es],serializer:us},Cs={path:"/v3/micro-blocks/hash/{hash}/transactions",httpMethod:"GET",responses:{200:{bodyMapper:zi},400:{bodyMapper:vi,isError:!0},404:{bodyMapper:vi,isError:!0}},queryParameters:[ns],urlParameters:[ts,rs],headerParameters:[es],serializer:us},ws={path:"/v3/micro-blocks/hash/{hash}/transactions/index/{index}",httpMethod:"GET",responses:{200:{bodyMapper:qi},400:{bodyMapper:vi,isError:!0},404:{bodyMapper:vi,isError:!0}},queryParameters:[ns],urlParameters:[ts,rs,{parameterPath:"index",mapper:{constraints:{InclusiveMinimum:1},serializedName:"index",required:!0,type:{name:"Number"}}}],headerParameters:[es],serializer:us},bs={path:"/v3/micro-blocks/hash/{hash}/transactions/count",httpMethod:"GET",responses:{200:{bodyMapper:Mi},400:{bodyMapper:vi,isError:!0},404:{bodyMapper:vi,isError:!0}},queryParameters:[ns],urlParameters:[ts,rs],headerParameters:[es],serializer:us},vs={path:"/v3/generations/current",httpMethod:"GET",responses:{200:{bodyMapper:Ri},404:{bodyMapper:vi,isError:!0}},queryParameters:[ns],urlParameters:[ts],headerParameters:[es],serializer:us},xs={path:"/v3/generations/hash/{hash}",httpMethod:"GET",responses:{200:{bodyMapper:Ri},400:{bodyMapper:vi,isError:!0},404:{bodyMapper:vi,isError:!0}},queryParameters:[ns],urlParameters:[ts,rs],headerParameters:[es],serializer:us},Ss={path:"/v3/generations/height/{height}",httpMethod:"GET",responses:{200:{bodyMapper:Ri},404:{bodyMapper:vi,isError:!0}},queryParameters:[ns],urlParameters:[ts,as],headerParameters:[es],serializer:us},Ts={path:"/v3/accounts/{pubkey}",httpMethod:"GET",responses:{200:{bodyMapper:Bi},400:{bodyMapper:vi,isError:!0},404:{bodyMapper:vi,isError:!0}},queryParameters:[ns],urlParameters:[ts,is],headerParameters:[es],serializer:us},_s={path:"/v3/accounts/{pubkey}/height/{height}",httpMethod:"GET",responses:{200:{bodyMapper:Bi},400:{bodyMapper:vi,isError:!0},404:{bodyMapper:vi,isError:!0}},queryParameters:[ns],urlParameters:[ts,as,is],headerParameters:[es],serializer:us},zs={path:"/v3/accounts/{pubkey}/hash/{hash}",httpMethod:"GET",responses:{200:{bodyMapper:Bi},400:{bodyMapper:vi,isError:!0},404:{bodyMapper:vi,isError:!0}},queryParameters:[ns],urlParameters:[ts,rs,is],headerParameters:[es],serializer:us},qs={path:"/v3/accounts/{pubkey}/transactions/pending",httpMethod:"GET",responses:{200:{bodyMapper:zi},400:{bodyMapper:vi,isError:!0},404:{bodyMapper:vi,isError:!0}},queryParameters:[ns],urlParameters:[ts,is],headerParameters:[es],serializer:us},As={path:"/v3/accounts/{pubkey}/next-nonce",httpMethod:"GET",responses:{200:{bodyMapper:ji},400:{bodyMapper:vi,isError:!0},404:{bodyMapper:vi,isError:!0}},queryParameters:[ns,{parameterPath:["options","strategy"],mapper:{defaultValue:"max",serializedName:"strategy",type:{name:"Enum",allowedValues:["max","continuity"]}}}],urlParameters:[ts,is],headerParameters:[es],serializer:us},Ps={path:"/v3/dry-run",httpMethod:"POST",responses:{200:{bodyMapper:$i},403:{bodyMapper:vi,isError:!0}},requestBody:ss,queryParameters:[ns],urlParameters:[ts],headerParameters:[es,os],mediaType:"json",serializer:us},Es={path:"/v3/transactions/{hash}",httpMethod:"GET",responses:{200:{bodyMapper:qi},400:{bodyMapper:vi,isError:!0},404:{bodyMapper:vi,isError:!0}},queryParameters:[ns],urlParameters:[ts,rs],headerParameters:[es],serializer:us},Is={path:"/v3/transactions/{hash}/info",httpMethod:"GET",responses:{200:{bodyMapper:Wi},400:{bodyMapper:vi,isError:!0},404:{bodyMapper:vi,isError:!0}},queryParameters:[ns],urlParameters:[ts,rs],headerParameters:[es],serializer:us},ks={path:"/v3/transactions",httpMethod:"POST",responses:{200:{bodyMapper:Xi},400:{bodyMapper:vi,isError:!0}},requestBody:cs,queryParameters:[ns],urlParameters:[ts],headerParameters:[es,os],mediaType:"json",serializer:us},Os={path:"/v3/contracts/{pubkey}",httpMethod:"GET",responses:{200:{bodyMapper:Ji},400:{bodyMapper:vi,isError:!0},404:{isError:!0}},queryParameters:[ns],urlParameters:[ts,is],headerParameters:[es],serializer:us},Ms={path:"/v3/contracts/{pubkey}/code",httpMethod:"GET",responses:{200:{bodyMapper:Zi},400:{bodyMapper:vi,isError:!0},404:{bodyMapper:vi,isError:!0}},queryParameters:[ns],urlParameters:[ts,is],headerParameters:[es],serializer:us},Rs={path:"/v3/contracts/{pubkey}/poi",httpMethod:"GET",responses:{200:{bodyMapper:eo},400:{bodyMapper:vi,isError:!0},404:{bodyMapper:vi,isError:!0}},queryParameters:[ns],urlParameters:[ts,is],headerParameters:[es],serializer:us},Bs={path:"/v3/oracles/{pubkey}",httpMethod:"GET",responses:{200:{bodyMapper:to},400:{bodyMapper:vi,isError:!0},404:{bodyMapper:vi,isError:!0}},queryParameters:[ns],urlParameters:[ts,is],headerParameters:[es],serializer:us},js={path:"/v3/oracles/{pubkey}/queries",httpMethod:"GET",responses:{200:{bodyMapper:no},400:{bodyMapper:vi,isError:!0},404:{bodyMapper:vi,isError:!0}},queryParameters:[ns,{parameterPath:["options","from"],mapper:{serializedName:"from",type:{name:"String"}}},{parameterPath:["options","limit"],mapper:{defaultValue:20,constraints:{InclusiveMaximum:1e3,InclusiveMinimum:1},serializedName:"limit",type:{name:"Number"}}},{parameterPath:["options","type"],mapper:{defaultValue:"all",serializedName:"type",type:{name:"Enum",allowedValues:["open","closed","all"]}}}],urlParameters:[ts,is],headerParameters:[es],serializer:us},Ds={path:"/v3/oracles/{pubkey}/queries/{query-id}",httpMethod:"GET",responses:{200:{bodyMapper:ro},400:{bodyMapper:vi,isError:!0},404:{bodyMapper:vi,isError:!0}},queryParameters:[ns],urlParameters:[ts,is,{parameterPath:"queryId",mapper:{serializedName:"query-id",required:!0,type:{name:"String"}}}],headerParameters:[es],serializer:us},Vs={path:"/v3/names/{name}",httpMethod:"GET",responses:{200:{bodyMapper:ao},400:{bodyMapper:vi,isError:!0},404:{bodyMapper:vi,isError:!0}},queryParameters:[ns],urlParameters:[ts,{parameterPath:"name",mapper:{serializedName:"name",required:!0,type:{name:"String"}}}],headerParameters:[es],serializer:us},Us={path:"/v3/channels/{pubkey}",httpMethod:"GET",responses:{200:{bodyMapper:io},400:{bodyMapper:vi,isError:!0},404:{bodyMapper:vi,isError:!0}},queryParameters:[ns],urlParameters:[ts,is],headerParameters:[es],serializer:us},Fs={path:"/v3/peers/pubkey",httpMethod:"GET",responses:{200:{bodyMapper:oo}},queryParameters:[ns],urlParameters:[ts],headerParameters:[es],serializer:us},Hs={path:"/v3/status",httpMethod:"GET",responses:{200:{bodyMapper:so}},queryParameters:[ns],urlParameters:[ts],headerParameters:[es],serializer:us},$s={path:"/v3/status/chain-ends",httpMethod:"GET",responses:{200:{bodyMapper:{type:{name:"Sequence",element:{type:{name:"String"}}}}}},queryParameters:[ns],urlParameters:[ts],headerParameters:[es],serializer:us};function Gs(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function Ks(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}async function Ls(){var e,t,n;let{networkId:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=null!==(e=null!=r?r:this.networkId)&&void 0!==e?e:null===(t=await(null===(n=this.api)||void 0===n?void 0:n.getStatus()))||void 0===t?void 0:t.networkId;if(null!=a)return a;throw new I("networkId is not provided")}const Ws=["balance","queryFee","fee","amount","nameFee","channelAmount","initiatorAmount","responderAmount","channelReserve","initiatorAmountFinal","responderAmountFinal","gasPrice","deposit"],Qs=["time","gas","gasUsed","nameSalt","nonce","nextNonce","height","blockHeight","top","topBlockHeight","ttl","nameTtl","clientTtl","inbound","outbound","peerCount","pendingTransactionsCount","effectiveAtHeight","version","solutions","round"];var Ys=new WeakSet,Xs=new WeakSet,Js=new WeakSet;class Zs extends ls{constructor(){super(...arguments),Gs(this,Js),Gs(this,Xs),Gs(this,Ys)}async sendOperationRequest(e,t){const n=it(e,(e=>{let[t,n]=e;return[t,Ks(this,Xs,tc).call(this,n)]}));return Ks(this,Js,nc).call(this,await super.sendOperationRequest(n,t))}}function ec(e,t){return Array.isArray(e)?e.map((e=>Ks(this,Ys,ec).call(this,e,t))):null!=e&&"object"==typeof e?it(e,(e=>{let[n,r]=e;return null==r?[n,r]:Ws.some((e=>e===n))?[n,t.bigInt(r)]:Qs.some((e=>e===n))?[n,t.number(r)]:[n,Ks(this,Ys,ec).call(this,r,t)]})):e}function tc(e){return Ks(this,Ys,ec).call(this,e,{bigInt:e=>e instanceof d()?e.toFixed():e.toString(),number:e=>e.toString()})}function nc(e){return Ks(this,Ys,ec).call(this,e,{bigInt:e=>BigInt(e),number:e=>+e})}class rc extends Zs{constructor(e){let{ignoreVersion:t=!1,...n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(super(e,{allowInsecureConnection:!0,additionalPolicies:[fi(),gi(),Ni((e=>` ${e.reason}`))],...n}),this.url=e,!t){const e=this.getStatus().then((e=>{let{nodeVersion:t}=e;return t}));this.pipeline.addPolicy(Ci("node","/v3/status",e,"6.2.0","7.0.0"))}this.intAsString=!0}async getNodeInfo(){const{nodeVersion:e,networkId:t,protocols:n,topBlockHeight:r}=await this.getStatus(),a=n.filter((e=>{let{effectiveAtHeight:t}=e;return r>=t})).reduce(((e,t)=>t.effectiveAtHeight>e.effectiveAtHeight?t:e),{effectiveAtHeight:-1,version:0}).version;return{url:this.url,nodeNetworkId:t,version:e,consensusProtocolVersion:a}}}var ac=C(9408).Buffer;class ic{constructor(){var e;let{networkId:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};hi(this,"getNetworkId",Ls),null!==(e=this.networkId)&&void 0!==e||(this.networkId=t)}async signTransaction(e){let{innerTx:t,networkId:n,...r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=[await this.getNetworkId({networkId:n})];!0===t&&a.push("inner_tx");const i=St(e),o=ot([ac.from(a.join("-")),Et(i)]);return Cr({encodedTx:i,signatures:[await this.sign(o,r)]},Jt.SignedTx).tx}async signMessage(e){let{returnHex:t=!1,...n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await this.sign(Bt(e),n);return t?ac.from(r).toString("hex"):r}async verifyMessage(e,t,n){return Dt(e,"string"==typeof t?ac.from(t,"hex"):t,St(await this.address(n)))}}var oc=C(9408).Buffer;const sc=new WeakMap;class cc extends ic{constructor(e){let{keypair:t,gaId:n,...r}=e;if(super(r),this.isGa=null!=n,this.isGa&&null!=n)return St(n),void sc.set(this,{publicKey:n});if(null==t)throw new I("Either gaId or keypair is required");if(!oc.isBuffer(t.secretKey)&&"string"==typeof t.secretKey&&!Ye(t.secretKey))throw new H("Secret key must be hex string or Buffer");const a="string"==typeof t.secretKey?oc.from(t.secretKey,"hex"):t.secretKey;if(!Vt(a,St(t.publicKey)))throw new H("Invalid Key Pair");sc.set(this,{secretKey:a,publicKey:t.publicKey})}async sign(e){if(this.isGa)throw new H("You are trying to sign data using generalized account without keypair");return Mt(e,sc.get(this).secretKey)}async signTransaction(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isGa||!0===t.innerTx)return super.signTransaction(e,t);const{authData:n,authFun:r,onCompiler:a,onNode:i}=t;if(null==r||null==n||null==a||null==i)throw new q("authData, authFun, onCompiler, onNode","provided",null);return ei(e,n,r,{onCompiler:a,onNode:i,onAccount:this})}async address(){return sc.get(this).publicKey}}const lc={type:{name:"Composite",className:"Contract",modelProperties:{code:{serializedName:"code",required:!0,type:{name:"String"}},options:{serializedName:"options",type:{name:"Composite",className:"CompileOpts"}}}}},uc={type:{name:"Composite",className:"CompileOpts",modelProperties:{backend:{serializedName:"backend",type:{name:"String"}},fileSystem:{serializedName:"file_system",type:{name:"Dictionary",value:{type:{name:"any"}}}},srcFile:{serializedName:"src_file",type:{name:"String"}}}}},dc={type:{name:"Composite",className:"Aci",modelProperties:{encodedAci:{serializedName:"encoded_aci",required:!0,type:{name:"Dictionary",value:{type:{name:"any"}}}},externalEncodedAci:{serializedName:"external_encoded_aci",type:{name:"Sequence",element:{type:{name:"Dictionary",value:{type:{name:"any"}}}}}},interface:{serializedName:"interface",required:!0,type:{name:"String"}}}}},pc={type:{name:"Composite",className:"CompilerError",modelProperties:{context:{serializedName:"context",type:{name:"String"}},message:{serializedName:"message",required:!0,type:{name:"String"}},pos:{serializedName:"pos",type:{name:"Composite",className:"ErrorPos"}},type:{serializedName:"type",required:!0,type:{name:"String"}}}}},mc={type:{name:"Composite",className:"ErrorPos",modelProperties:{col:{serializedName:"col",required:!0,type:{name:"Number"}},file:{serializedName:"file",type:{name:"String"}},line:{serializedName:"line",required:!0,type:{name:"Number"}}}}},hc={type:{name:"Composite",className:"ErrorModel",modelProperties:{reason:{serializedName:"reason",required:!0,type:{name:"String"}}}}},yc={type:{name:"Composite",className:"APIVersion",modelProperties:{apiVersion:{serializedName:"api-version",required:!0,type:{name:"String"}}}}},fc={type:{name:"Composite",className:"ByteCode",modelProperties:{bytecode:{serializedName:"bytecode",required:!0,type:{name:"String"}}}}},gc={type:{name:"Composite",className:"ByteCodeInput",modelProperties:{bytecode:{serializedName:"bytecode",required:!0,type:{name:"String"}}}}},Nc={type:{name:"Composite",className:"CompilerVersion",modelProperties:{version:{serializedName:"version",required:!0,type:{name:"String"}}}}},Cc={type:{name:"Composite",className:"SophiaCallResultInput",modelProperties:{callResult:{serializedName:"call-result",required:!0,type:{name:"String"}},callValue:{serializedName:"call-value",required:!0,type:{name:"String"}},function:{serializedName:"function",required:!0,type:{name:"String"}},options:{serializedName:"options",type:{name:"Composite",className:"CompileOpts"}},source:{serializedName:"source",required:!0,type:{name:"String"}}}}},wc={type:{name:"Composite",className:"BytecodeCallResultInput",modelProperties:{backend:{serializedName:"backend",type:{name:"String"}},bytecode:{serializedName:"bytecode",required:!0,type:{name:"String"}},callResult:{serializedName:"call-result",required:!0,type:{name:"String"}},callValue:{serializedName:"call-value",required:!0,type:{name:"String"}},function:{serializedName:"function",required:!0,type:{name:"String"}}}}},bc={type:{name:"Composite",className:"DecodedCallresult",modelProperties:{function:{serializedName:"function",required:!0,type:{name:"String"}},result:{serializedName:"result",required:!0,type:{name:"Dictionary",value:{type:{name:"any"}}}}}}},vc={type:{name:"Composite",className:"DecodeCalldataBytecode",modelProperties:{backend:{serializedName:"backend",type:{name:"String"}},bytecode:{serializedName:"bytecode",required:!0,type:{name:"String"}},calldata:{serializedName:"calldata",required:!0,type:{name:"String"}}}}},xc={type:{name:"Composite",className:"DecodedCalldata",modelProperties:{arguments:{serializedName:"arguments",required:!0,type:{name:"Sequence",element:{type:{name:"Dictionary",value:{type:{name:"any"}}}}}},function:{serializedName:"function",required:!0,type:{name:"String"}}}}},Sc={type:{name:"Composite",className:"DecodeCalldataSource",modelProperties:{calldata:{serializedName:"calldata",required:!0,type:{name:"String"}},function:{serializedName:"function",required:!0,type:{name:"String"}},options:{serializedName:"options",type:{name:"Composite",className:"CompileOpts"}},source:{serializedName:"source",required:!0,type:{name:"String"}}}}},Tc={type:{name:"Composite",className:"SophiaBinaryData",modelProperties:{data:{serializedName:"data",required:!0,type:{name:"String"}},sophiaType:{serializedName:"sophia-type",required:!0,type:{name:"String"}}}}},_c={type:{name:"Composite",className:"SophiaJsonData",modelProperties:{data:{serializedName:"data",required:!0,type:{name:"Dictionary",value:{type:{name:"any"}}}}}}},zc={type:{name:"Composite",className:"FunctionCallInput",modelProperties:{arguments:{serializedName:"arguments",required:!0,type:{name:"Sequence",element:{type:{name:"String"}}}},function:{serializedName:"function",required:!0,type:{name:"String"}},options:{serializedName:"options",type:{name:"Composite",className:"CompileOpts"}},source:{serializedName:"source",required:!0,type:{name:"String"}}}}},qc={type:{name:"Composite",className:"Calldata",modelProperties:{calldata:{serializedName:"calldata",required:!0,type:{name:"String"}}}}},Ac={type:{name:"Composite",className:"FateAssembler",modelProperties:{fateAssembler:{serializedName:"fate-assembler",required:!0,type:{name:"String"}}}}},Pc={type:{name:"Composite",className:"ValidateByteCodeInput",modelProperties:{bytecode:{serializedName:"bytecode",required:!0,type:{name:"String"}},options:{serializedName:"options",type:{name:"Composite",className:"CompileOpts"}},source:{serializedName:"source",required:!0,type:{name:"String"}}}}},Ec={parameterPath:["options","contentType"],mapper:{defaultValue:"application/json",isConstant:!0,serializedName:"Content-Type",type:{name:"String"}}},Ic={parameterPath:"body",mapper:lc},kc={parameterPath:"accept",mapper:{defaultValue:"application/json",isConstant:!0,serializedName:"Accept",type:{name:"String"}}},Oc={parameterPath:"$host",mapper:{serializedName:"$host",required:!0,type:{name:"String"}},skipEncoding:!0},Mc={parameterPath:"body",mapper:gc},Rc={parameterPath:"body",mapper:Cc},Bc={parameterPath:"body",mapper:wc},jc={parameterPath:"body",mapper:vc},Dc={parameterPath:"body",mapper:Sc},Vc={parameterPath:"body",mapper:Tc},Uc={parameterPath:"body",mapper:zc},Fc={parameterPath:"body",mapper:Pc};class Hc extends wi.ServiceClient{constructor(e,t){var n,r,a;if(void 0===e)throw new Error("'$host' cannot be null");t||(t={});const i="azsdk-js-compiler/1.0.0-beta.1",o=t.userAgentOptions&&t.userAgentOptions.userAgentPrefix?`${t.userAgentOptions.userAgentPrefix} ${i}`:`${i}`,s={requestContentType:"application/json; charset=utf-8",...t,userAgentOptions:{userAgentPrefix:o},baseUri:null!==(n=null!==(r=t.endpoint)&&void 0!==r?r:t.baseUri)&&void 0!==n?n:"{$host}"};super(s),null!==(a=t)&&void 0!==a&&a.pipeline&&t.pipeline.getOrderedPolicies().length>0&&(t.pipeline.getOrderedPolicies().some((e=>e.name===yi.bearerTokenAuthenticationPolicyName))||(this.pipeline.removePolicy({name:yi.bearerTokenAuthenticationPolicyName}),this.pipeline.addPolicy(yi.bearerTokenAuthenticationPolicy({scopes:`${s.baseUri}/.default`,challengeCallbacks:{authorizeRequestOnChallenge:wi.authorizeRequestOnClaimChallenge}})))),this.$host=e}generateACI(e,t){return this.sendOperationRequest({body:e,options:t},Gc)}api(e){return this.sendOperationRequest({options:e},Kc)}aPIVersion(e){return this.sendOperationRequest({options:e},Lc)}compileContract(e,t){return this.sendOperationRequest({body:e,options:t},Wc)}getCompilerVersion(e,t){return this.sendOperationRequest({body:e,options:t},Qc)}decodeCallResult(e,t){return this.sendOperationRequest({body:e,options:t},Yc)}decodeCallResultBytecode(e,t){return this.sendOperationRequest({body:e,options:t},Xc)}decodeCalldataBytecode(e,t){return this.sendOperationRequest({body:e,options:t},Jc)}decodeCalldataSource(e,t){return this.sendOperationRequest({body:e,options:t},Zc)}decodeData(e,t){return this.sendOperationRequest({body:e,options:t},el)}encodeCalldata(e,t){return this.sendOperationRequest({body:e,options:t},tl)}getFateAssemblerCode(e,t){return this.sendOperationRequest({body:e,options:t},nl)}validateByteCode(e,t){return this.sendOperationRequest({body:e,options:t},rl)}version(e){return this.sendOperationRequest({options:e},al)}}const $c=wi.createSerializer(l,!1),Gc={path:"/aci",httpMethod:"POST",responses:{200:{bodyMapper:dc},400:{bodyMapper:{type:{name:"Sequence",element:{type:{name:"Composite",className:"CompilerError"}}}},isError:!0}},requestBody:Ic,urlParameters:[Oc],headerParameters:[Ec,kc],mediaType:"json",serializer:$c},Kc={path:"/api",httpMethod:"GET",responses:{200:{bodyMapper:{type:{name:"Dictionary",value:{type:{name:"any"}}}}},400:{bodyMapper:hc,isError:!0}},urlParameters:[Oc],headerParameters:[kc],serializer:$c},Lc={path:"/api-version",httpMethod:"GET",responses:{200:{bodyMapper:yc},500:{bodyMapper:hc,isError:!0}},urlParameters:[Oc],headerParameters:[kc],serializer:$c},Wc={path:"/compile",httpMethod:"POST",responses:{200:{bodyMapper:fc},400:{bodyMapper:{type:{name:"Sequence",element:{type:{name:"Composite",className:"CompilerError"}}}},isError:!0}},requestBody:Ic,urlParameters:[Oc],headerParameters:[Ec,kc],mediaType:"json",serializer:$c},Qc={path:"/compiler-version",httpMethod:"POST",responses:{200:{bodyMapper:Nc},400:{bodyMapper:hc,isError:!0}},requestBody:Mc,urlParameters:[Oc],headerParameters:[Ec,kc],mediaType:"json",serializer:$c},Yc={path:"/decode-call-result",httpMethod:"POST",responses:{200:{bodyMapper:{type:{name:"any"}}},400:{bodyMapper:{type:{name:"Sequence",element:{type:{name:"Composite",className:"CompilerError"}}}},isError:!0}},requestBody:Rc,urlParameters:[Oc],headerParameters:[Ec,kc],mediaType:"json",serializer:$c},Xc={path:"/decode-call-result/bytecode",httpMethod:"POST",responses:{200:{bodyMapper:bc},400:{bodyMapper:{type:{name:"Sequence",element:{type:{name:"Composite",className:"CompilerError"}}}},isError:!0}},requestBody:Bc,urlParameters:[Oc],headerParameters:[Ec,kc],mediaType:"json",serializer:$c},Jc={path:"/decode-calldata/bytecode",httpMethod:"POST",responses:{200:{bodyMapper:xc},400:{bodyMapper:hc,isError:!0}},requestBody:jc,urlParameters:[Oc],headerParameters:[Ec,kc],mediaType:"json",serializer:$c},Zc={path:"/decode-calldata/source",httpMethod:"POST",responses:{200:{bodyMapper:xc},400:{bodyMapper:{type:{name:"Sequence",element:{type:{name:"Composite",className:"CompilerError"}}}},isError:!0}},requestBody:Dc,urlParameters:[Oc],headerParameters:[Ec,kc],mediaType:"json",serializer:$c},el={path:"/decode-data",httpMethod:"POST",responses:{200:{bodyMapper:_c},400:{bodyMapper:{type:{name:"Sequence",element:{type:{name:"Composite",className:"CompilerError"}}}},isError:!0}},requestBody:Vc,urlParameters:[Oc],headerParameters:[Ec,kc],mediaType:"json",serializer:$c},tl={path:"/encode-calldata",httpMethod:"POST",responses:{200:{bodyMapper:qc},400:{bodyMapper:{type:{name:"Sequence",element:{type:{name:"Composite",className:"CompilerError"}}}},isError:!0}},requestBody:Uc,urlParameters:[Oc],headerParameters:[Ec,kc],mediaType:"json",serializer:$c},nl={path:"/fate-assembler",httpMethod:"POST",responses:{200:{bodyMapper:Ac},400:{bodyMapper:hc,isError:!0}},requestBody:Mc,urlParameters:[Oc],headerParameters:[Ec,kc],mediaType:"json",serializer:$c},rl={path:"/validate-byte-code",httpMethod:"POST",responses:{200:{},400:{bodyMapper:{type:{name:"Sequence",element:{type:{name:"Composite",className:"CompilerError"}}}},isError:!0}},requestBody:Fc,urlParameters:[Oc],headerParameters:[Ec,kc],mediaType:"json",serializer:$c},al={path:"/version",httpMethod:"GET",responses:{200:{bodyMapper:Nc},500:{bodyMapper:hc,isError:!0}},urlParameters:[Oc],headerParameters:[kc],serializer:$c};class il extends Hc{constructor(e){let{ignoreVersion:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(super(e,{allowInsecureConnection:!0,additionalPolicies:[Ni((e=>{let t="";return"reason"in e&&(t+=` ${e.reason}${null!=e.parameter?` in ${e.parameter}`:""}${null!=e.info?` (${JSON.stringify(e.info)})`:""}`),Array.isArray(e)&&(t+=`\n${e.map((e=>`${e.type}:${e.pos.line}:${e.pos.col}: ${e.message}${null!=e.context?`(${e.context})`:""}`)).map((e=>e.trim())).join("\n")}`),t}))]}),!0!==t){const e=this.aPIVersion().then((e=>{let{apiVersion:t}=e;return t}));this.pipeline.addPolicy(Ci("compiler","/api-version",e,"6.1.0","7.0.0"))}}}function ol(e){try{return e()}catch(e){return new Proxy({},Object.fromEntries(["get","set","has"].map((t=>[t,()=>{throw e}]))))}}class sl{constructor(){let{nodes:e=[],compilerUrl:t,ignoreVersion:n=!1,...r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};hi(this,"_options",{denomination:Ue.AETTOS,amount:Zn}),hi(this,"pool",new Map),hi(this,"getNetworkId",Ls),Object.assign(this._options,r),e.forEach(((e,t)=>{let{name:n,instance:r}=e;return this.addNode(n,r,0===t)})),null==t?this.compilerApi=ol((()=>{throw new v("You can't use Compiler API. Compiler is not ready!")})):this.setCompilerUrl(t,{ignoreVersion:n})}setCompilerUrl(e){let{ignoreVersion:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.compilerApi=new il(e,{ignoreVersion:t})}get api(){return this.ensureNodeConnected(),this.pool.get(this.selectedNodeName)}addNode(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.pool.has(e))throw new xe(e);this.pool.set(e,t),(n||null==this.selectedNodeName)&&this.selectNode(e)}selectNode(e){if(!this.pool.has(e))throw new Se(`Node with name ${e} not in pool`);this.selectedNodeName=e}isNodeConnected(){return null!=this.selectedNodeName}ensureNodeConnected(){if(!this.isNodeConnected())throw new Se("You can't use Node API. Node is not connected or not defined!")}async getNodeInfo(){return this.ensureNodeConnected(),{name:this.selectedNodeName,...await this.api.getNodeInfo()}}async getNodesInPool(){return Promise.all(Array.from(this.pool.entries()).map((async e=>{let[t,n]=e;return{name:t,...await n.getNodeInfo()}})))}addresses(){return[]}async address(){let{onAccount:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._resolveAccount(e).address()}async sign(e){let{onAccount:t,...n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._resolveAccount(t).sign(e,n)}async signTransaction(e){let{onAccount:t,...n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._resolveAccount(t).signTransaction(e,{...n,networkId:await this.getNetworkId(n)})}async signMessage(e){let{onAccount:t,...n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._resolveAccount(t).signMessage(e,n)}async verifyMessage(e,t){let{onAccount:n,...r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._resolveAccount(n).verifyMessage(e,t,r)}_resolveAccount(e){switch(null!==e&&typeof e){case"string":throw new D("Address in AccountResolver");case"object":return t=e,["sign","address","signTransaction","signMessage"].some((e=>"function"!=typeof t[e]))?new cc({keypair:e}):e;default:throw new R(`Account should be an address (ak-prefixed string), keypair, or instance of AccountBase, got ${String(e)} instead`)}var t}_getOptions(){return{...this._options,onNode:ol((()=>this.api)),onAccount:ol((()=>this._resolveAccount())),onCompiler:ol((()=>this.compilerApi))}}async buildTx(e,t){return ia(e,{...this._getOptions(),...t})}}const{_buildTx:cl,...ll}=t,{InvalidTxError:ul,...dl}=e,pl={...dl,...ll,...r,...n,...i,...a,...o,...s};Object.assign(sl.prototype,it(pl,(e=>{let[t,n]=e;return[t,function(){const e=this._getOptions();for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];const i=r[r.length-1];return null!=i&&"object"==typeof i&&i.constructor===Object?r[r.length-1]={...e,...i,...null!=i.onAccount&&{onAccount:this._resolveAccount(i.onAccount)}}:r.push(e),n(...r)}]})));var ml=sl;class hl extends ml{constructor(){super(...arguments),hi(this,"accounts",{})}_resolveAccount(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.selectedAddress;if("string"==typeof e){const t=e;if(St(t),null==this.accounts[t])throw new $(e);e=this.accounts[t]}return super._resolveAccount(e)}addresses(){return Object.keys(this.accounts)}async addAccount(e){let{select:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=await e.address();this.accounts[n]=e,!0===t&&this.selectAccount(n)}removeAccount(e){null!=this.accounts[e]?(delete this.accounts[e],this.selectedAddress===e&&delete this.selectedAddress):console.warn(`removeAccount: Account for ${e} not available`)}selectAccount(e){if(St(e),null==this.accounts[e])throw new $(e);this.selectedAddress=e}}let yl,fl,gl,Nl,Cl;!function(e){e.to_waellet="to_waellet",e.to_aepp="to_aepp"}(yl||(yl={})),function(e){e.window="window",e.extension="extension"}(fl||(fl={})),function(e){e.subscribe="subscribe",e.unsubscribe="unsubscribe"}(gl||(gl={})),function(e){e.readyToConnect="connection.announcePresence",e.updateAddress="address.update",e.address="address.get",e.connect="connection.open",e.sign="transaction.sign",e.signMessage="message.sign",e.subscribeAddress="address.subscribe",e.updateNetwork="networkId.update",e.closeConnection="connection.close"}(Nl||(Nl={})),function(e){e.CONNECTED="CONNECTED",e.DISCONNECTED="DISCONNECTED",e.WAITING_FOR_CONNECTION_REQUEST="WAITING_FOR_CONNECTION_REQUEST"}(Cl||(Cl={}));const wl=[];class bl extends y{toJSON(){return{code:this.code,message:this.message,data:this.data}}static deserialize(e){const t=wl.find((t=>t.code===e.code));if(null==t)throw new U(`Can't find RpcError with code: ${e.code}`);return new t(e.data)}}class vl extends bl{constructor(e){super("Invalid transaction"),hi(this,"code",2),this.data=e,this.name="RpcInvalidTransactionError"}}hi(vl,"code",2),wl.push(vl);class xl extends bl{constructor(e){super("Broadcast failed"),hi(this,"code",3),this.data=e,this.name="RpcBroadcastError"}}hi(xl,"code",3),wl.push(xl);class Sl extends bl{constructor(e){super("Operation rejected by user"),hi(this,"code",4),this.data=e,this.name="RpcRejectedByUserError"}}hi(Sl,"code",4),wl.push(Sl);class Tl extends bl{constructor(){super("Unsupported Protocol Version"),hi(this,"code",5),this.name="RpcUnsupportedProtocolError"}}hi(Tl,"code",5),wl.push(Tl);class _l extends bl{constructor(e){super("Wallet deny your connection request"),hi(this,"code",9),this.data=e,this.name="RpcConnectionDenyError"}}hi(_l,"code",9),wl.push(_l);class zl extends bl{constructor(){super("You are not connected to the wallet"),hi(this,"code",10),this.name="RpcNotAuthorizeError"}}hi(zl,"code",10),wl.push(zl);class ql extends bl{constructor(e){super(`You are not subscribed for account ${e}`),hi(this,"code",11),this.data=e,this.name="RpcPermissionDenyError"}}hi(ql,"code",11),wl.push(ql);class Al extends bl{constructor(){super("The peer failed to execute your request due to unknown error"),hi(this,"code",12),this.name="RpcInternalError"}}hi(Al,"code",12),wl.push(Al);class Pl extends bl{constructor(){super("Method not found"),hi(this,"code",-32601),this.name="RpcMethodNotFoundError"}}hi(Pl,"code",-32601),wl.push(Pl);var El=C(9408).Buffer;class Il extends ic{constructor(e){let{rpcClient:t,address:n,...r}=e;super(r),this._rpcClient=t,this._address=n}async sign(){throw new D("RAW signing using wallet")}async address(){return this._address}async signTransaction(e){let{innerTx:t,networkId:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null!=t)throw new D("innerTx option in AccountRpc");return(await this._rpcClient.request(Nl.sign,{onAccount:this._address,tx:e,returnSigned:!0,networkId:n})).signedTransaction}async signMessage(e){let{returnHex:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{signature:n}=await this._rpcClient.request(Nl.signMessage,{onAccount:this._address,message:e});return t?n:El.from(n,"hex")}}function kl(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function Ol(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,kl(e,t,"get"))}function Ml(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,kl(e,t,"set"),n),n}function Rl(e,t){jl(e,t),t.add(e)}function Bl(e,t,n){jl(e,t),t.set(e,n)}function jl(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Dl(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}var Vl=new WeakMap,Ul=new WeakMap,Fl=new WeakMap,Hl=new WeakSet,$l=new WeakSet,Gl=new WeakSet,Kl=new WeakSet;class Ll{constructor(e,t,n){Rl(this,Kl),Rl(this,Gl),Rl(this,$l),Rl(this,Hl),Bl(this,Vl,{writable:!0,value:new Map}),Bl(this,Ul,{writable:!0,value:0}),Bl(this,Fl,{writable:!0,value:void 0}),this.connection=e,Ml(this,Fl,n),e.connect(Dl(this,Hl,Wl).bind(this),t)}async request(e,t){return Dl(this,$l,Ql).call(this,Ml(this,Ul,Ol(this,Ul)+1),e,t),new Promise(((e,t)=>{Ol(this,Vl).set(Ol(this,Ul),{resolve:e,reject:t})}))}notify(e,t){Dl(this,$l,Ql).call(this,void 0,e,t)}}async function Wl(e,t){if("2.0"!==(null==e?void 0:e.jsonrpc))throw new W(JSON.stringify(e));if("result"in e||"error"in e)return void Dl(this,Kl,Xl).call(this,e);const n=e;let r,a;try{if(!(n.method in Ol(this,Fl)))throw new Pl;const e=n.method;r=await Ol(this,Fl)[e](n.params,t)}catch(e){a=e instanceof bl?e:new Al}null!=n.id&&Dl(this,Gl,Yl).call(this,n.id,n.method,r,a)}function Ql(e,t,n){this.connection.sendMessage({jsonrpc:"2.0",...null!=e?{id:e}:{},method:t,...null!=n?{params:n}:{}})}function Yl(e,t,n,r){this.connection.sendMessage({jsonrpc:"2.0",id:e,method:t,...null!=r?{error:r}:{result:n}})}function Xl(e){let{id:t,error:n,result:r}=e;const a=Ol(this,Vl).get(t);if(null==a)throw new Q(t);null!=n?a.reject(bl.deserialize(n)):a.resolve(r),Ol(this,Vl).delete(t)}class Jl extends ml{constructor(e){let{name:t,onAddressChange:n=(()=>{}),onDisconnect:r=(()=>{}),onNetworkChange:a=(()=>{}),...i}=e;super(i),this.onAddressChange=n,this.onDisconnect=r,this.onNetworkChange=a,this.name=t}_resolveAccount(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.addresses()[0];if("string"==typeof e){var t;const n=e;if(St(n),!m()(t=this.addresses()).call(t,n))throw new Y(n);e=new Il({rpcClient:this.rpcClient,address:n})}return null==e&&this._ensureAccountAccess(),super._resolveAccount(e)}addresses(){if(null==this._accounts)return[];const e=Object.keys(this._accounts.current)[0];return[...null!=e?[e]:[],...Object.keys(this._accounts.connected)]}async connectToWallet(e){let t,{connectNode:n=!1,name:r="wallet-node",select:a=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null!=this.rpcClient)throw new je("You are already connected to wallet");const i=new Ll(e,(()=>{delete this.rpcClient,delete this._accounts,this.onDisconnect(t)}),{[Nl.updateAddress]:e=>{this._accounts=e,this.onAddressChange(e)},[Nl.updateNetwork]:e=>{const{node:t}=e;null!=t&&this.addNode(t.name,new rc(t.url),!0),this.onNetworkChange(e)},[Nl.closeConnection]:e=>{t=e,i.connection.disconnect()},[Nl.readyToConnect]:()=>{}}),{node:o,...s}=await i.request(Nl.connect,{name:this.name,version:1,connectNode:n});if(n){if(null==o)throw new Ve("Missing URLs of the Node");this.addNode(r,new rc(o.url),a)}return this.rpcClient=i,s}disconnectWallet(){this._ensureConnected(),this.rpcClient.notify(Nl.closeConnection,{reason:"bye"}),this.rpcClient.connection.disconnect()}async askAddresses(){return this._ensureAccountAccess(),this.rpcClient.request(Nl.address,void 0)}async subscribeAddress(e,t){this._ensureConnected();const n=await this.rpcClient.request(Nl.subscribeAddress,{type:e,value:t});return this._accounts=n.address,n}_ensureConnected(){if(null==this.rpcClient)throw new De("You are not connected to Wallet")}_ensureAccountAccess(){if(this._ensureConnected(),0===this.addresses().length)throw new J}}var Zl=C(2716);const eu=C.n(Zl)()({storeAsString:!0}),tu=e=>{if("object"==typeof e&&null!==e&&e.constructor===Object)return it(e,(e=>{let[t,n]=e;return[t,tu(n)]}));if(Array.isArray(e))return e.map((e=>tu(e)));if("string"==typeof e&&new(d())(e).toString(10)===e){const t=new(d())(e);return t.toJSON=()=>t.toString(10),t}return e};var nu={stringify:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return eu.stringify(tu(t[0]),...t.slice(1))},parse:eu.parse};class ru extends hl{constructor(e){let{name:t,id:n,type:r,onConnection:a,onSubscription:i,onSign:o,onDisconnect:s,onAskAccounts:c,onMessageSign:l,...u}=e;super(u),this.onConnection=a,this.onSubscription=i,this.onSign=o,this.onDisconnect=s,this.onAskAccounts=c,this.onMessageSign=l,this._clients=new Map,this.name=t,this.id=n,this._type=r}_pushAccountsToApps(){Array.from(this._clients.keys()).filter((e=>this._isRpcClientSubscribed(e))).map((e=>this._getClient(e).rpc)).forEach((e=>e.notify(Nl.updateAddress,this.getAccounts())))}selectAccount(e){super.selectAccount(e),this._pushAccountsToApps()}async addAccount(e,t){await super.addAccount(e,t),this._pushAccountsToApps()}_getNode(){return this.ensureNodeConnected(),{node:{url:this.api.url,name:this.selectedNodeName}}}async selectNode(e){super.selectNode(e);const t=await this.getNetworkId();Array.from(this._clients.keys()).filter((e=>this._isRpcClientConnected(e))).map((e=>this._getClient(e))).forEach((e=>{e.rpc.notify(Nl.updateNetwork,{networkId:t,...e.connectNode&&this._getNode()})}))}_getClient(e){const t=this._clients.get(e);if(null==t)throw new X(e);return t}_isRpcClientSubscribed(e){return this._isRpcClientConnected(e)&&0!==this._getClient(e).addressSubscription.size}_isRpcClientConnected(e){return Cl.CONNECTED===this._getClient(e).status&&this._getClient(e).rpc.connection.isConnected()}_disconnectRpcClient(e){const t=this._getClient(e);t.rpc.connection.disconnect(),t.status=Cl.DISCONNECTED,t.addressSubscription=new Set}removeRpcClient(e){this._disconnectRpcClient(e),this._clients.delete(e)}addRpcClient(e){const t=(0,Wr.v4)();let n;const r={id:t,status:Cl.WAITING_FOR_CONNECTION_REQUEST,addressSubscription:new Set,connectNode:!1,rpc:new Ll(e,(()=>{this._clients.delete(t),this.onDisconnect(t,n)}),{[Nl.closeConnection]:e=>{n=e,this._disconnectRpcClient(t)},[Nl.connect]:async(e,n)=>{let{name:a,version:i,icons:o,connectNode:s}=e;if(1!==i)throw new Tl;return await this.onConnection(t,{name:a,icons:o,connectNode:s},n),r.status=Cl.CONNECTED,r.connectNode=s,{...await this.getWalletInfo(),...s&&this._getNode()}},[Nl.subscribeAddress]:async(e,n)=>{let{type:a,value:i}=e;if(!this._isRpcClientConnected(t))throw new zl;switch(await this.onSubscription(t,{type:a,value:i},n),a){case gl.subscribe:r.addressSubscription.add(i);break;case gl.unsubscribe:r.addressSubscription.delete(i);break;default:throw new U(`Unknown subscription type: ${a}`)}return{subscription:Array.from(r.addressSubscription),address:this.getAccounts()}},[Nl.address]:async(e,n)=>{if(!this._isRpcClientSubscribed(t))throw new zl;return await this.onAskAccounts(t,e,n),this.addresses()},[Nl.sign]:async(e,n)=>{var r,a,i,o;let{tx:s,onAccount:c,returnSigned:l}=e;if(!this._isRpcClientConnected(t))throw new zl;if(null!==(r=c)&&void 0!==r||(c=await this.address()),!m()(a=this.addresses()).call(a,c))throw new ql(c);const u=await this.onSign(t,{tx:s,returnSigned:l,onAccount:c},n);if(c=null!==(i=null==u?void 0:u.onAccount)&&void 0!==i?i:c,s=null!==(o=null==u?void 0:u.tx)&&void 0!==o?o:s,l)return{signedTransaction:await this.signTransaction(s,{onAccount:c})};try{return nu.parse(nu.stringify({transactionHash:await this.send(s,{onAccount:c,verify:!1})}))}catch(e){const t=await _r(s,this.api);if(t.length>0)throw new vl(t);throw new xl(e.message)}},[Nl.signMessage]:async(e,n)=>{var r,a,i;let{message:o,onAccount:s}=e;if(!this._isRpcClientConnected(t))throw new zl;if(null!==(r=s)&&void 0!==r||(s=await this.address()),!m()(a=this.addresses()).call(a,s))throw new ql(s);const c=await this.onMessageSign(t,{message:o,onAccount:s},n);return s=null!==(i=null==c?void 0:c.onAccount)&&void 0!==i?i:s,{signature:await this.signMessage(o,{onAccount:s,returnHex:!0})}}})};return this._clients.set(t,r),t}async shareWalletInfo(e){this._getClient(e).rpc.notify(Nl.readyToConnect,await this.getWalletInfo())}async getWalletInfo(){return{id:this.id,name:this.name,networkId:await this.getNetworkId(),origin:window.location.origin,type:this._type}}getAccounts(){return{current:null!=this.selectedAddress?{[this.selectedAddress]:{}}:{},connected:this.addresses().filter((e=>e!==this.selectedAddress)).reduce(((e,t)=>({...e,[t]:{}})),{})}}}var au=C(8079),iu=C(3735);const ou=new WeakMap,su=new WeakMap,cu=new WeakMap,lu=new WeakMap,uu=new WeakMap,du=new WeakMap,pu=new WeakMap,mu=new WeakMap,hu=new WeakMap,yu=new WeakMap,fu=new WeakMap,gu=new WeakMap,Nu=new WeakMap,Cu=new WeakMap,wu=new WeakMap,bu=new WeakMap;function vu(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];const[i,...o]=r;null===(t=du.get(e))||void 0===t||t.emit(i,...o)}function xu(e,t){var n;if(null==t)throw new re;lu.set(e,t),null!=(null==t||null===(n=t.handler)||void 0===n?void 0:n.enter)&&t.handler.enter(e),zu(e)}function Su(e,t){t!==su.get(e)&&(su.set(e,t),vu(e,"statusChanged",t))}function Tu(e,t){cu.set(e,t),vu(e,"stateChanged",t)}function _u(e,t){var n,r,a;null!==(n=null===(r=ou.get(e))||void 0===r?void 0:r.debug)&&void 0!==n&&n&&console.log("Send message: ",t),null===(a=uu.get(e))||void 0===a||a.send(nu.stringify(t))}async function zu(e){var t;const n=yu.get(e),r=null!==(t=hu.get(e))&&void 0!==t?t:[];if(Boolean(n)||0===r.length)return;const a=lu.get(e);if(null==a)return;const i=r.findIndex((t=>t.guard(e,a)));if(-1===i)return;hu.set(e,r.filter(((e,t)=>i!==t))),yu.set(e,!0);const o=await Promise.resolve(r[i].action(e,a));yu.set(e,!1),xu(e,o)}function qu(e,t,n){var r;const a=null!==(r=hu.get(e))&&void 0!==r?r:[];hu.set(e,[...a,{guard:t,action:n}]),zu(e)}async function Au(e,t){const n=lu.get(e);if(null==n)throw new re;const{handler:r,state:a}=n;xu(e,await Promise.resolve(r(e,t,a)))}function Pu(e){var t;null===(t=uu.get(e))||void 0===t||t.close();const n=Cu.get(e),r=wu.get(e);null!=n&&clearTimeout(n),null!=r&&clearTimeout(r)}function Eu(e){const t=Cu.get(e),n=wu.get(e);null!=t&&clearTimeout(t),null!=n&&clearTimeout(n),Cu.set(e,setTimeout((()=>{_u(e,{jsonrpc:"2.0",method:"channels.system",params:{action:"ping"}}),wu.set(e,setTimeout((()=>{Pu(e),vu(e,"error",new te)}),5e3))}),1e4))}async function Iu(e,t,n){return new Promise(((r,a)=>{var i,o,s;const c=null!==(i=fu.get(e))&&void 0!==i?i:0,l=null!==(o=fu.set(e,c+1).get(e))&&void 0!==o?o:1;null===(s=Nu.get(e))||void 0===s||s.set(l,(e=>{if(null!=e.error){var t;const[{message:n}={message:""}]=null!==(t=e.error.data)&&void 0!==t?t:[];return a(new Z(e.error.message+n))}return r(e.result)})),_u(e,{jsonrpc:"2.0",method:t,id:l,params:n})}))}async function ku(e,t,n,r){let{url:a,...i}=r;ou.set(e,{url:a,...i}),lu.set(e,{handler:t}),du.set(e,new iu.EventEmitter),fu.set(e,0),Nu.set(e,new Map),pu.set(e,[]);const o=new URL(a);Object.entries(i).filter((e=>{var t;let[n]=e;return!m()(t=["sign","debug"]).call(t,n)})).forEach((e=>{let[t,n]=e;return o.searchParams.set(t.replace(/[A-Z]/g,(e=>`_${e.toLowerCase()}`)),n)})),o.searchParams.set("protocol","json-rpc"),Su(e,"connecting");const s=new au.w3cwebsocket(o.toString());await new Promise(((t,r)=>{Object.assign(s,{onerror:r,onopen:async()=>{if(t(),Su(e,"connected"),null!=i.reconnectTx){xu(e,{handler:n});const t=(await Iu(e,"channels.get.offchain_state",{})).signed_tx;Tu(e,t)}Eu(e)},onclose:()=>{Su(e,"disconnected");const t=Cu.get(e),n=wu.get(e);null!=t&&clearTimeout(t),null!=n&&clearTimeout(n)},onmessage:t=>{let{data:n}=t;return function(e,t){var n,r,a;const i=nu.parse(t);if(null!==(n=null===(r=ou.get(e))||void 0===r?void 0:r.debug)&&void 0!==n&&n&&console.log("Receive message: ",i),null==i.id)"channels.message"!==i.method?"channels.system.pong"!==i.method?(null===(a=pu.get(e))||void 0===a||a.push(i),async function(e){var t,n;if(null!==(t=mu.get(e))&&void 0!==t&&t)return;const r=null!==(n=pu.get(e))&&void 0!==n?n:[];if(0!==r.length){for(mu.set(e,!0);r.length>0;){var a;const t=null!==(a=r.shift())&&void 0!==a?a:"";try{await Au(e,t)}catch(e){console.error("Error handling incoming message:"),console.error(t),console.error(e)}}mu.set(e,!1)}}(e)):i.params.channel_id!==gu.get(e)&&null!=gu.get(e)||Eu(e):vu(e,"message",i.params.data.message);else{var o;const t=null===(o=Nu.get(e))||void 0===o?void 0:o.get(i.id);try{null==t||t(i)}finally{var s;null===(s=Nu.get(e))||void 0===s||s.delete(i.id)}}}(e,n)}})})),uu.set(e,s)}async function Ou(e,t){const{signatures:n,encodedTx:r}=wr(e,Jt.SignedTx).tx,a=await t(Tt(r.rlpEncoded,dt.Transaction));if("string"==typeof a){const{tx:e}=wr(a,Jt.SignedTx);return Cr({signatures:n.concat(e.signatures),encodedTx:e.encodedTx.rlpEncoded},Jt.SignedTx).tx}return a}function Mu(e,t,n){var r;return null==n||null===(r=n.reject)||void 0===r||r.call(n,Object.assign(new ne(`Unexpected message received:\n\n${JSON.stringify(t)}`),{wsMessage:t})),{handler:Hu}}function Ru(e,t){if("channels.info"===t.method){var n;const r=t.params.data.event;return m()(n=["channel_accept","funding_created"]).call(n,r)?(Su(e,{channel_accept:"accepted",funding_created:"halfSigned"}[r]),{handler:ju}):"channel_reestablished"===t.params.data.event?{handler:Uu}:"fsm_up"===t.params.data.event?(bu.set(e,t.params.data.fsm_id),{handler:Ru}):{handler:Ru}}var r;if("channels.error"===t.method)return vu(e,"error",new ee(null==t||null===(r=t.payload)||void 0===r?void 0:r.message)),{handler:cd}}async function Bu(e,t,n){return"channels.info"===t.method&&"fsm_up"===t.params.data.event?(bu.set(e,t.params.data.fsm_id),Tu(e,(await Iu(e,"channels.get.offchain_state",{})).signed_tx),{handler:Hu}):Mu(0,t,n)}async function ju(e,t){const n=ou.get(e);if(null!=n){const r={initiator:"initiator_sign",responder:"responder_sign"}[n.role];if(t.method===`channels.sign.${r}`){if(null!=t.params.data.tx){const a=await n.sign(r,t.params.data.tx);return _u(e,{jsonrpc:"2.0",method:`channels.${r}`,params:{tx:a}}),{handler:Du}}const a=await Ou(t.params.data.signed_tx,(async e=>n.sign(r,e)));return _u(e,{jsonrpc:"2.0",method:`channels.${r}`,params:{signed_tx:a}}),{handler:Du}}}}function Du(e,t){const n=ou.get(e);if(null!=n){if("channels.on_chain_tx"===t.method){if("funding_signed"===t.params.data.info&&"initiator"===n.role)return{handler:Vu};if("funding_created"===t.params.data.info&&"responder"===n.role)return{handler:Vu}}if("channels.info"===t.method&&"funding_signed"===t.params.data.event&&"initiator"===n.role)return gu.set(e,t.params.channel_id),Su(e,"signed"),{handler:Du}}}function Vu(e,t){if("channels.info"===t.method){const e={funding_created:Vu,own_funding_locked:Vu,funding_locked:Uu}[t.params.data.event];if(null!=e)return{handler:e}}if("channels.on_chain_tx"===t.method)return vu(e,"onChainTx",t.params.data.tx,{info:t.params.data.info,type:t.params.data.type}),{handler:Vu}}function Uu(e,t){if("channels.info"===t.method&&"open"===t.params.data.event)return gu.set(e,t.params.channel_id),{handler:Fu}}function Fu(e,t){if("channels.update"===t.method)return Tu(e,t.params.data.state),{handler:Hu}}async function Hu(e,t,n){switch(t.method){case"channels.info":switch(t.params.data.event){case"update":case"withdraw_created":case"deposit_created":return{handler:Ku};case"own_withdraw_locked":case"withdraw_locked":case"own_deposit_locked":case"deposit_locked":case"peer_disconnected":case"channel_reestablished":case"open":return vu(e,t.params.data.event),{handler:Hu};case"fsm_up":return bu.set(e,t.params.data.fsm_id),{handler:Hu};case"timeout":case"close_mutual":case"shutdown":return{handler:Hu};case"closing":return Su(e,"closing"),{handler:Hu};case"closed_confirmed":return Su(e,"closed"),{handler:cd};case"died":return Su(e,"died"),{handler:cd}}break;case"channels.on_chain_tx":return vu(e,"onChainTx",t.params.data.tx,{info:t.params.data.info,type:t.params.data.type}),{handler:Hu};case"channels.leave":return{handler:Hu};case"channels.update":return Tu(e,t.params.data.state),{handler:Hu};case"channels.sign.shutdown_sign_ack":return Ku(e,t,n)}}async function $u(e,t,n){if("channels.sign.update"===t.method){const{sign:r}=n;if(null!=t.params.data.tx)return _u(e,{jsonrpc:"2.0",method:"channels.update",params:{tx:await r(t.params.data.tx,{updates:t.params.data.updates})}}),{handler:Gu,state:n};const a=await Ou(t.params.data.signed_tx,(async e=>r(e,{updates:t.params.data.updates})));if("string"==typeof a)return _u(e,{jsonrpc:"2.0",method:"channels.update",params:{signed_tx:a}}),{handler:Gu,state:n};if("number"==typeof a)return _u(e,{jsonrpc:"2.0",method:"channels.update",params:{error:a}}),{handler:$u,state:n}}if("channels.error"===t.method)return n.reject(new ee(t.data.message)),{handler:Hu};if(null!=t.error){var r;const{data:e}=null!==(r=t.error)&&void 0!==r?r:{data:[]};return null!=e.find((e=>1001===e.code))?n.reject(new E("Insufficient balance")):null!=e.find((e=>1002===e.code))?n.reject(new A("Amount cannot be negative")):n.reject(new ee(t.error.message)),{handler:Hu}}return"channels.conflict"===t.method?(n.resolve({accepted:!1,errorCode:t.params.data.error_code,errorMessage:t.params.data.error_msg}),{handler:Hu}):"channels.info"===t.method&&"aborted_update"===t.params.data.event?(n.resolve({accepted:!1}),{handler:Hu}):Mu(0,t,n)}function Gu(e,t,n){return"channels.update"===t.method?(Tu(e,t.params.data.state),n.resolve({accepted:!0,signedTx:t.params.data.state}),{handler:Hu}):"channels.conflict"===t.method?(n.resolve({accepted:!1,errorCode:t.params.data.error_code,errorMessage:t.params.data.error_msg}),{handler:Hu}):"channels.info"===t.method&&"aborted_update"===t.params.data.event?(n.resolve({accepted:!1}),{handler:Hu}):null!=t.error?(n.reject(new ee(t.error.message)),{handler:Hu}):Mu(0,t,n)}async function Ku(e,t,n){var r;const[,a]=null!==(r=t.method.match(/^channels\.sign\.([^.]+)$/))&&void 0!==r?r:[],i=ou.get(e);if(null!=a&&null!=i){if(null!=t.params.data.tx){const n=await i.sign(a,t.params.data.tx,{updates:t.params.data.updates});if(null!=n)return _u(e,{jsonrpc:"2.0",method:`channels.${a}`,params:{tx:n}}),{handler:Hu}}else{const r=await Ou(t.params.data.signed_tx,(async e=>i.sign(a,e,{updates:t.params.data.updates})));if("string"==typeof r)return _u(e,{jsonrpc:"2.0",method:`channels.${a}`,params:{signed_tx:r}}),{handler:Hu};if("number"==typeof r)return _u(e,{jsonrpc:"2.0",method:`channels.${a}`,params:{error:r}}),{handler:Lu,state:n}}return _u(e,{jsonrpc:"2.0",method:"channels.update.new",params:{from:Ot().publicKey,to:Ot().publicKey,amount:1}}),{handler:Lu,state:n}}return Mu(0,t,n)}function Lu(e,t,n){return null!=t.error?{handler:Lu,state:n}:"channels.conflict"===t.method?{handler:Hu}:Mu(0,t,n)}async function Wu(e,t,n){return"channels.sign.shutdown_sign"===t.method?null!=t.params.data.tx?(_u(e,{jsonrpc:"2.0",method:"channels.shutdown_sign",params:{tx:await n.sign(t.params.data.tx)}}),{handler:Qu,state:n}):(_u(e,{jsonrpc:"2.0",method:"channels.shutdown_sign",params:{signed_tx:await Ou(t.params.data.signed_tx,(async e=>n.sign(e)))}}),{handler:Qu,state:n}):Mu(0,t,n)}function Qu(e,t,n){return"channels.on_chain_tx"===t.method?{handler:cd,state:n}:Mu(0,t,n)}function Yu(e,t,n){return"channels.leave"===t.method?(n.resolve({channelId:t.params.channel_id,signedTx:t.params.data.state}),Pu(e),{handler:cd}):"channels.error"===t.method?(n.reject(new ee(t.data.message)),{handler:Hu}):Mu(0,t,n)}async function Xu(e,t,n){if("channels.sign.withdraw_tx"===t.method){const{sign:r}=n;if(null!=t.params.data.tx)return _u(e,{jsonrpc:"2.0",method:"channels.withdraw_tx",params:{tx:await r(t.params.data.tx,{updates:t.params.data.updates})}}),{handler:Ju,state:n};const a=await Ou(t.params.data.signed_tx,(async e=>r(e,{updates:t.params.data.updates})));if("string"==typeof a)return _u(e,{jsonrpc:"2.0",method:"channels.withdraw_tx",params:{signed_tx:a}}),{handler:Ju,state:n};if("number"==typeof a)return _u(e,{jsonrpc:"2.0",method:"channels.withdraw_tx",params:{error:a}}),{handler:Ju,state:n}}return Mu(0,t,n)}function Ju(e,t,n){var r,a;if("channels.on_chain_tx"===t.method)return null===(r=n.onOnChainTx)||void 0===r||r.call(n,t.params.data.tx),{handler:Ju,state:n};if("channels.info"===t.method&&m()(a=["own_withdraw_locked","withdraw_locked"]).call(a,t.params.data.event)){var i;const e={own_withdraw_locked:n.onOwnWithdrawLocked,withdraw_locked:n.onWithdrawLocked};return null===(i=e[t.params.data.event])||void 0===i||i.call(e),{handler:Ju,state:n}}return"channels.update"===t.method?(Tu(e,t.params.data.state),n.resolve({accepted:!0,signedTx:t.params.data.state}),{handler:Hu}):"channels.conflict"===t.method?(n.resolve({accepted:!1,errorCode:t.params.data.error_code,errorMessage:t.params.data.error_msg}),{handler:Hu}):"channels.info"===t.method&&"aborted_update"===t.params.data.event?(n.resolve({accepted:!1}),{handler:Hu}):Mu(0,t,n)}async function Zu(e,t,n){if("channels.sign.deposit_tx"===t.method){const{sign:r}=n;if(null!=t.params.data.tx)return _u(e,{jsonrpc:"2.0",method:"channels.deposit_tx",params:{tx:await r(t.params.data.tx,{updates:t.params.data.updates})}}),{handler:ed,state:n};const a=await Ou(t.params.data.signed_tx,(async e=>r(e,{updates:t.params.data.updates})));if("string"==typeof a)return _u(e,{jsonrpc:"2.0",method:"channels.deposit_tx",params:{signed_tx:a}}),{handler:ed,state:n};if("number"==typeof a)return _u(e,{jsonrpc:"2.0",method:"channels.deposit_tx",params:{error:a}}),{handler:ed,state:n}}return Mu(0,t,n)}function ed(e,t,n){var r,a;if("channels.on_chain_tx"===t.method)return null===(r=n.onOnChainTx)||void 0===r||r.call(n,t.params.data.tx),{handler:ed,state:n};if("channels.info"===t.method&&m()(a=["own_deposit_locked","deposit_locked"]).call(a,t.params.data.event)){var i;const e={own_deposit_locked:n.onOwnDepositLocked,deposit_locked:n.onDepositLocked};return null===(i=e[t.params.data.event])||void 0===i||i.call(e),{handler:ed,state:n}}return"channels.update"===t.method?(Tu(e,t.params.data.state),n.resolve({accepted:!0,signedTx:t.params.data.state}),{handler:Hu}):"channels.conflict"===t.method?(n.resolve({accepted:!1,errorCode:t.params.data.error_code,errorMessage:t.params.data.error_msg}),{handler:Hu}):"channels.info"===t.method&&"aborted_update"===t.params.data.event?(n.resolve({accepted:!1}),{handler:Hu}):Mu(0,t,n)}async function td(e,t,n){if("channels.sign.update"===t.method){if(null!=t.params.data.tx)return _u(e,{jsonrpc:"2.0",method:"channels.update",params:{tx:await n.sign(t.params.data.tx)}}),{handler:nd,state:n};const r=await Ou(t.params.data.signed_tx,(async e=>n.sign(e)));if("string"==typeof r)return _u(e,{jsonrpc:"2.0",method:"channels.update",params:{signed_tx:r}}),{handler:nd,state:n};if("number"==typeof r)return _u(e,{jsonrpc:"2.0",method:"channels.update",params:{error:r}}),{handler:nd,state:n}}return Mu(0,t,n)}function nd(e,t,n){const r=ou.get(e);if("channels.update"===t.method){const{round:a}=wr(t.params.data.state,Jt.SignedTx).tx.encodedTx.tx;if(null!=(null==r?void 0:r.role)){let i=null;if("initiator"===r.role&&(i="initiatorId"),"responder"===r.role&&(i="responderId"),null!=i){const o=null==r?void 0:r[i];return Tu(e,t.params.data.state),n.resolve({accepted:!0,address:It(o,a),signedTx:t.params.data.state}),{handler:Hu}}}}return"channels.conflict"===t.method?(n.resolve({accepted:!1,errorCode:t.params.data.error_code,errorMessage:t.params.data.error_msg}),{handler:Hu}):"channels.info"===t.method&&"aborted_update"===t.params.data.event?(n.resolve({accepted:!1}),{handler:Hu}):Mu(0,t,n)}async function rd(e,t,n){if("channels.sign.update"===t.method){if(null!=t.params.data.tx)return _u(e,{jsonrpc:"2.0",method:"channels.update",params:{tx:await n.sign(t.params.data.tx,{updates:t.params.data.updates})}}),{handler:od,state:n};const r=await Ou(t.params.data.signed_tx,(async e=>n.sign(e,{updates:t.params.data.updates})));if("string"==typeof r)return _u(e,{jsonrpc:"2.0",method:"channels.update",params:{signed_tx:r}}),{handler:od,state:n};if("number"==typeof r)return _u(e,{jsonrpc:"2.0",method:"channels.update",params:{error:r}}),{handler:od,state:n}}return Mu(0,t,n)}async function ad(e,t,n){return"channels.sign.force_progress_tx"===t.method?(_u(e,{jsonrpc:"2.0",method:"channels.force_progress_sign",params:{signed_tx:await Ou(t.params.data.signed_tx,(async e=>n.sign(e,{updates:t.params.data.updates})))}}),{handler:id,state:n}):Mu(0,t,n)}function id(e,t,n){var r;return"channels.on_chain_tx"===t.method&&(null===(r=n.onOnChainTx)||void 0===r||r.call(n,t.params.data.tx),vu(e,"onChainTx",t.params.data.tx,{info:t.params.data.info,type:t.params.data.type}),n.resolve({accepted:!0,tx:t.params.data.tx})),Mu(0,t,n)}function od(e,t,n){return"channels.update"===t.method?(Tu(e,t.params.data.state),n.resolve({accepted:!0,signedTx:t.params.data.state}),{handler:Hu}):"channels.conflict"===t.method?(n.resolve({accepted:!1,errorCode:t.params.data.error_code,errorMessage:t.params.data.error_msg}),{handler:Hu}):"channels.info"===t.method&&"aborted_update"===t.params.data.event?(n.resolve({accepted:!1}),{handler:Hu}):Mu(0,t,n)}function sd(e,t,n){return"channels.calls_pruned.reply"===t.method?(n.resolve(),{handler:Hu}):(n.reject(new ne("Unexpected message received")),{handler:cd})}function cd(e,t,n){return null==n?{handler:cd}:"closing"===t.params.data.event?{handler:cd,state:n}:"channel_closed"===t.params.data.info?(n.closeTx=t.params.data.tx,{handler:cd,state:n}):"closed_confirmed"===t.params.data.event?(n.resolve(n.closeTx),{handler:cd}):{handler:cd,state:n}}function ld(e){return Object.entries(e).reduce(((e,t)=>{let[n,r]=t;return{...e,[(a=n,a.replace(/_./g,(e=>e[1].toUpperCase())))]:r};var a}),{})}Hu.enter=e=>{Su(e,"open")};class ud{static async initialize(e){const t=new ud;return await ku(t,null!=e.existingFsmId?Bu:Ru,Hu,e),t}on(e,t){const n=du.get(this);if(null==n)throw new re;n.on(e,t)}off(e,t){const n=du.get(this);if(null==n)throw new re;n.removeListener(e,t)}disconnect(){return Pu(this)}status(){const e=su.get(this);if(null==e)throw new re;return e}async state(){return ld(await Iu(this,"channels.get.offchain_state",{}))}round(){const e=cu.get(this);if(null==e)return null;const{txType:t,tx:n}=wr(e,Jt.SignedTx).tx.encodedTx;switch(t){case Jt.ChannelCreateTx:return 1;case Jt.ChannelOffChainTx:case Jt.ChannelWithdrawTx:case Jt.ChannelDepositTx:return n.round;default:return null}}id(){const e=gu.get(this);if(null==e)throw new b("Channel is not initialized");return e}fsmId(){const e=bu.get(this);if(null==e)throw new b("Channel is not initialized");return e}async update(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return new Promise(((i,o)=>{qu(this,((e,t)=>(null==t?void 0:t.handler)===Hu),(s=>(_u(s,{jsonrpc:"2.0",method:"channels.update.new",params:{from:e,to:t,amount:n,meta:a}}),{handler:$u,state:{resolve:i,reject:o,sign:r}})))}))}async poi(e){let{accounts:t,contracts:n}=e;return(await Iu(this,"channels.get.poi",{accounts:t,contracts:n})).poi}async balances(e){return Object.fromEntries((await Iu(this,"channels.get.balances",{accounts:e})).map((e=>[e.account,e.balance])))}async leave(){return new Promise(((e,t)=>{qu(this,((e,t)=>(null==t?void 0:t.handler)===Hu),(n=>(_u(n,{jsonrpc:"2.0",method:"channels.leave",params:{}}),{handler:Yu,state:{resolve:e,reject:t}})))}))}async shutdown(e){return new Promise(((t,n)=>{qu(this,((e,t)=>(null==t?void 0:t.handler)===Hu),(r=>(_u(r,{jsonrpc:"2.0",method:"channels.shutdown",params:{}}),{handler:Wu,state:{sign:e,resolve:t,reject:n}})))}))}async withdraw(e,t){let{onOnChainTx:n,onOwnWithdrawLocked:r,onWithdrawLocked:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise(((i,o)=>{qu(this,((e,t)=>(null==t?void 0:t.handler)===Hu),(s=>(_u(s,{jsonrpc:"2.0",method:"channels.withdraw",params:{amount:e}}),{handler:Xu,state:{sign:t,resolve:i,reject:o,onOnChainTx:n,onOwnWithdrawLocked:r,onWithdrawLocked:a}})))}))}async deposit(e,t){let{onOnChainTx:n,onOwnDepositLocked:r,onDepositLocked:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise(((i,o)=>{qu(this,((e,t)=>(null==t?void 0:t.handler)===Hu),(s=>(_u(s,{jsonrpc:"2.0",method:"channels.deposit",params:{amount:e}}),{handler:Zu,state:{sign:t,resolve:i,reject:o,onOnChainTx:n,onOwnDepositLocked:r,onDepositLocked:a}})))}))}async createContract(e,t){let{code:n,callData:r,deposit:a,vmVersion:i,abiVersion:o}=e;return new Promise(((e,s)=>{qu(this,((e,t)=>(null==t?void 0:t.handler)===Hu),(c=>(_u(c,{jsonrpc:"2.0",method:"channels.update.new_contract",params:{code:n,call_data:r,deposit:a,vm_version:i,abi_version:o}}),{handler:td,state:{sign:t,resolve:e,reject:s}})))}))}async callContract(e,t){let{amount:n,callData:r,contract:a,abiVersion:i}=e;return new Promise(((e,o)=>{qu(this,((e,t)=>(null==t?void 0:t.handler)===Hu),(s=>(_u(s,{jsonrpc:"2.0",method:"channels.update.call_contract",params:{amount:n,call_data:r,contract_id:a,abi_version:i}}),{handler:rd,state:{resolve:e,reject:o,sign:t}})))}))}async forceProgress(e,t){let{amount:n,callData:r,contract:a,abiVersion:i,gasLimit:o=1e6,gasPrice:s=Gt}=e,{onOnChainTx:c}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise(((e,l)=>{qu(this,((e,t)=>(null==t?void 0:t.handler)===Hu),(u=>(_u(u,{jsonrpc:"2.0",method:"channels.force_progress",params:{amount:n,call_data:r,contract_id:a,abi_version:i,gas_price:s,gas:o}}),{handler:ad,state:{resolve:e,reject:l,sign:t,onOnChainTx:c}})))}))}async callContractStatic(e){let{amount:t,callData:n,contract:r,abiVersion:a}=e;return ld(await Iu(this,"channels.dry_run.call_contract",{amount:t,call_data:n,contract_id:r,abi_version:a}))}async getContractCall(e){let{caller:t,contract:n,round:r}=e;return ld(await Iu(this,"channels.get.contract_call",{caller_id:t,contract_id:n,round:r}))}async getContractState(e){const t=await Iu(this,"channels.get.contract",{pubkey:e});return ld({...t,contract:ld(t.contract)})}async cleanContractCalls(){return new Promise(((e,t)=>{qu(this,((e,t)=>(null==t?void 0:t.handler)===Hu),(n=>(_u(n,{jsonrpc:"2.0",method:"channels.clean_contract_calls",params:{}}),{handler:sd,state:{resolve:e,reject:t}})))}))}async sendMessage(e,t){const n="object"==typeof e?JSON.stringify(e):e;"connecting"===this.status()&&(await new Promise((e=>{const t=n=>{"connecting"!==n&&(e(),this.off("statusChanged",t))};this.on("statusChanged",t)})),await at(500)),_u(this,{jsonrpc:"2.0",method:"channels.message",params:{info:n,to:t}})}static async reconnect(e,t){const{sign:n}=e;return ud.initialize({...e,reconnectTx:await n("reconnect",Cr(t,Jt.ChannelClientReconnectTx).tx)})}}var dd=(e,t)=>(e.connect((e=>t.sendMessage(e)),(()=>t.disconnect())),t.connect((t=>e.sendMessage(t)),(()=>e.disconnect())),()=>{e.disconnect(),t.disconnect()});class pd{constructor(e){let{debug:t=!1}=e;this.debug=t}connect(e,t){if(this.isConnected())throw new je("You already connected")}disconnect(){if(!this.isConnected())throw new De("You dont have connection. Please connect before")}receiveMessage(e){this.debug&&console.log("Receive message:",e)}sendMessage(e){this.debug&&console.log("Send message:",e)}}function md(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}var hd=new WeakMap,yd=new WeakMap,fd=new WeakMap;class gd extends pd{constructor(){let{target:e,self:t=window,origin:n,sendDirection:r,receiveDirection:a=yl.to_aepp,...i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(i),md(this,hd,{writable:!0,value:void 0}),md(this,yd,{writable:!0,value:void 0}),md(this,fd,{writable:!0,value:void 0}),Ml(this,yd,e),Ml(this,fd,t),this.origin=n,this.sendDirection=r,this.receiveDirection=a}isConnected(){return null!=this.listener}connect(e,t){super.connect(e,t),this.listener=t=>{var n,r;if("object"!=typeof t.data||"2.0"!==(null!==(n=t.data.jsonrpc)&&void 0!==n?n:null===(r=t.data.data)||void 0===r?void 0:r.jsonrpc))return;if(null!=this.origin&&this.origin!==t.origin)return;if(null!=Ol(this,yd)&&Ol(this,yd)!==t.source)return;this.receiveMessage(t);let{data:a}=t;if(null!=a.type){if(t.data.type!==this.receiveDirection)return;a=a.data}e(a,t.origin,t.source)},Ol(this,fd).addEventListener("message",this.listener),Ml(this,hd,t)}disconnect(){if(super.disconnect(),null==this.listener||null==Ol(this,hd))throw new U("Expected to not happen, required for TS");Ol(this,fd).removeEventListener("message",this.listener),delete this.listener,Ol(this,hd).call(this),Ml(this,hd,void 0)}sendMessage(e){var t;if(null==Ol(this,yd))throw new Ve("Can't send messages without target");const n=null!=this.sendDirection?{type:this.sendDirection,data:e}:e;super.sendMessage(n),Ol(this,yd).postMessage(n,null!==(t=this.origin)&&void 0!==t?t:"*")}}var Nd=(e,t)=>{if(null==window)throw new B("Window object not found, you can run wallet detector only in browser");const n={};return e.connect(((e,r,a)=>{let{method:i,params:o}=e;if(i!==Nl.readyToConnect||null!=n[o.id])return;const s={info:o,getConnection(){const e="extension"===o.type;return new gd({sendDirection:e?yl.to_waellet:void 0,receiveDirection:e?yl.to_aepp:void 0,target:a,origin:e?window.origin:o.origin})}};n[s.info.id]=s,t({wallets:n,newWallet:s})}),(()=>{})),Object.keys(n).length>0&&t({wallets:n}),()=>e.disconnect()};class Cd extends pd{constructor(e){let{port:t,...n}=e;super(n),this.port=t}disconnect(){super.disconnect(),this.port.disconnect()}connect(e,t){super.connect(e,t),this.port.onMessage.addListener(((t,n)=>{this.receiveMessage(t),e(t,n.name,n)})),this.port.onDisconnect.addListener(t)}sendMessage(e){super.sendMessage(e),this.port.postMessage(e)}isConnected(){return this.port.onMessage.hasListeners()}}}(),w}()}));
//# sourceMappingURL=aepp-sdk.browser.js.map